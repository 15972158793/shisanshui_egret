var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__awaiter=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r["throw"](e))}catch(t){o(t)}}function l(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,s)}l((r=r.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,o&&(i=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,o=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(i=l.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){l.label=n[1];break}if(6===n[0]&&l.label<i[1]){l.label=i[1],i=n;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(n);break}i[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(r){n=[6,r],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,i,s,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},CWTFrameWork;!function(e){var t=function(t){function n(n){var r=t.call(this)||this;return r.eventListenerManager=new e.EventListenerManager,r.specialName="",r.specialName=e.Comman.getClassName(egret.getQualifiedClassName(r)),r.setSkinName(n),r.eventListenerManager.addClientEventListener(r,egret.Event.ADDED_TO_STAGE,r.onAddedToStageHandler,r),r.eventListenerManager.addClientEventListener(r,egret.Event.REMOVED_FROM_STAGE,r.onRemovedFromStageHandler,r),r}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},n.prototype.onAddedToStageHandler=function(e){},n.prototype.onRemovedFromStageHandler=function(e){this.eventListenerManager.removeAllClientEventListener()},n.prototype.setSkinName=function(e){switch(e){case void 0:this.switchNullSkinName();break;case null:this.switchNullSkinName();break;default:this.switchNotNullSkinName(e)}},n.prototype.switchNullSkinName=function(){this.skinName=this.specialName+"Skin"},n.prototype.switchNotNullSkinName=function(e){this.skinName=e},n}(eui.Component);e.CommponentsBase=t,__reflect(t.prototype,"CWTFrameWork.CommponentsBase")}(CWTFrameWork||(CWTFrameWork={}));var CWTFrameWork;!function(e){var t=function(t){function n(n){var r=t.call(this,n)||this;return r.layerName=null,r.locationLayerName=null,r.layerAnimationTatics=new e.LayerNoAnimationTatics,r.locationLayerName="A_LAYER",r}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.open()},n.prototype.open=function(){this.layerAnimationTatics.open(this)},n.prototype.close=function(){this.layerAnimationTatics.close(this)},n.prototype.hide=function(){this.layerAnimationTatics.hide(this)},n.prototype.show=function(){this.layerAnimationTatics.show(this)},n}(e.CommponentsBase);e.LayerBase=t,__reflect(t.prototype,"CWTFrameWork.LayerBase")}(CWTFrameWork||(CWTFrameWork={}));var SRoomStatusEnum;!function(e){e[e.NOT_START_READY=0]="NOT_START_READY",e[e.START_DEAL_CARD=2]="START_DEAL_CARD",e[e.START_SCORE=3]="START_SCORE",e[e.SHOW_CARD=4]="SHOW_CARD",e[e.START_READY=5]="START_READY",e[e.END=6]="END",e[e.SHOW_CARD_COMPLETE=7]="SHOW_CARD_COMPLETE"}(SRoomStatusEnum||(SRoomStatusEnum={}));var SGenderEnum;!function(e){e[e.UN_KNOWN=0]="UN_KNOWN",e[e.MALE=1]="MALE",e[e.FE_MALE=2]="FE_MALE"}(SGenderEnum||(SGenderEnum={}));var CWTFrameWork;!function(e){var t=function(t){function n(n){var r=t.call(this,n)||this;return r.layerName="MESSAGEBOX_LAYER",r.setPosition(e.VerticalTypeEnum.CENTER,e.HorizontalTypeEnum.MIDDLE),r.setAnchorOffset(e.VerticalTypeEnum.CENTER,e.HorizontalTypeEnum.MIDDLE),r}return __extends(n,t),n.prototype.setPosition=function(t,n){switch(t){case e.VerticalTypeEnum.TOP:this.y=this.anchorOffsetY;break;case e.VerticalTypeEnum.CENTER:this.y=(e.Comman.startStageHeight-this.height)/2+this.anchorOffsetY;break;case e.VerticalTypeEnum.BOTTOM:this.y=e.Comman.startStageHeight-this.height+this.anchorOffsetY}switch(n){case e.HorizontalTypeEnum.LEFT:this.x=this.anchorOffsetX;break;case e.HorizontalTypeEnum.MIDDLE:this.x=(e.Comman.startStageWidth-this.width)/2+this.anchorOffsetX;break;case e.HorizontalTypeEnum.RIGHT:this.x=e.Comman.startStageWidth-this.width+this.anchorOffsetX}},n.prototype.setAnchorOffset=function(t,n){var r=this.anchorOffsetX,a=this.anchorOffsetY;switch(t){case e.VerticalTypeEnum.TOP:this.anchorOffsetY=0;break;case e.VerticalTypeEnum.CENTER:this.anchorOffsetY=this.height/2;break;case e.VerticalTypeEnum.BOTTOM:this.anchorOffsetY=this.height}switch(this.y+=this.anchorOffsetY-a,n){case e.HorizontalTypeEnum.LEFT:this.anchorOffsetX=0;break;case e.HorizontalTypeEnum.MIDDLE:this.anchorOffsetX=this.width/2;break;case e.HorizontalTypeEnum.RIGHT:this.anchorOffsetX=this.width}this.x+=this.anchorOffsetX-r},n}(e.LayerBase);e.MessageBoxLayerBase=t,__reflect(t.prototype,"CWTFrameWork.MessageBoxLayerBase")}(CWTFrameWork||(CWTFrameWork={}));var CWTFrameWork;!function(e){var t=function(t){function n(){var n=t.call(this)||this;return n.eventListenerManager=new e.EventListenerManager,n.specialName=e.Comman.getClassName(egret.getQualifiedClassName(n)),n.eventListenerManager.addClientEventListener(n,egret.Event.ADDED_TO_STAGE,n.onAddedToStageHandler,n),n.eventListenerManager.addClientEventListener(n,egret.Event.REMOVED_FROM_STAGE,n.onRemovedFromStageHandler,n),n}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},n.prototype.onAddedToStageHandler=function(e){},n.prototype.onRemovedFromStageHandler=function(e){},n}(eui.Image);e.ImageCommponentsBase=t,__reflect(t.prototype,"CWTFrameWork.ImageCommponentsBase")}(CWTFrameWork||(CWTFrameWork={}));var CWTFrameWork;!function(e){var t=function(t){function n(n){var r=t.call(this)||this;return r.eventListenerManager=new e.EventListenerManager,r.specialName==e.Comman.getClassName(egret.getQualifiedClassName(r)),r.eventListenerManager.addClientEventListener(r,egret.Event.ADDED_TO_STAGE,r.onAddedToStageHandler,r),r.eventListenerManager.addClientEventListener(r,egret.Event.REMOVED_FROM_STAGE,r.onRemovedFromStageHandler,r),r}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},n.prototype.onAddedToStageHandler=function(e){},n.prototype.onRemovedFromStageHandler=function(e){},n}(eui.Group);e.GroupCommponentsBase=t,__reflect(t.prototype,"CWTFrameWork.GroupCommponentsBase")}(CWTFrameWork||(CWTFrameWork={}));var SPlayerUtil=function(){function e(){this.genderEnum=SGenderEnum.MALE}return e}();__reflect(SPlayerUtil.prototype,"SPlayerUtil");var SRoomUtil=function(){function e(){this.watchPlayerList=new Map,this.seatPlayerList=new Map,this.roomStatusEnum=SRoomStatusEnum.NOT_START_READY,this.ownSeat=1,this.roomID=123456,this.gameName="十三水",this.currentRoundNumbers=0,this.totalRoundNumbers=10}return e}();__reflect(SRoomUtil.prototype,"SRoomUtil");var CWTFrameWork;!function(e){var t=function(t){function n(n,r,a,o){void 0===r&&(r=!0),void 0===a&&(a=1),void 0===o&&(o=!0);var i=t.call(this)||this;return i.eventListenerManager=new e.EventListenerManager,i.layerName="MESSAGEBOX_LAYER",i.messageBox=n,i.touchEnabled=r,i.alpha=a,i.isCloseMessageBox=o,i}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.isCloseMessageBox&&this.eventListenerManager.addClientEventListener(this,egret.TouchEvent.TOUCH_TAP,this.onTouchedHandler,this)},n.prototype.onTouchedHandler=function(e){},n}(e.MessageBoxLayerBase);e.MaskBoxLayerBase=t,__reflect(t.prototype,"CWTFrameWork.MaskBoxLayerBase")}(CWTFrameWork||(CWTFrameWork={}));var CWTFrameWork;!function(e){var t=function(t){function n(){var n=t.call(this)||this;return n.layerList=new Map,n.configUtil=e.Comman.configUtil.stageBaseUtil,n.initialize(n.configUtil.layerNameList),n}return __extends(n,t),n.prototype.initialize=function(e){if(null==e)throw new Error("传入的层级名称集合为null");for(var t=0;t<e.length;t++){var n=this.createNewLayerGroup(e[t]);this.layerList.set(e[t],n),this.addChild(n)}},n.prototype.createNewLayerGroup=function(t){var n=new e.LayerGroup;return n.name=t,n.width=e.Comman.startStageWidth,n.height=e.Comman.startStageHeight,n},n.prototype.openLayerCommponents=function(e){var t=this.layerList.get(e.layerName);t.openLayerCommponents(e)},n.prototype.closeLayerCommponents=function(e){var t=this.layerList.get(e.layerName);t.closeLayerCommponents(e)},n.prototype.closeLayerCommponentsByName=function(e){var t=egret.getDefinitionByName(e),n=new t,r=this.layerList.get(n.layerName);r.closeLayerCommponents(n)},n}(e.LayerBase);e.StageBase=t,__reflect(t.prototype,"CWTFrameWork.StageBase")}(CWTFrameWork||(CWTFrameWork={}));var CWTFrameWork;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.layerName="UI_LAYER",t}return __extends(t,e),t}(e.LayerBase);e.UILayerBase=t,__reflect(t.prototype,"CWTFrameWork.UILayerBase")}(CWTFrameWork||(CWTFrameWork={}));var CWTFrameWork;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.layerName="WINS_LAYER",t}return __extends(t,e),t}(e.LayerBase);e.WindowLayerBase=t,__reflect(t.prototype,"CWTFrameWork.WindowLayerBase")}(CWTFrameWork||(CWTFrameWork={}));var MessageBoxLayerBase=function(e){function t(t){var n=e.call(this,t)||this;return n.maskBox=new MaskBox(n,!0,.8),n.layerAnimationTatics=new CWTFrameWork.LayerScaleAnimationTatics,n}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),null!=this.closeButton&&(this.closeButton.messageBox=this)},t}(CWTFrameWork.MessageBoxLayerBase);__reflect(MessageBoxLayerBase.prototype,"MessageBoxLayerBase");var SNoticeBBox=function(e){function t(t,n){void 0===t&&(t=""),void 0===n&&(n=egret.getQualifiedClassName(SNoticeBBoxSkin));var r=e.call(this,n)||this;return r.labelText="",r.labelText=t,r}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.agreeButton.bitmapTextLabel.verticalCenter=-3,this.agreeButton.bitmapTextLabel.horizontalCenter=-1,this.agreeButton.bitmapTextLabel.letterSpacing=10,this.cancelButton.bitmapTextLabel.verticalCenter=-3,this.cancelButton.bitmapTextLabel.horizontalCenter=-1,this.cancelButton.bitmapTextLabel.letterSpacing=10,this.eventListenerManager.addClientEventListener(this.agreeButton,egret.TouchEvent.TOUCH_TAP,this.onAgreeButtonTouchedHandler,this),this.eventListenerManager.addClientEventListener(this.cancelButton,egret.TouchEvent.TOUCH_TAP,this.onCancelButtonTouchedHandler,this),this.textLabel.text=this.labelText},t.prototype.onTouchedHandler=function(e){Comman.stageBase.closeLayerCommponents(this)},t.prototype.onAgreeButtonTouchedHandler=function(e){},t.prototype.onCancelButtonTouchedHandler=function(e){},t}(MessageBoxLayerBase);__reflect(SNoticeBBox.prototype,"SNoticeBBox");var CWTFrameWork;!function(e){var t=function(t){function n(n){var r=t.call(this)||this;return r.eventListenerManager=new e.EventListenerManager,r.specialName=e.Comman.getClassName(egret.getQualifiedClassName(r)),r.setSkinName(n),r.eventListenerManager.addClientEventListener(r,egret.Event.ADDED_TO_STAGE,r.onAddedToStageHandler,r),r.eventListenerManager.addClientEventListener(r,egret.Event.REMOVED_FROM_STAGE,r.onRemovedFromStageHandler,r),r}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},n.prototype.onAddedToStageHandler=function(e){},n.prototype.onRemovedFromStageHandler=function(e){this.eventListenerManager.removeAllClientEventListener()},n.prototype.setSkinName=function(e){switch(e){case void 0:this.switchNullSkinName();break;case null:this.switchNullSkinName();break;default:this.switchNotNullSkinName(e)}},n.prototype.switchNullSkinName=function(){this.skinName=this.specialName+"Skin"},n.prototype.switchNotNullSkinName=function(e){this.skinName=e},n}(eui.ItemRenderer);e.ItemRendererBase=t,__reflect(t.prototype,"CWTFrameWork.ItemRendererBase")}(CWTFrameWork||(CWTFrameWork={}));var CWTFrameWork;!function(e){var t=function(){function e(){}return e.prototype.remove=function(e){e.parent&&e.parent.removeChild(e)},e}();e.LayerAnimationTaticsBase=t,__reflect(t.prototype,"CWTFrameWork.LayerAnimationTaticsBase",["CWTFrameWork.ILayerAnimationTatics"])}(CWTFrameWork||(CWTFrameWork={}));var CWTFrameWork;!function(e){var t=function(){function t(t){this.eventListenerManager=new e.EventListenerManager,this.button=t,this.buttonAnimationTatics=new e.ButtonNoAnimationTatics(t),this.eventListenerManager.addClientEventListener(this.button,egret.TouchEvent.TOUCH_BEGIN,this.onTouchedBeginHandler,this),this.eventListenerManager.addClientEventListener(this.button,egret.TouchEvent.TOUCH_TAP,this.onTouchedTapHandler,this),this.eventListenerManager.addClientEventListener(this.button,egret.TouchEvent.TOUCH_END,this.onTouchedEndHandler,this),this.eventListenerManager.addClientEventListener(this.button,egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchedReleaseOutSideHandletr,this)}return t.prototype.onTouchedBeginHandler=function(e){this.buttonAnimationTatics.touchedBeginAnimation()},t.prototype.onTouchedTapHandler=function(e){this.buttonAnimationTatics.touchedTapAnimation()},t.prototype.onTouchedEndHandler=function(e){this.buttonAnimationTatics.touchedEndAnimation()},t.prototype.onTouchedReleaseOutSideHandletr=function(e){this.buttonAnimationTatics.touchedEndAnimation()},t}();e.ButtonActionBase=t,__reflect(t.prototype,"CWTFrameWork.ButtonActionBase")}(CWTFrameWork||(CWTFrameWork={}));var GameConfigUtil=function(){function e(){this.splice_nickName_length=5,this.splice_nickName_format="...",this.maxCardCount=54,this.playerHandCardCount=13,this.maxPlayerCount=4,this.dealCardAnimationList=new Array,this.playCardCompletePositionList=new Array}return e}();__reflect(GameConfigUtil.prototype,"GameConfigUtil");var CWTFrameWork;!function(e){var t=function(t){function n(){return t.call(this)||this}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.buttonActionBase=new e.ButtonActionBase(this)},n}(e.GroupCommponentsBase);e.GroupButtonBase=t,__reflect(t.prototype,"CWTFrameWork.GroupButtonBase")}(CWTFrameWork||(CWTFrameWork={}));var CWTFrameWork;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.layerName="NOTICE_LAYER",t}return __extends(t,e),t}(e.LayerBase);e.NoticeLayerBase=t,__reflect(t.prototype,"CWTFrameWork.NoticeLayerBase")}(CWTFrameWork||(CWTFrameWork={}));var CWTFrameWork;!function(e){var t=function(t){function n(){return t.call(this)||this}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.buttonActionBase=new e.ButtonActionBase(this)},n}(e.ImageCommponentsBase);e.ImageButtonBase=t,__reflect(t.prototype,"CWTFrameWork.ImageButtonBase")}(CWTFrameWork||(CWTFrameWork={}));var GameDataController=function(){function e(){this.roomUtil=new SRoomUtil,this.playerUtil=new SPlayerUtil,this.showCardListUtil=new Array,this.animationList=new Array,this.animation2List=new Array,this.playCardCompleteList=new Array,this.currentTimeCount=90,this.disMissRoomOperateTypeList=new Map}return e.prototype.get_gender_string=function(){return this.playerUtil.genderEnum==SGenderEnum.MALE||this.playerUtil.genderEnum==SGenderEnum.UN_KNOWN?"man":this.playerUtil.genderEnum==SGenderEnum.FE_MALE?"woman":void 0},e.prototype.reset=function(){this.showCardListUtil=new Array,this.animationList=new Array,this.animation2List=new Array,this.playCardCompleteList=new Array,this.playCardList=null,this.scoreBoxUtil=null},e.prototype.isInSeat=function(){var e=this.roomUtil.watchPlayerList.get(this.playerUtil.systemID.toString());return null!=e?SSeatTypeEnum.WATCH:(e=this.roomUtil.seatPlayerList.get(this.playerUtil.systemID.toString()),null!=e?SSeatTypeEnum.SEAT:void 0)},e.prototype.isOtherPlayerInSeat=function(e){var t=this.roomUtil.watchPlayerList.get(e);return null!=t?SSeatTypeEnum.WATCH:(t=this.roomUtil.seatPlayerList.get(e),null!=t?SSeatTypeEnum.SEAT:SSeatTypeEnum.UN_KNOWN)},e.prototype.getSeatDataUtilBySeat=function(e){var t=null;return this.roomUtil.seatPlayerList.forEach(function(n,r){n.seat==e&&(t=n)}),t},e}();__reflect(GameDataController.prototype,"GameDataController");var CWTFrameWork;!function(e){var t=function(t){function n(){var n=t.call(this)||this;return n.eventListenerManager=new e.EventListenerManager,n.specialName==e.Comman.getClassName(egret.getQualifiedClassName(n)),n.eventListenerManager.addClientEventListener(n,egret.Event.ADDED_TO_STAGE,n.onAddedToStageHandler,n),n.eventListenerManager.addClientEventListener(n,egret.Event.REMOVED_FROM_STAGE,n.onRemovedFromStageHandler,n),n}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},n.prototype.onAddedToStageHandler=function(e){},n.prototype.onRemovedFromStageHandler=function(e){},n}(eui.Button);e.EuiButtonCommponentsBase=t,__reflect(t.prototype,"CWTFrameWork.EuiButtonCommponentsBase")}(CWTFrameWork||(CWTFrameWork={}));var MaskBoxLayerBase=function(e){function t(t,n,r,a){return void 0===n&&(n=!0),void 0===r&&(r=1),void 0===a&&(a=!0),e.call(this,t,n,r,a)||this}return __extends(t,e),t.prototype.onTouchedHandler=function(e){Comman.stageBase.closeLayerCommponents(this.messageBox)},t}(CWTFrameWork.MaskBoxLayerBase);__reflect(MaskBoxLayerBase.prototype,"MaskBoxLayerBase");var LogicBase=function(){function e(){}return Object.defineProperty(e.prototype,"ownSeat",{get:function(){return BLLComman.gameDataController.roomUtil.ownSeat},set:function(e){BLLComman.gameDataController.roomUtil.ownSeat=e;var t=this.getSeatDataUtil(this.ownSystemID);t.seat=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ownSystemID",{get:function(){return BLLComman.gameDataController.playerUtil.systemID},set:function(e){BLLComman.gameDataController.playerUtil.systemID=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"roomID",{get:function(){return null!=BLLComman.gameDataController.playerUtil.roomID?BLLComman.gameDataController.playerUtil.roomID:null!=BLLComman.gameDataController.roomUtil.roomID?BLLComman.gameDataController.roomUtil.roomID:void 0},set:function(e){BLLComman.gameDataController.playerUtil.roomID=e},enumerable:!0,configurable:!0}),e.prototype.getSeatDataUtil=function(e){var t=this.getSeatSeatDataUtil(e);return null==t&&(t=this.getWatchSeatDataUtil(e)),t},e.prototype.getSeatSeatDataUtil=function(e){return this.roomUtil.seatPlayerList.get(e.toString())},e.prototype.getWatchSeatDataUtil=function(e){return this.roomUtil.watchPlayerList.get(e.toString())},e.prototype.getSeatPlayerSeat=function(e){return this.roomUtil.seatPlayerList.get(e.toString()).seat},e.prototype.setSeatPlayerSeat=function(e,t){this.roomUtil.seatPlayerList.get(e.toString()).seat=t},e.prototype.getWatchPlayerSeat=function(e){return this.roomUtil.watchPlayerList.get(e.toString()).seat},e.prototype.setWatchPlayerSeat=function(e,t){this.roomUtil.watchPlayerList.get(e.toString()).seat=t},Object.defineProperty(e.prototype,"roomUtil",{get:function(){return BLLComman.gameDataController.roomUtil},enumerable:!0,configurable:!0}),e.prototype.createAndSendEvent=function(e,t){void 0===t&&(t=null),ClientEventManager.ins.createAndSendEvent(e,t)},e.prototype.split_mapList=function(e,t,n){var r=t.get(e);null!=r&&(t["delete"](e),n.set(e,r))},e.prototype.createAndSendEventByPositionEnum=function(e,t,n){void 0===n&&(n=null),ClientEventManager.ins.createAndSendEventByPositionEnum(e,t,n)},e.prototype.createAndSendEventByPlayerSeat=function(e,t,n){void 0===n&&(n=null),ClientEventManager.ins.createAndSendEventByPlayerSeat(e,n)},e.prototype.sendData=function(e){e.systemID=BLLComman.gameDataController.playerUtil.systemID,e.roomID=this.roomUtil.roomID,SerializeData.ins.recieveData(e)},e}();__reflect(LogicBase.prototype,"LogicBase");var StageBase=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(CWTFrameWork.StageBase);__reflect(StageBase.prototype,"StageBase");var UILayerBase=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(CWTFrameWork.UILayerBase);__reflect(UILayerBase.prototype,"UILayerBase");var WindowLayerBase=function(e){function t(){var t=e.call(this)||this;return t.tsData=null,t}return __extends(t,e),t}(CWTFrameWork.WindowLayerBase);__reflect(WindowLayerBase.prototype,"WindowLayerBase");var ButtonCommponents=function(e){function t(t){var n=e.call(this,t)||this;return n.start_animation_scaleX=1,n.start_animation_scaleY=1,n.end_animation_scaleX=.9,n.end_animation_scaleY=.9,n.scale_animation_time=200,n}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.eventListenerManager.addClientEventListener(this,egret.TouchEvent.TOUCH_BEGIN,this.onTouchedBeginHandler,this),this.eventListenerManager.addClientEventListener(this,egret.TouchEvent.TOUCH_TAP,this.onTouchedHandler,this),this.eventListenerManager.addClientEventListener(this,egret.TouchEvent.TOUCH_END,this.onTouchedEndHandler,this),this.eventListenerManager.addClientEventListener(this,egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchedEndHandler,this),this.imageGroup.width=this.width,this.imageGroup.height=this.height,(new CWTFrameWork.AnchorOffsetManager).set_center_anchorOffset(this.imageGroup)},t.prototype.onTouchedBeginHandler=function(e){this.scale_animation(this.imageGroup,this.end_animation_scaleX,this.end_animation_scaleY,this.scale_animation_time)},t.prototype.onTouchedHandler=function(e){SoundManager.ins.playEffectSound("click")},t.prototype.onTouchedEndHandler=function(e){this.scale_animation(this.imageGroup,this.start_animation_scaleX,this.start_animation_scaleY,this.scale_animation_time)},Object.defineProperty(t.prototype,"maskImageSource",{get:function(){return this.maskImage.source},set:function(e){this.maskImage.source=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bgImageSource",{get:function(){return this.bgImage.source},set:function(e){this.bgImage.source=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentImageSource",{get:function(){return this.contentImage.source},set:function(e){this.contentImage.source=e},enumerable:!0,configurable:!0}),t.prototype.scale_animation=function(e,t,n,r){egret.Tween.removeTweens(e),egret.Tween.get(e,{loop:!1}).to({scaleX:t,scaleY:n},r)},Object.defineProperty(t.prototype,"textLabelText",{get:function(){return this.textLabel.text},set:function(e){this.textLabel.text=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bitmapTextLabelText",{get:function(){return this.bitmapTextLabel.text},set:function(e){this.bitmapTextLabel.text=e},enumerable:!0,configurable:!0}),t}(CWTFrameWork.CommponentsBase);__reflect(ButtonCommponents.prototype,"ButtonCommponents");var LabelCommponents=function(e){function t(){var t=e.call(this)||this;return t.eventListenerManager=new CWTFrameWork.EventListenerManager,t.fontFamily="黑体",t}return __extends(t,e),t}(eui.Label);__reflect(LabelCommponents.prototype,"LabelCommponents");var H5WXShareManager=function(){function e(){this.share_split_char="-"}return e.prototype.share_to_friends=function(){var e=this.create_title(),t=this.create_content();BLLComman.hallManager.game_wxShare_send(e,t,"","")},e.prototype.share_history_to_friends=function(){var e=this.create_title(),t=this.create_history_content();BLLComman.hallManager.game_wxShare_send(e,t,"","")},e.prototype.create_title=function(){var e=BLLComman.gameDataController.roomUtil,t=(BLLComman.gameDataController.playerUtil,"");return t+="{platform}-十三水，房间号为"+e.roomID},e.prototype.create_content=function(){var e=BLLComman.gameDataController.roomUtil,t=(BLLComman.gameDataController.playerUtil,"");return t+="模式："+(BLLComman.gameDataController.roomUtil.gamePlayModeEnum==SGamePlayModeEnum.AUTO?"智能":"手动"),t+="  ",t+="局数："+e.totalRoundNumbers+"局",t+="    \r\n",t+="扣费方式："+(e.gameChargeEnum==SGameChargeEnum.AA?"AA付费":"房主付费")},e.prototype.create_history_content=function(){for(var e="",t=BLLComman.gameDataController.bigScoreBoxUtilList,n=0;n<t.length;n++){var r=t[n];e+=Comman.splitNickName(r.nickName),e+=":"+r.totalScore,n%2==0&&(e+="   "),n%2==1&&(e+="\r\n")}return e},e}();__reflect(H5WXShareManager.prototype,"H5WXShareManager");var HallManager=function(){function e(){}return e.prototype.game_load_reSource_complete_send=function(){window.parent.postMessage({forLobby:!0,cmd:"ready"},"*")},e.prototype.send_data=function(e){window.parent.postMessage(JSON.stringify(e),"*")},e.prototype.game_loading_reSource_send=function(e,t){window.parent.postMessage({forLobby:!0,cmd:"loading",percent:e/t*.5+.5},"*")},e.prototype.game_refresh_send=function(){window.parent.postMessage({forLobby:!0,cmd:"refresh"},"*")},e.prototype.game_close_send=function(){window.parent.postMessage({forLobby:!0,cmd:"close"},"*")},e.prototype.game_wxShare_send=function(e,t,n,r){window.parent.postMessage({forLobby:!0,cmd:"wx",func:"initShare",title:e,desc:t,link:n,imgUrl:r},"*")},e.prototype.startRecord=function(){window.parent.postMessage({forLobby:!0,cmd:"wx",func:"startRecord"},"*")},e.prototype.stopRecord=function(){window.parent.postMessage({forLobby:!0,cmd:"wx",func:"stopRecord",type:1},"*")},e.prototype.downloadVoice=function(e){window.parent.postMessage({forLobby:!0,cmd:"wx",func:"downloadVoice",serverId:e},"*")},e}();__reflect(HallManager.prototype,"HallManager");var SPlayerInformationB=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.setCurrencyText=function(e){this.currencyLabel.text=e},t.prototype.setCurrencyGroupWidth=function(e){this.currencyGroup.width=e+40},Object.defineProperty(t.prototype,"seatDataUtil",{get:function(){return this._seatDataUtil},set:function(e){this.setCurrencyText(e.totalScoreNumbers.toString()),this.nickNameLabel.text=e.playerUtil.splitNickName,this.playerInformationButton.contentImageSource=e.playerUtil.headerImageUrl},enumerable:!0,configurable:!0}),t}(CWTFrameWork.CommponentsBase);__reflect(SPlayerInformationB.prototype,"SPlayerInformationB");var SShowCardListCommponents=function(e){function t(){var t=e.call(this)||this;return t.positionEnumString="",t.score_group_name_format="scoreGroup",t.cardType_image_name_format="cardTypeImage",t.cardScore_bitmapLabel_name_format="cardScoreBitmapLabel",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);var t=parseInt(this.positionEnumString);t==PositionEnum.BOTTOM&&(this.cardListCommponents.touched=!0);var n=ClientEventManager.ins.createClientEventTypeByPositionEnum(ClientEventEnum.SHOW_CARD,t);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,n,this.onShowCardHandler,this);var r=ClientEventManager.ins.createClientEventTypeByPositionEnum(ClientEventEnum.SHOW_SPECIAL_CARD,t);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,r,this.onShowSpecialCardHandler,this)},t.prototype.onShowCardHandler=function(e){var t=e.msg;this.cardListCommponents.show_card_data(t.cardUtilList,t.yChildNumber),this.change_score_group(t)},t.prototype.change_score_group=function(e){var t=this.getChildByName(this.score_group_name_format+e.yChildNumber),n=t.getChildByName(this.cardType_image_name_format);n.source=Comman.getCardTypeImageName(e.cardTypeEnum);var r=BLLComman.gameDataController.get_gender_string();SoundManager.ins.playEffectSound(r+"_"+e.cardTypeEnum/1e5);var a=t.getChildByName(this.cardScore_bitmapLabel_name_format);a.text=this.choose_scoreNumbersString(e.scoreNumbers),a.font=this.choose_scoreNumbers_font(e.scoreNumbers)},t.prototype.chooseYChildNumber=function(e){switch(e){case 0:return"before";case 1:return"center";case 2:return"after"}},t.prototype.chooseScoreNumbers=function(e){return e>=0?"loseFont":"winFont"},t.prototype.choose_scoreNumbersString=function(e){return e>=0?"+"+e:e.toString()},t.prototype.choose_scoreNumbers_font=function(e){return e>=0?"winFnt_fnt":"loseFnt_fnt"},t.prototype.onShowSpecialCardHandler=function(e){var t=e.msg;this.cardListCommponents.show_card_data(t.splice(0,3),0),this.cardListCommponents.show_card_data(t.splice(0,5),1),this.cardListCommponents.show_card_data(t.splice(0,5),2)},t.getCardTypeImageName=function(e){var t=Math.floor(e/1e5);return"cardType_image_"+t+"_png"},t}(CWTFrameWork.CommponentsBase);__reflect(SShowCardListCommponents.prototype,"SShowCardListCommponents");var STextChatCommponents=function(e){function t(){var t=e.call(this)||this;return t.positionEnum="",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);var t=parseInt(this.positionEnum),n=ClientEventManager.ins.createClientEventTypeByPositionEnum(ClientEventEnum.TEXT_CHAT,t);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,n,this.onTextChatHandler,this)},t.prototype.onTextChatHandler=function(e){var t=e.msg;this.chatTextLabel.text=t.chatText,this.animation();var n=BLLComman.gameDataController.playerUtil.genderEnum;n==SGenderEnum.MALE||n==SGenderEnum.UN_KNOWN?SoundManager.ins.playEffectSound("man_chat"+(t.currentChatNumbers-1)):SoundManager.ins.playEffectSound("woman_chat"+(t.currentChatNumbers-1))},t.prototype.animation=function(){egret.Tween.removeTweens(this),egret.Tween.get(this,{loop:!1}).to({alpha:1},500).wait(2e3).to({alpha:0},500)},t}(CWTFrameWork.CommponentsBase);__reflect(STextChatCommponents.prototype,"STextChatCommponents");var SerializeData=function(){function e(){}return e.prototype.recieveData=function(e){var t={};switch(e.systemID=BLLComman.gameDataController.playerUtil.systemID,e.roomID=BLLComman.gameDataController.playerUtil.roomID,e.cmdEnum){case CMDEnum.LOGIN:t=this.on_login_serialize(e);break;case CMDEnum.CREATE_ROOM:t=this.on_createRoom_serialize(e);break;case CMDEnum.JOIN_ROOM:t=this.on_joinRoom_serialize(e);break;case CMDEnum.SIT_DOWN:t=this.on_sitDown_serialize(e);break;case CMDEnum.READY:t=this.on_ready_serialize(e);break;case CMDEnum.CHAT:t=this.on_chat_serialize(e);break;case CMDEnum.PLAY_CARD_COMPLETE:t=this.on_playCardComplete_serialize(e);break;case CMDEnum.DISMISS_ROOM:t=this.dismissRoom_tranmission(e);break;case CMDEnum.BACK_HOME:t=this.backHome_tranmission(e);break;case CMDEnum.OPERATE_DISMISS_ROOM:t=this.operate_dismissRoom_tranmisison(e);break;case CMDEnum.START_GAME:t=this.startGame_tranmission(e)}BLLComman.socketManager.sendData(t)},e.prototype.create_obj=function(e){var t={};return t.roleId=e.systemID,t.roomId=e.roomID,t.cmd=e.cmdEnum,t},e.prototype.startGame_tranmission=function(e){var t=this.create_obj(e);return t},e.prototype.on_login_serialize=function(e){var t=this.create_obj(e);return t},e.prototype.on_createRoom_serialize=function(e){var t=this.create_obj(e);return t.round=e.totalRoundNumbers,t.isAA=e.gameChargeEnum==SGameChargeEnum.AA?!0:!1,t.auto=e.gamePlayModeEnum==SGamePlayModeEnum.AUTO?!0:!1,t.gameType=0,t.roomId=null,t.specialDeck=e.specialCardTypeEnum==SSpecialCardTypeEnum.HAS_SPECIAL?!0:!1,t},e.prototype.on_joinRoom_serialize=function(e){var t=this.create_obj(e);return t.joinType=e.joinType,t},e.prototype.on_sitDown_serialize=function(e){var t=this.create_obj(e);return t.seat=e.seat,t},e.prototype.on_ready_serialize=function(e){var t=this.create_obj(e);return t},e.prototype.on_chat_serialize=function(e){var t=this.create_obj(e);
return t.chatUtil=e.chatUtil,t},e.prototype.on_playCardComplete_serialize=function(e){var t=this.create_obj(e);return t.daoDeck=this.createPlayCardCompleteList(e.sendCardTypeUtilList),t.evalSpecial=null==e.cardTypeEnum?!1:!0,t},e.prototype.operate_dismissRoom_tranmisison=function(e){var t=this.create_obj(e);return t.agree=e.disMissRoomTypeEnum==SDisMissRoomTypeEnum.OTHER_PLAYER_AGREE_DISMISS_ROOM?!0:!1,t},e.prototype.createPlayCardCompleteList=function(e){var t=new Array;return e.forEach(function(e,n){for(var r=new Array,a={},o=0;o<e.length;o++){var i={};i.type=e[o].cardColor,i.value=e[o].cardValue,r.push(i)}a.member=r,a.type=0,t.push(a)}),t},e.prototype.dismissRoom_tranmission=function(e){var t=this.create_obj(e);return null!=e.disMissRoomTypeEnum&&(t.type=e.disMissRoomTypeEnum),t},e.prototype.backHome_tranmission=function(e){var t=this.create_obj(e);return t},Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},set:function(e){this._ins=e},enumerable:!0,configurable:!0}),e}();__reflect(SerializeData.prototype,"SerializeData");var CreateConfig=function(){function e(){}return e.createConfig=function(){var e=new GameConfigUtil,t=new CardAnimationUtil(200,970,20,0,300,.7,.7);e.dealCardAnimationList.push(t);var n=new CardAnimationUtil(690,600,-20,0,300,.7,.7);e.dealCardAnimationList.push(n);var r=new CardAnimationUtil(60,600,20,0,300,.7,.7);e.dealCardAnimationList.push(r);var a=new CardAnimationUtil(200,280,20,0,300,.7,.7);e.dealCardAnimationList.push(a),e.playCardCompletePositionList=[{startX:179,startY:738,spaceH:0,spaceV:0,animationTime:0,scaleX:1,scaleY:1,rotation:0},{startX:442,startY:369,spaceH:0,spaceV:0,animationTime:0,scaleX:.8,scaleY:.8,rotation:0},{startX:250,startY:60,spaceH:0,spaceV:0,animationTime:0,scaleX:.8,scaleY:.8,rotation:0},{startX:8,startY:369,spaceH:0,spaceV:0,animationTime:0,scaleX:.8,scaleY:.8,rotation:0}],console.log(JSON.stringify(e))},e}();__reflect(CreateConfig.prototype,"CreateConfig");var SSeatTypeEnum;!function(e){e[e.WATCH=0]="WATCH",e[e.SEAT=1]="SEAT",e[e.UN_KNOWN=2]="UN_KNOWN"}(SSeatTypeEnum||(SSeatTypeEnum={}));var SSpecialCardTypeEnum;!function(e){e[e.NO_SPECIAL=0]="NO_SPECIAL",e[e.HAS_SPECIAL=1]="HAS_SPECIAL"}(SSpecialCardTypeEnum||(SSpecialCardTypeEnum={}));var SWinTypeEnum;!function(e){e[e.WIN=0]="WIN",e[e.LOSE=1]="LOSE"}(SWinTypeEnum||(SWinTypeEnum={}));var BackHomeBroadCastBroadCast=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.recieveData=function(e){var t=e.seat,n=BLLComman.getUserPositionEnum(t);BLLComman.gameDataController.isOtherPlayerInSeat(e.systemID.toString())==SSeatTypeEnum.SEAT&&(this.createAndSendEventByPositionEnum(ClientEventEnum.STAND_UP_SUCCESS,n),this.createAndSendEventByPositionEnum(ClientEventEnum.READY_CHANGE,n,SReadyStatusEnum.NOT_READY)),this.roomUtil.watchPlayerList["delete"](e.systemID.toString()),this.roomUtil.seatPlayerList["delete"](e.systemID.toString()),this.createAndSendEvent(ClientEventEnum.WATCH_PLAYERLIST_CHANGE)},Object.defineProperty(t,"ins",{get:function(){return null==this._ins&&(this._ins=new t),this._ins},set:function(e){this._ins=e},enumerable:!0,configurable:!0}),t}(LogicBase);__reflect(BackHomeBroadCastBroadCast.prototype,"BackHomeBroadCastBroadCast");var BackHomeLogic=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.recieveData=function(e){return e.systemID==this.ownSystemID?void this.createAndSendEvent(ClientEventEnum.BACK_HOME,null):(this.roomUtil.watchPlayerList["delete"](e.systemID.toString()),void this.createAndSendEvent(ClientEventEnum.WATCH_PLAYERLIST_CHANGE))},t.prototype.send_backHome_data=function(e){var t=new CMDUtil(CMDEnum.BACK_HOME);t.systemID=this.ownSystemID,t.roomID=BLLComman.gameDataController.roomUtil.roomID,t.disMissRoomTypeEnum=e,this.sendData(t)},Object.defineProperty(t,"ins",{get:function(){return null==this._ins&&(this._ins=new t),this._ins},set:function(e){this._ins=e},enumerable:!0,configurable:!0}),t}(LogicBase);__reflect(BackHomeLogic.prototype,"BackHomeLogic");var SSeatDataUtil=function(){function e(){}return e}();__reflect(SSeatDataUtil.prototype,"SSeatDataUtil");var CWTFrameWork;!function(e){var t=function(){function e(e){this.button=e}return e.prototype.touchedBeginAnimation=function(){},e.prototype.touchedEndAnimation=function(){},e.prototype.touchedTapAnimation=function(){},e.prototype.touchedReleaseOutSideAnimation=function(){},e.prototype.tweenAnimation=function(e,t,n,r){},e.prototype.setButtonAnchorOffset=function(e){},e}();e.ButtonNoAnimationTatics=t,__reflect(t.prototype,"CWTFrameWork.ButtonNoAnimationTatics",["CWTFrameWork.IButtonAnimationBase"])}(CWTFrameWork||(CWTFrameWork={}));var CWTFrameWork;!function(e){var t=function(){function t(t){this.button=t,this.configUtil=e.Comman.configUtil.buttonScaleAnimationTaticsUtil,this.setButtonAnchorOffset(t)}return t.prototype.touchedBeginAnimation=function(){this.tweenAnimation(this.button,this.configUtil.endScaleX,this.configUtil.endScaleY,this.configUtil.startTweenTime)},t.prototype.touchedEndAnimation=function(){this.tweenAnimation(this.button,this.configUtil.startScaleX,this.configUtil.startScaleY,this.configUtil.endTweenTime)},t.prototype.touchedTapAnimation=function(){},t.prototype.touchedReleaseOutSideAnimation=function(){},t.prototype.tweenAnimation=function(e,t,n,r){egret.Tween.removeTweens(e),egret.Tween.get(e,{loop:!1}).to({scaleX:t,scaleY:n},r)},t.prototype.setButtonAnchorOffset=function(e){e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.x+=e.anchorOffsetX,e.y+=e.anchorOffsetY},t}();e.ButtonScaleAnimationTatics=t,__reflect(t.prototype,"CWTFrameWork.ButtonScaleAnimationTatics",["CWTFrameWork.IButtonAnimationBase"])}(CWTFrameWork||(CWTFrameWork={}));var CWTFrameWork;!function(e){var t=function(){function e(){this.startScaleX=1,this.startScaleY=1,this.endScaleX=.8,this.endScaleY=.8,this.startTweenTime=200,this.endTweenTime=200}return e}();e.ButtonScaleAnimationTaticsUtil=t,__reflect(t.prototype,"CWTFrameWork.ButtonScaleAnimationTaticsUtil")}(CWTFrameWork||(CWTFrameWork={}));var BLLComman=function(){function e(){}return e.spliceNickName=function(t){var n=e.gameConfig.splice_nickName_length;return t.length>n?t.slice(0,n)+e.gameConfig.splice_nickName_format:t},e.getUserPositionEnum=function(e){var t=null==this.gameDataController.roomUtil.ownSeat||0==this.gameDataController.roomUtil.ownSeat?1:this.gameDataController.roomUtil.ownSeat;t>e&&(e+=4);var n=e-t;return n},e.getUserSeat=function(e){var t=null==this.gameDataController.roomUtil.ownSeat||0==this.gameDataController.roomUtil.ownSeat?1:this.gameDataController.roomUtil.ownSeat,n=t+e;return n>4&&(n-=4),n},e.getUserPositionEnumBySeat=function(e,t){e>t&&(t+=4);var n=t-e;return n},e.TSDATA=null,e.gameDataController=new GameDataController,e.gameConfig=new GameConfigUtil,e.h5WXShareManager=new H5WXShareManager,e.hallManager=new HallManager,e.watchPlayerBoxOpend=!1,e}();__reflect(BLLComman.prototype,"BLLComman");var CWTFrameWork;!function(e){var t=function(t){function n(){return t.call(this)||this}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.buttonActionBase=new e.ButtonActionBase(this)},n}(e.EuiButtonCommponentsBase);e.EuiButtonBase=t,__reflect(t.prototype,"CWTFrameWork.EuiButtonBase")}(CWTFrameWork||(CWTFrameWork={}));var BLLLogic=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.recieveData=function(e){switch(e.cmdEnum){case CMDEnum.LOGIN:LoginLogic.ins.recieveData(e);break;case CMDEnum.CREATE_ROOM:CreateRoomLogic.ins.recieveData(e);break;case CMDEnum.JOIN_ROOM:JoinRoomLogic.ins.recieveData(e);break;case CMDEnum.SIT_DOWN:SitDownLogic.ins.recieveData(e);break;case CMDEnum.JOIN_ROOM_BROADCAST:OtherPlayerJoinRoomLogic.ins.recieveData(e);break;case CMDEnum.SIT_DOWN_BROADCAST:OtherPlayerSitDownLogic.ins.recieveData(e);break;case CMDEnum.READY:ReadyLogic.ins.recieveData(e);break;case CMDEnum.READY_BROADCAST:OtherPlayerReadyLogic.ins.recieveData(e);break;case CMDEnum.CHAT:ChatLogic.ins.recieveData(e);break;case CMDEnum.PLAY_CARD:PlayCardLogic.ins.recieveData(e);break;case CMDEnum.CHAT_BORADCAST:OtherPlayerChatLogic.ins.recieveData(e);break;case CMDEnum.PLAY_CARD_COMPLETE_BROADCAST:PlayCardBroadCastLogic.ins.recieveData(e);break;case CMDEnum.SCORE:ScoreLogic.ins.recieveData(e);break;case CMDEnum.BACK_HOME:BackHomeLogic.ins.recieveData(e);break;case CMDEnum.DISMISS_ROOM:DisMissRoomLogic.ins.recieveData(e);break;case CMDEnum.OFF_LINE_BROADCAST:OffLineBroadCastLogic.ins.recieveData(e);break;case CMDEnum.BACK_HOME_BROADCAST:BackHomeBroadCastBroadCast.ins.recieveData(e);break;case CMDEnum.BIG_SCORE:TotalScoreLogic.ins.recieveData(e);break;case CMDEnum.OWN_CHANGE:ClientEventManager.ins.createAndSendEvent(ClientEventEnum.OWN_CHANGE,e.currentOwnerID)}},Object.defineProperty(t,"ins",{get:function(){return null==this._ins&&(this._ins=new t),this._ins},set:function(e){this._ins=e},enumerable:!0,configurable:!0}),t}(LogicBase);__reflect(BLLLogic.prototype,"BLLLogic");var ChatLogic=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.recieveData=function(e){var t=e.seat,n=BLLComman.getUserPositionEnum(t);switch(e.chatUtil.chatTypeEnum){case SChatTypeEnum.TEXT_CHAT:this.on_textChat_recieve_data(n,e);break;case SChatTypeEnum.FACE_CHAT:this.on_faceChat_recieve_data(n,e)}},t.prototype.on_textChat_recieve_data=function(e,t){this.createAndSendEventByPositionEnum(ClientEventEnum.TEXT_CHAT,e,t.chatUtil)},t.prototype.on_faceChat_recieve_data=function(e,t){this.createAndSendEventByPositionEnum(ClientEventEnum.FACE_CHAT,e,t.chatUtil)},t.prototype.send_chat_data=function(e){var t=new CMDUtil(CMDEnum.CHAT);t.chatUtil=e,this.sendData(t)},Object.defineProperty(t,"ins",{get:function(){return null==this._ins&&(this._ins=new t),this._ins},set:function(e){this._ins=e},enumerable:!0,configurable:!0}),t}(LogicBase);__reflect(ChatLogic.prototype,"ChatLogic");var CreateRoomLogic=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.recieveData=function(e){switch(e.errorCodeEnum){case ErrorCodeEnum.CREATE_ROOM_SUCCESS:this.onCreateRoomSuccessHandler(e)}},t.prototype.onCreateRoomSuccessHandler=function(e){this.roomID=e.roomID,ClientEventManager.ins.createAndSendEvent(ClientEventEnum.CREATE_ROOM_SUCCESS)},t.prototype.send_createRoom_data=function(){var e=new CMDUtil(CMDEnum.CREATE_ROOM);e.totalRoundNumbers=10,e.gameChargeEnum=SGameChargeEnum.AA,e.gamePlayModeEnum=SGamePlayModeEnum.HAND,e.specialCardTypeEnum=SSpecialCardTypeEnum.HAS_SPECIAL,e.roomID=123456,BLLComman.gameDataController.playerUtil.roomID=123456,this.sendData(e)},Object.defineProperty(t,"ins",{get:function(){return null==this._ins&&(this._ins=new t),this._ins},set:function(e){this._ins=e},enumerable:!0,configurable:!0}),t}(LogicBase);__reflect(CreateRoomLogic.prototype,"CreateRoomLogic");var DisMissRoomLogic=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.recieveData=function(e){switch(e.disMissRoomTypeEnum){case SDisMissRoomTypeEnum.OTHER_PLAYER_DISMISS_ROOM:this.onOtherPlayerDismissRoomHandler(e);break;case SDisMissRoomTypeEnum.OTHER_PLAYER_AGREE_DISMISS_ROOM:this.onOtherPlayerDismissRoomOperateTypeHandler(e);break;case SDisMissRoomTypeEnum.OTHER_PLAYER_REFUSE_DISMISS_ROOM:this.onOtherPlayerDismissRoomOperateTypeHandler(e);break;case SDisMissRoomTypeEnum.FORCE_DISMISS_ROOM:break;case SDisMissRoomTypeEnum.DISMISS_ROOM_FAILD:this.onDisMissRoomFaildHandler();break;case SDisMissRoomTypeEnum.DISMISS_ROOM_SUCCESS:this.onDisMissRoomSuccessHandler()}},t.prototype.recieve_back_home_data=function(e){if(e.systemID==this.ownSystemID)return void this.createAndSendEvent(ClientEventEnum.BACK_HOME,null);this.roomUtil.seatPlayerList["delete"](e.systemID.toString());var t=BLLComman.getUserPositionEnum(e.seat);this.createAndSendEventByPositionEnum(ClientEventEnum.STAND_UP_SUCCESS,t,null)},t.prototype.onDisMissRoomFaildHandler=function(){BLLComman.gameDataController.disMissRoomOperateTypeList=new Map,this.createAndSendEvent(ClientEventEnum.DISMISS_ROOM_FALID)},t.prototype.onDisMissRoomSuccessHandler=function(){BLLComman.gameDataController.disMissRoomOperateTypeList=new Map,this.createAndSendEvent(ClientEventEnum.DISMISS_ROOM_SUCCESS)},t.prototype.onOtherPlayerDismissRoomHandler=function(e){this.createAndSendEvent(ClientEventEnum.OTHER_PLAYER_DISMISS_ROOM,this.roomUtil.seatPlayerList)},t.prototype.onOtherPlayerDismissRoomOperateTypeHandler=function(e){var t=BLLComman.getUserPositionEnum(BLLComman.gameDataController.roomUtil.seatPlayerList.get(e.systemID.toString()).seat);BLLComman.gameDataController.disMissRoomOperateTypeList.set(t,e.disMissRoomTypeEnum),this.createAndSendEventByPositionEnum(ClientEventEnum.OTHER_PLAYER_DISMISS_ROOM_OPERATE,t,e.disMissRoomTypeEnum)},t.prototype.send_dismissRoom_data=function(e){var t=new CMDUtil(CMDEnum.BACK_HOME);t.systemID=this.ownSystemID,t.roomID=BLLComman.gameDataController.roomUtil.roomID,t.disMissRoomTypeEnum=e,this.sendData(t)},t.prototype.send_dismissRoom_data2=function(e){var t=new CMDUtil(CMDEnum.DISMISS_ROOM);t.systemID=this.ownSystemID,t.roomID=BLLComman.gameDataController.roomUtil.roomID,t.disMissRoomTypeEnum=e,this.sendData(t)},t.prototype.send_dismissRoom_data3=function(e){var t=new CMDUtil(CMDEnum.OPERATE_DISMISS_ROOM);t.systemID=this.ownSystemID,t.roomID=BLLComman.gameDataController.roomUtil.roomID,t.disMissRoomTypeEnum=e,this.sendData(t)},Object.defineProperty(t,"ins",{get:function(){return null==this._ins&&(this._ins=new t),this._ins},set:function(e){this._ins=e},enumerable:!0,configurable:!0}),t}(LogicBase);__reflect(DisMissRoomLogic.prototype,"DisMissRoomLogic");var Main=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isThemeLoadEnd=!1,t.isResourceLoadEnd=!1,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),VersionControllerManager.initialize("2018020620"),egret.lifecycle.addLifecycleListener(function(e){});var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig(window.ossServer+"resource/default.res.json",window.ossServer+"resource/")},t.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme(window.ossServer+"resource/default.thm.json?v=",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},t.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},t.prototype.onResourceLoadComplete=function(e){"preload"==e.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},t.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},t.prototype.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},t.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},t.prototype.onResourceProgress=function(e){"preload"==e.groupName&&(this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal),BLLComman.hallManager.game_loading_reSource_send(e.itemsLoaded,e.itemsTotal))},t.prototype.startCreateScene=function(){var e=ClientEventManager.ins.createClientEventType(ClientEventEnum.HALL_READY),t=ClientEventManager.ins.createClientEventType(ClientEventEnum.OWN_OFFLINE),n=ClientEventManager.ins.createClientEventType(ClientEventEnum.JOIN_ROOM_SUCCESS);ClientEventManager.ins.addEventListener(n,this.onJoinRoomSuccessHandler,this),Comman.stageManager=new CWTFrameWork.StageManager(this,!0),SoundManager.ins.playMusicSound(SoundManager.MUSIC_ONE_SOUND),BLLComman.socketManager=new SocketManager,BLLComman.gameConfig=CWTFrameWork.ResourceManager.getJson(GameConfigUtil),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchedHandler,this),ClientEventManager.ins.addEventListener(e,this.onHallReadyHandler,this),ClientEventManager.ins.addEventListener(t,this.onOwnOffLineHandler,this),BLLComman.hallManager.game_load_reSource_complete_send()},t.prototype.getUrlParameter=function(){BLLComman.gameDataController.playerUtil.systemID=parseInt(egret.getOption("roleId"));var e=parseInt(egret.getOption("roomId"));JoinRoomLogic.ins.send_joinRoom_data(e)},t.prototype.onJoinRoomSuccessHandler=function(e){console.log("123"),Comman.stageManager.openStage(new SGameStage),BLLComman.h5WXShareManager.share_to_friends()},t.prototype.onHallReadyHandler=function(e){this.getUrlParameter()},t.prototype.onOwnOffLineHandler=function(e){Comman.stageBase.openLayerCommponents(new SNoticeADBox("你已经断线，请点击确定刷新界面！"))},t.prototype.onTouchedHandler=function(e){SoundManager.ins.playMusicSound("bg"),RES.loadGroup("otherAssets"),RES.loadGroup("soundAssets"),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchedHandler,this)},t.prototype.gudingCardUtilList=function(){return[{cardColor:1,cardValue:12},{cardColor:2,cardValue:12},{cardColor:3,cardValue:12},{cardColor:1,cardValue:8},{cardColor:4,cardValue:3},{cardColor:1,cardValue:3},{cardColor:2,cardValue:13},{cardColor:1,cardValue:13},{cardColor:3,cardValue:8},{cardColor:2,cardValue:8},{cardColor:4,cardValue:11},{cardColor:4,cardValue:10},{cardColor:3,cardValue:9}]},t.prototype.randomCardUtilList=function(){for(var e=new Array;e.length<13;){var t=new CardUtil;t.cardColor=Math.floor(4*Math.random())+1,t.cardValue=Math.floor(13*Math.random())+2;for(var n=!1,r=0;r<e.length;r++)if(t.cardColor==e[r].cardColor&&t.cardValue==e[r].cardValue){n=!0;break}n||e.push(t)}return console.log(JSON.stringify(e)),e},t}(eui.UILayer);__reflect(Main.prototype,"Main");var JoinRoomLogic=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.recieveData=function(e){switch(e.errorCodeEnum){case ErrorCodeEnum.JOIN_ROOM_SUCCESS:this.onJoinRoomSuccessHandler(e)}},t.prototype.onJoinRoomSuccessHandler=function(e){BLLComman.gameDataController.roomUtil=e.roomUtil;var t=this.getSeatDataUtil(this.ownSystemID),n=t.playerUtil;this.ownSeat=t.seat,n.splitNickName=BLLComman.spliceNickName(n.nickName),this.createAndSendEvent(ClientEventEnum.JOIN_ROOM_SUCCESS);var r=this;return BLLComman.gameDataController.isInSeat()||ClientEventManager.ins.createAndSendEventByPositionEnum(ClientEventEnum.STAND_UP_SUCCESS,PositionEnum.BOTTOM),BLLComman.gameDataController.isInSeat()==SSeatTypeEnum.SEAT&&this.createAndSendEvent(ClientEventEnum.RECONNECT_SIT_DOWN_SUCCESS),BLLComman.gameDataController.isInSeat()==SSeatTypeEnum.WATCH&&this.createAndSendEvent(ClientEventEnum.RECONNECT_STAND_UP_SUCCESS),this.roomUtil.seatPlayerList.forEach(function(e,t){var n=BLLComman.getUserPositionEnum(e.seat);e.putCardStatusEnum==SPutCardStatusEnum.PUT_CARD_COMPLETE&&BLLComman.gameDataController.playCardCompleteList.push(BLLComman.getUserPositionEnum(e.seat)),r.createAndSendEventByPositionEnum(ClientEventEnum.SIT_DOWN_SUCCESS,n,e),r.createAndSendEventByPositionEnum(ClientEventEnum.READY_CHANGE,n,e.readyStatusEnum),r.createAndSendEventByPositionEnum(ClientEventEnum.PLAYER_OFFLINE,n,e.netStatusEnum)}),BLLComman.gameDataController.disMissRoomOperateTypeList.size>0&&Comman.stageBase.openLayerCommponents(new SNoticeCBox(this.roomUtil.seatPlayerList)),null!=e.playCardList?(BLLComman.gameDataController.playCardList=e.playCardList,void this.createAndSendEvent(ClientEventEnum.START_PLAY_CARD)):null!=e.scoreBoxUtil&&t.readyStatusEnum==SReadyStatusEnum.NOT_READY?(BLLComman.gameDataController.scoreBoxUtil=e.scoreBoxUtil,void Comman.stageBase.openLayerCommponents(new SScoreBox(e.scoreBoxUtil))):null==e.scoreBoxUtil?0!=t.seat&&t.putCardStatusEnum==SPutCardStatusEnum.PUT_CARD_COMPLETE?(BLLComman.gameDataController.playCardList=e.playCardList,this.createAndSendEvent(ClientEventEnum.START_PLAY_CARD),void this.roomUtil.seatPlayerList.forEach(function(e,t){if(e.putCardStatusEnum==SPutCardStatusEnum.PUT_CARD_COMPLETE){var n=BLLComman.getUserPositionEnum(e.seat);ClientEventManager.ins.createAndSendEvent(ClientEventEnum.PLAY_CARD_COMPLETE,n)}})):0==t.seat&&this.roomUtil.roomStatusEnum==SRoomStatusEnum.START_DEAL_CARD?(BLLComman.gameDataController.playCardList=e.playCardList,this.createAndSendEvent(ClientEventEnum.START_PLAY_CARD),void this.roomUtil.seatPlayerList.forEach(function(e,t){if(e.putCardStatusEnum==SPutCardStatusEnum.PUT_CARD_COMPLETE){var n=BLLComman.getUserPositionEnum(e.seat);ClientEventManager.ins.createAndSendEvent(ClientEventEnum.PLAY_CARD_COMPLETE,n)}})):void 0:void 0},t.prototype.send_joinRoom_data=function(e){var t=new CMDUtil(CMDEnum.JOIN_ROOM);t.roomID=e,t.joinType=1,BLLComman.gameDataController.playerUtil.roomID=e,this.sendData(t)},Object.defineProperty(t,"ins",{get:function(){return null==this._ins&&(this._ins=new t),this._ins},set:function(e){this._ins=e},enumerable:!0,configurable:!0}),t}(LogicBase);__reflect(JoinRoomLogic.prototype,"JoinRoomLogic");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,n,r){function a(e){t.call(r,e)}function o(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),n.call(r))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(e,a,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var CWTFrameWork;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.startTweenAlpha=0,t.endTweenAlpha=1,t.openTweenTime=500,t.closeTweenTime=500,t}return __extends(t,e),t.prototype.open=function(e){egret.Tween.removeTweens(e),e.alpha=this.startTweenAlpha,egret.Tween.get(e,{loop:!1}).to({alpha:this.endTweenAlpha},this.openTweenTime)},t.prototype.close=function(e){egret.Tween.removeTweens(e),egret.Tween.get(e,{loop:!1}).to({alpha:this.startTweenAlpha},this.closeTweenTime).call(this.remove,this,[e])},t.prototype.show=function(e){egret.Tween.removeTweens(e),e.alpha=this.startTweenAlpha,egret.Tween.get(e,{loop:!1}).to({alpha:this.endTweenAlpha},this.openTweenTime)},t.prototype.hide=function(e){egret.Tween.removeTweens(e),egret.Tween.get(e,{loop:!1}).to({alpha:this.startTweenAlpha},this.closeTweenTime)},t}(e.LayerAnimationTaticsBase);e.LayerAlphaAnimationTatics=t,__reflect(t.prototype,"CWTFrameWork.LayerAlphaAnimationTatics")}(CWTFrameWork||(CWTFrameWork={}));var LoginLogic=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.recieveData=function(e){switch(e.errorCodeEnum){case ErrorCodeEnum.LOGIN_SUCCESS:this.onLoginSuccessHandler(e)}},t.prototype.onLoginSuccessHandler=function(e){this.ownSystemID=e.systemID,this.roomID=e.roomID,ClientEventManager.ins.createAndSendEvent(ClientEventEnum.LOGIN_SUCCESS)},t.prototype.send_login_data=function(e,t){var n=new CMDUtil(CMDEnum.LOGIN);n.systemID=e,n.signture=t,this.sendData(n)},Object.defineProperty(t,"ins",{get:function(){return null==this._ins&&(this._ins=new t),this._ins},set:function(e){this._ins=e},enumerable:!0,configurable:!0}),t}(LogicBase);__reflect(LoginLogic.prototype,"LoginLogic");var CWTFrameWork;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.open=function(e){},t.prototype.close=function(e){this.remove(e)},t.prototype.show=function(e){},t.prototype.hide=function(e){},t}(e.LayerAnimationTaticsBase);e.LayerNoAnimationTatics=t,__reflect(t.prototype,"CWTFrameWork.LayerNoAnimationTatics")}(CWTFrameWork||(CWTFrameWork={}));var CWTFrameWork;!function(e){var t=function(e){function t(t,n,r,a,o){void 0===o&&(o=1e3);var i=e.call(this)||this;return i.tweenAnimationTime=1e3,i.startX=0,i.endX=0,i.startY=0,i.endY=0,i.startX=t,i.startY=r,i.endX=n,i.endY=a,i.tweenAnimationTime=o,i}return __extends(t,e),t.prototype.open=function(e){e.x=0,egret.Tween.get(e,{loop:!1}).to({x:this.endX},this.tweenAnimationTime,egret.Ease.backOut)},t.prototype.close=function(e){egret.Tween.get(e,{loop:!1}).to({x:this.startX},this.tweenAnimationTime,egret.Ease.backIn).call(this.remove,this,[e])},t.prototype.hide=function(e){},t.prototype.show=function(e){},t}(e.LayerAnimationTaticsBase);e.LayerRightAnimationTatics=t,__reflect(t.prototype,"CWTFrameWork.LayerRightAnimationTatics")}(CWTFrameWork||(CWTFrameWork={}));var CWTFrameWork;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.startTweenScaleX=.5,t.startTweenScaleY=.5,t.endTweenScaleX=1,t.endTweenScaleY=1,t.openTweenTime=500,t.closeTweenTime=500,t}return __extends(t,e),t.prototype.open=function(e){egret.Tween.removeTweens(e),e.scaleX=this.startTweenScaleX,e.scaleY=this.startTweenScaleY,egret.Tween.get(e,{loop:!1}).to({scaleX:this.endTweenScaleX,scaleY:this.endTweenScaleY},this.openTweenTime,egret.Ease.backOut)},t.prototype.close=function(e){egret.Tween.removeTweens(e),egret.Tween.get(e,{loop:!1}).to({scaleX:this.startTweenScaleX,scaleY:this.startTweenScaleY},this.closeTweenTime,egret.Ease.backIn).call(this.remove,this,[e])},t.prototype.show=function(e){egret.Tween.removeTweens(e),e.scaleX=this.startTweenScaleX,e.scaleY=this.startTweenScaleY,egret.Tween.get(e,{loop:!1}).to({scaleX:this.endTweenScaleX,scaleY:this.endTweenScaleY},this.openTweenTime,egret.Ease.backOut)},t.prototype.hide=function(e){egret.Tween.removeTweens(e),egret.Tween.get(e,{loop:!1}).to({scaleX:this.startTweenScaleX,scaleY:this.startTweenScaleY},this.closeTweenTime,egret.Ease.backIn)},t}(e.LayerAnimationTaticsBase);e.LayerScaleAnimationTatics=t,__reflect(t.prototype,"CWTFrameWork.LayerScaleAnimationTatics")}(CWTFrameWork||(CWTFrameWork={}));var OffLineBroadCastLogic=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.recieveData=function(e){var t=e.seat,n=BLLComman.getUserPositionEnum(t);this.createAndSendEventByPositionEnum(ClientEventEnum.PLAYER_OFFLINE,n,e.playerNetStatusEnum)},Object.defineProperty(t,"ins",{get:function(){return null==this._ins&&(this._ins=new t),this._ins},set:function(e){this._ins=e},enumerable:!0,configurable:!0}),t}(LogicBase);__reflect(OffLineBroadCastLogic.prototype,"OffLineBroadCastLogic");var CWTFrameWork;!function(e){var t=function(t){function n(){var n=t.call(this)||this;return n.locationLayerNameList=new Map,n.touchEnabled=!1,n.configUtil=e.Comman.configUtil.layerGroupUtil,n}return __extends(n,t),n.prototype.openLayerCommponents=function(e){var t=this.locationLayerNameList.get(e.locationLayerName);null==t&&(t=this.createNewLocationLayerGroup(e.locationLayerName),this.locationLayerNameList.set(e.locationLayerName,t)),this.addChild(t),t.openLayerCommponents(e),this.changeLocationLayerGroupIndex(t)},n.prototype.closeLayerCommponents=function(e){var t=this.locationLayerNameList.get(e.locationLayerName);null!=t&&t.closeLayerCommponents(e)},n.prototype.changeLocationLayerGroupIndex=function(e){var t=0,n=this.configUtil.locationLayerNameList,r=n.indexOf(e.name);if(-1!=r){for(var a=0;a<this.numChildren;a++){var o=this.getChildAt(a),i=n.indexOf(o.name);if(!(r>i))break;t++}this.setChildIndex(e,t)}},n.prototype.createNewLocationLayerGroup=function(t){var n=new e.LocationLayerGroup;return n.name=t,n.width=e.Comman.startStageWidth,n.height=e.Comman.startStageHeight,n},n}(e.GroupCommponentsBase);e.LayerGroup=t,__reflect(t.prototype,"CWTFrameWork.LayerGroup")}(CWTFrameWork||(CWTFrameWork={}));var CWTFrameWork;!function(e){var t=function(){function e(){}return e}();e.LayerGroupUtil=t,__reflect(t.prototype,"CWTFrameWork.LayerGroupUtil")}(CWTFrameWork||(CWTFrameWork={}));var CWTFrameWork;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.layerBaseList=new Array,t.touchEnabled=!1,t}return __extends(t,e),t.prototype.openLayerCommponents=function(e){for(;0!=this.layerBaseList.length;)this.layerBaseList[0].close(),this.layerBaseList.shift();if("MESSAGEBOX_LAYER"==e.layerName){var t=e;this.layerBaseList.push(t.maskBox),this.addChild(t.maskBox)}this.layerBaseList.push(e),this.addChild(e)},t.prototype.closeLayerCommponents=function(e){if(0!=this.layerBaseList.length&&e.specialName==this.layerBaseList[this.layerBaseList.length-1].specialName)for(;0!=this.layerBaseList.length;)this.layerBaseList[0].close(),this.layerBaseList.shift()},t}(e.GroupCommponentsBase);e.LocationLayerGroup=t,__reflect(t.prototype,"CWTFrameWork.LocationLayerGroup")}(CWTFrameWork||(CWTFrameWork={}));var OtherPlayerChatLogic=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.recieveData=function(e){var t=e.seat,n=BLLComman.getUserPositionEnum(t);switch(e.chatUtil.chatTypeEnum){case SChatTypeEnum.TEXT_CHAT:this.on_textChat_recieve_data(n,e);break;case SChatTypeEnum.FACE_CHAT:this.on_faceChat_recieve_data(n,e)}},t.prototype.on_textChat_recieve_data=function(e,t){this.createAndSendEventByPositionEnum(ClientEventEnum.TEXT_CHAT,e,t.chatUtil)},t.prototype.on_faceChat_recieve_data=function(e,t){this.createAndSendEventByPositionEnum(ClientEventEnum.FACE_CHAT,e,t.chatUtil)},t.prototype.send_chat_data=function(e){var t=new CMDUtil(CMDEnum.CHAT);t.chatUtil=e,this.sendData(t)},Object.defineProperty(t,"ins",{get:function(){return null==this._ins&&(this._ins=new t),this._ins},set:function(e){this._ins=e},enumerable:!0,configurable:!0}),t}(LogicBase);__reflect(OtherPlayerChatLogic.prototype,"OtherPlayerChatLogic");var OtherPlayerJoinRoomLogic=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.recieveData=function(e){switch(e.errorCodeEnum){case ErrorCodeEnum.OTHER_PLAYER_JOINROOM_SUCCESS:this.onOtherPlayerJoinRoomSuccessHandler(e)}},t.prototype.onOtherPlayerJoinRoomSuccessHandler=function(e){var t=e.seatDataUtil,n=t.playerUtil;switch(n.splitNickName=BLLComman.spliceNickName(n.nickName),BLLComman.gameDataController.roomUtil.watchPlayerList.set(e.systemID.toString(),e.seatDataUtil),t.seatTypeEnum){case SSeatTypeEnum.WATCH:this.onJoinRoomWatchHandler(e);break;case SSeatTypeEnum.SEAT:this.onJoinRoomSeatHandler(e)}},t.prototype.onJoinRoomWatchHandler=function(e){var t=new NoticeTextUtil(SNoticeTextTypeEnum.TEXT_E_STATE);t.seat=this.ownSeat,t.nickName=e.seatDataUtil.playerUtil.nickName,this.createAndSendEvent(ClientEventEnum.NOTICE_TEXT,t),this.createAndSendEvent(ClientEventEnum.WATCH_PLAYERLIST_CHANGE)},t.prototype.onJoinRoomSeatHandler=function(e){this.split_mapList(e.systemID.toString(),this.roomUtil.watchPlayerList,this.roomUtil.seatPlayerList);var t=new CMDUtil;t.cmdEnum=CMDEnum.SIT_DOWN_BROADCAST,t.errorCodeEnum=ErrorCodeEnum.SIT_DOWN_SUCCESS,t.seatDataUtil=e.seatDataUtil,t.seat=e.seatDataUtil.seat,t.systemID=e.systemID,BLLLogic.ins.recieveData(t);var n=new NoticeTextUtil(SNoticeTextTypeEnum.TEXT_F_STATE);n.seat=t.seat,n.nickName=e.seatDataUtil.playerUtil.nickName,this.createAndSendEvent(ClientEventEnum.NOTICE_TEXT,n)},t.prototype.send_joinRoom_data=function(e){var t=new CMDUtil(CMDEnum.JOIN_ROOM);t.roomID=e,this.sendData(t)},Object.defineProperty(t,"ins",{get:function(){return null==this._ins&&(this._ins=new t),this._ins
},set:function(e){this._ins=e},enumerable:!0,configurable:!0}),t}(LogicBase);__reflect(OtherPlayerJoinRoomLogic.prototype,"OtherPlayerJoinRoomLogic");var OtherPlayerReadyLogic=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.recieveData=function(e){switch(e.errorCodeEnum){case ErrorCodeEnum.READY_SUCCESS:this.onReadySuccessHandler(e);break;case ErrorCodeEnum.READY_NOT_INSEAT:this.onReadyNotInSeatHandler(e)}},t.prototype.onReadySuccessHandler=function(e){var t=this.getSeatSeatDataUtil(e.systemID);t.readyStatusEnum=e.readyStatusEnum;var n=BLLComman.getUserPositionEnum(t.seat);ClientEventManager.ins.createAndSendEventByPositionEnum(ClientEventEnum.READY_CHANGE,n,e.readyStatusEnum)},t.prototype.onReadyNotInSeatHandler=function(e){var t=new NoticeTextUtil(SNoticeTextTypeEnum.TEXT_I_STATE);this.createAndSendEvent(ClientEventEnum.NOTICE_TEXT,t)},t.prototype.send_ready_data=function(){var e=new CMDUtil(CMDEnum.READY);this.sendData(e)},Object.defineProperty(t,"ins",{get:function(){return null==this._ins&&(this._ins=new t),this._ins},set:function(e){this._ins=e},enumerable:!0,configurable:!0}),t}(LogicBase);__reflect(OtherPlayerReadyLogic.prototype,"OtherPlayerReadyLogic");var OtherPlayerSitDownLogic=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.recieveData=function(e){switch(e.errorCodeEnum){case ErrorCodeEnum.SIT_DOWN_SUCCESS:this.onSitDownSuccessHandler(e);break;case ErrorCodeEnum.SIT_DOWN_ERROR_ISSITDOWN:this.onAlreadySitDownHandler(e);break;case ErrorCodeEnum.STAND_UP_SUCCESS:this.onStandUpSuccessHandler(e);break;case ErrorCodeEnum.STAND_UP_ISSTANDUP:this.onAlreadyStandUpHandler(e)}},t.prototype.onSitDownSuccessHandler=function(e){this.split_mapList(e.systemID.toString(),this.roomUtil.watchPlayerList,this.roomUtil.seatPlayerList);var t=BLLComman.getUserPositionEnum(e.seat),n=this.roomUtil.seatPlayerList.get(e.systemID.toString());n.seat=e.seat,this.createAndSendEventByPositionEnum(ClientEventEnum.SIT_DOWN_SUCCESS,t,n);var r=new NoticeTextUtil(SNoticeTextTypeEnum.TEXT_G_STATE);r.seat=n.seat,r.nickName=n.playerUtil.splitNickName,this.createAndSendEvent(ClientEventEnum.NOTICE_TEXT,r),this.createAndSendEvent(ClientEventEnum.WATCH_PLAYERLIST_CHANGE)},t.prototype.onAlreadySitDownHandler=function(e){var t=new NoticeTextUtil(SNoticeTextTypeEnum.TEXT_B_STATE);this.createAndSendEvent(ClientEventEnum.NOTICE_TEXT,t)},t.prototype.onAlreadyStandUpHandler=function(e){var t=new NoticeTextUtil(SNoticeTextTypeEnum.TEXT_C_STATE);this.createAndSendEvent(ClientEventEnum.NOTICE_TEXT,t)},t.prototype.onStandUpSuccessHandler=function(e){this.split_mapList(e.systemID.toString(),this.roomUtil.seatPlayerList,this.roomUtil.watchPlayerList);var t=this.getWatchSeatDataUtil(e.systemID),n=t.seat,r=BLLComman.getUserPositionEnum(n);t.seat=0,this.createAndSendEventByPositionEnum(ClientEventEnum.STAND_UP_SUCCESS,r),t.readyStatusEnum=SReadyStatusEnum.NOT_READY,this.createAndSendEventByPositionEnum(ClientEventEnum.READY_CHANGE,r,SReadyStatusEnum.NOT_READY);var a=new NoticeTextUtil(SNoticeTextTypeEnum.TEXT_H_STATE);a.nickName=t.playerUtil.splitNickName,a.seat=n,this.createAndSendEvent(ClientEventEnum.NOTICE_TEXT,a),this.createAndSendEvent(ClientEventEnum.WATCH_PLAYERLIST_CHANGE)},t.prototype.send_sitDown_data=function(e){var t=new CMDUtil(CMDEnum.SIT_DOWN);t.seat=e,this.sendData(t)},Object.defineProperty(t,"ins",{get:function(){return null==this._ins&&(this._ins=new t),this._ins},set:function(e){this._ins=e},enumerable:!0,configurable:!0}),t}(LogicBase);__reflect(OtherPlayerSitDownLogic.prototype,"OtherPlayerSitDownLogic");var CWTFrameWork;!function(e){var t=function(){function e(){}return e}();e.StageBaseUtil=t,__reflect(t.prototype,"CWTFrameWork.StageBaseUtil")}(CWTFrameWork||(CWTFrameWork={}));var PlayCardBroadCastLogic=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.recieveData=function(e){var t=BLLComman.getUserPositionEnum(e.seat);this.createAndSendEvent(ClientEventEnum.PLAY_CARD_COMPLETE,t)},Object.defineProperty(t,"ins",{get:function(){return null==this._ins&&(this._ins=new t),this._ins},set:function(e){this._ins=e},enumerable:!0,configurable:!0}),t}(LogicBase);__reflect(PlayCardBroadCastLogic.prototype,"PlayCardBroadCastLogic");var PlayCardLogic=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.recieveData=function(e){BLLComman.gameDataController.isInSeat()==SSeatTypeEnum.WATCH&&ClientEventManager.ins.createAndSendEvent(ClientEventEnum.GAME_CONTINUE),BLLComman.gameDataController.playCardList=e.playCardList,BLLComman.gameDataController.roomUtil.currentRoundNumbers=e.currentRoundNumbers,ClientEventManager.ins.createAndSendEvent(ClientEventEnum.ROUND_CHANGE),this.createAndSendEvent(ClientEventEnum.START_PLAY_CARD),this.roomUtil.seatPlayerList.forEach(function(e,t){var n=BLLComman.getUserPositionEnum(e.seat);e.readyStatusEnum=SReadyStatusEnum.NOT_READY,ClientEventManager.ins.createAndSendEventByPositionEnum(ClientEventEnum.READY_CHANGE,n,SReadyStatusEnum.NOT_READY)}),BLLComman.gameDataController.roomUtil.roomStatusEnum=SRoomStatusEnum.START_DEAL_CARD},t.prototype.randomCardUtilList=function(){for(var e=new Array;e.length<13;){var t=new CardUtil;t.cardColor=Math.floor(4*Math.random())+1,t.cardValue=Math.floor(13*Math.random())+2;for(var n=!1,r=0;r<e.length;r++)if(t.cardColor==e[r].cardColor&&t.cardValue==e[r].cardValue){n=!0;break}n||e.push(t)}return console.log(JSON.stringify(e)),e},t.prototype.send_playCard_complete_data=function(e,t){var n=new CMDUtil(CMDEnum.PLAY_CARD_COMPLETE);n.sendCardTypeUtilList=e,n.cardTypeEnum=t,BLLComman.gameDataController.sendCardTypeUtilList=e,this.sendData(n)},Object.defineProperty(t,"ins",{get:function(){return null==this._ins&&(this._ins=new t),this._ins},set:function(e){this._ins=e},enumerable:!0,configurable:!0}),t}(LogicBase);__reflect(PlayCardLogic.prototype,"PlayCardLogic");var CWTFrameWork;!function(e){var t=function(){function e(){}return Object.defineProperty(e,"currentStageScaleX",{get:function(){return null==this.startStageWidth||0==this.startStageWidth||null==this.currentStageWidth||0==this.currentStageWidth?1:this.currentStageWidth/this.startStageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e,"currentStageScaleY",{get:function(){return null==this.startStageHeight||0==this.startStageHeight||null==this.currentStageHeight||0==this.currentStageHeight?1:this.currentStageHeight/this.startStageHeight},enumerable:!0,configurable:!0}),e.getClassName=function(e){var t=e.split(".");return e=t[t.length-1]},e.getClassNameByClass=function(e){return this.getClassName(egret.getQualifiedClassName(e))},e}();e.Comman=t,__reflect(t.prototype,"CWTFrameWork.Comman")}(CWTFrameWork||(CWTFrameWork={}));var CWTFrameWork;!function(e){var t=function(){function e(){}return e}();e.CommanUtil=t,__reflect(t.prototype,"CWTFrameWork.CommanUtil")}(CWTFrameWork||(CWTFrameWork={}));var CWTFrameWork;!function(e){var t=function(){function e(){}return e}();e.ConfigUtil=t,__reflect(t.prototype,"CWTFrameWork.ConfigUtil")}(CWTFrameWork||(CWTFrameWork={}));var CWTFrameWork;!function(e){var t;!function(e){e[e.LEFT=1]="LEFT",e[e.MIDDLE=2]="MIDDLE",e[e.RIGHT=3]="RIGHT"}(t=e.HorizontalTypeEnum||(e.HorizontalTypeEnum={}))}(CWTFrameWork||(CWTFrameWork={}));var CWTFrameWork;!function(e){var t;!function(e){e[e.TOP=1]="TOP",e[e.CENTER=2]="CENTER",e[e.BOTTOM=3]="BOTTOM"}(t=e.VerticalTypeEnum||(e.VerticalTypeEnum={}))}(CWTFrameWork||(CWTFrameWork={}));var CWTFrameWork;!function(e){var t=function(){function e(){}return e.prototype.set_center_anchorOffset=function(e){e.x-=e.anchorOffsetX,e.y-=e.anchorOffsetY,e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.x+=e.anchorOffsetX,e.y+=e.anchorOffsetY},e.prototype.set_center_noLess_anchorOffset=function(e){e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.x+=e.anchorOffsetX,e.y+=e.anchorOffsetY},e}();e.AnchorOffsetManager=t,__reflect(t.prototype,"CWTFrameWork.AnchorOffsetManager")}(CWTFrameWork||(CWTFrameWork={}));var CWTFrameWork;!function(e){var t=function(){function t(){this.eventListenerList=new Map,this.cacheEventListenerList=new Map}return t.prototype.addClientEventListener=function(t,n,r,a){var o=this.getEventListenerArray(this.eventListenerList,n),i=new e.EventListenerUtil(t,n,r,a);this.isExistsEventListenerWithTarget(o,t,n,r,a)||(o.push(i),t.addEventListener(n,r,a))},t.prototype.addClientEventListenerByUtil=function(e){var t=this.getEventListenerArray(this.eventListenerList,e.eventType);if(this.isExistsEventListener(t,e.eventType,e.listener,e.thisObject))throw new Error("你添加了重复的相等的事件，请检查代码！");t.push(e),e.target.addEventListener(e.eventType,e.listener,e.thisObject)},t.prototype.removeClientEventListenerByEventType=function(e){var t=this.getEventListenerArray(this.eventListenerList,e),n=this.getAppointEventListenerUtilArrayByEventType(t,e);this.removeAppointEventListener(n),this.eventListenerList["delete"](e)},t.prototype.removeClientEventListener=function(e,t,n,r){var a=this.getEventListenerArray(this.eventListenerList,t),o=this.getAppointEventListenerUtilArray(a,t,n,r);this.removeAppointEventListener(o),this.eventListenerList["delete"](t)},t.prototype.removeAppointEventListener=function(e){for(;e.length>0;){var t=e[0];t.target.removeEventListener(t.eventType,t.listener,t.thisObject),e.splice(0,1)}},t.prototype.removeAllClientEventListener=function(){var e=this;this.eventListenerList.forEach(function(t,n){for(;t.length>0;)e.removeAppointEventListener(t);e.eventListenerList["delete"](n)}),this.cacheEventListenerList.forEach(function(t,n){for(;t.length>0;)e.removeAppointEventListener(t)})},t.prototype.getAppointEventListenerUtilArrayByEventType=function(e,t){for(var n=new Array,r=0;r<e.length;r++){var a=e[r];a.eventType==t&&n.push(a)}return n},t.prototype.getAppointEventListenerUtilArray=function(e,t,n,r){for(var a=new Array,o=0;o<e.length;o++){var i=e[o];i.eventType==t&&i.listener===n&&i.thisObject===r&&a.push(i)}return a},t.prototype.getAppointWithTargetEventListenerUtilArray=function(e,t,n,r,a){for(var o=new Array,i=0;i<e.length;i++){var s=e[i];s.target==t&&s.eventType==n&&s.listener===r&&s.thisObject===a&&o.push(s)}return o},t.prototype.isExistsEventListener=function(e,t,n,r){var a=!1,o=this.getAppointEventListenerUtilArray(e,t,n,r);return o.length>0&&(a=!0),a},t.prototype.isExistsEventListenerWithTarget=function(e,t,n,r,a){var o=!1,i=this.getAppointWithTargetEventListenerUtilArray(e,t,n,r,a);return i.length>0&&(o=!0),o},t.prototype.getEventListenerArray=function(e,t){var n=e.get(t);return null==n&&(n=new Array),e.set(t,n),n},t.prototype.removeClientEventListenerStoreCacheByEventType=function(e){for(var t=this.getEventListenerArray(this.eventListenerList,e),n=this.getEventListenerArray(this.cacheEventListenerList,e);t.length>0;){var r=t[0];n.push(r),r.target.removeEventListener(r.eventType,r.listener,r.thisObject),t.splice(0,1)}},t.prototype.addClientEventListenerStoreCacheByEventType=function(e){for(var t=this.getEventListenerArray(this.cacheEventListenerList,e);t.length>0;)this.addClientEventListenerByUtil(t[0]),t.splice(0,1);this.cacheEventListenerList["delete"](e)},t}();e.EventListenerManager=t,__reflect(t.prototype,"CWTFrameWork.EventListenerManager")}(CWTFrameWork||(CWTFrameWork={}));var CWTFrameWork;!function(e){var t=function(){function e(e,t,n,r){this.target=e,this.eventType=t,this.listener=n,this.thisObject=r}return e}();e.EventListenerUtil=t,__reflect(t.prototype,"CWTFrameWork.EventListenerUtil")}(CWTFrameWork||(CWTFrameWork={}));var CWTFrameWork;!function(e){var t=function(){function e(){}return e.getJson=function(t){return t=egret.getQualifiedClassName(t),e.getRes(t,e.JSON_FORMAT)},e.getJsonByName=function(t){return e.getRes(t,e.JSON_FORMAT)},e.getPng=function(t){return e.getRes(t,e.JSON_FORMAT)},e.getJpg=function(t){return e.getRes(t,e.JSON_FORMAT)},e.getFnt=function(t){return e.getRes(t,e.JSON_FORMAT)},e.getRes=function(t,n){var r=t+e.SPLIT_CHAR+n,a=RES.getRes(r);return a},e.JSON_FORMAT="json",e.PNG_FORMAT="png",e.JPG_FORMAT="jpg",e.FNT_FORMAT="fnt",e.SPLIT_CHAR="_",e.CARD_FROMAT="card",e.EXPOSED_KONG_FORMAT="operateCardImage",e}();e.ResourceManager=t,__reflect(t.prototype,"CWTFrameWork.ResourceManager")}(CWTFrameWork||(CWTFrameWork={}));var CWTFrameWork;!function(e){var t=function(){function t(t,n){void 0===n&&(n=!1),this.isScale=!1,this.uiLayer=t,this.isScale=n,e.Comman.configUtil=e.ResourceManager.getJsonByName(e.Comman.getClassNameByClass(e.ConfigUtil)),this.initialize()}return t.prototype.initialize=function(){var t=e.Comman.configUtil.commanUtil;e.Comman.startStageWidth=t.startStageWidth,e.Comman.startStageHeight=t.startStageHeight,e.Comman.currentStageWidth=this.uiLayer.stage.stageWidth,e.Comman.currentStageHeight=this.uiLayer.stage.stageHeight,this.isScale&&(this.uiLayer.scaleX=e.Comman.currentStageScaleX,this.uiLayer.scaleY=e.Comman.currentStageScaleY,this.uiLayer.addEventListener(egret.Event.RESIZE,this.onResizeHandler,this))},t.prototype.onResizeHandler=function(t){e.Comman.currentStageWidth=this.uiLayer.stage.stageWidth,e.Comman.currentStageHeight=this.uiLayer.stage.$stageHeight,this.uiLayer.scaleX=e.Comman.currentStageScaleX,this.uiLayer.scaleY=e.Comman.currentStageScaleY},t.prototype.openStage=function(e){this.closeStage(this.stageBase),this.stageBase=e,this.uiLayer.addChild(e)},t.prototype.closeStage=function(e){null!=this.stageBase&&this.stageBase.close()},t}();e.StageManager=t,__reflect(t.prototype,"CWTFrameWork.StageManager")}(CWTFrameWork||(CWTFrameWork={}));var ButtonActionBase=function(e){function t(t){var n=e.call(this,t)||this;return n.buttonAnimationTatics=new CWTFrameWork.ButtonScaleAnimationTatics(t),n}return __extends(t,e),t.prototype.onTouchedTapHandler=function(t){e.prototype.onTouchedTapHandler.call(this,t)},t}(CWTFrameWork.ButtonActionBase);__reflect(ButtonActionBase.prototype,"ButtonActionBase");var GroupButton=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.buttonActionBase=new ButtonActionBase(this),this.eventListenerManager.addClientEventListener(this,egret.TouchEvent.TOUCH_TAP,this.onTouchedHandler,this)},t.prototype.onTouchedHandler=function(e){},t}(CWTFrameWork.GroupButtonBase);__reflect(GroupButton.prototype,"GroupButton");var ImageButton=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.buttonActionBase=new ButtonActionBase(this),this.eventListenerManager.addClientEventListener(this,egret.TouchEvent.TOUCH_TAP,this.onTouchedHandler,this)},t.prototype.onTouchedHandler=function(e){},t}(CWTFrameWork.ImageButtonBase);__reflect(ImageButton.prototype,"ImageButton");var ReadyLogic=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.recieveData=function(e){switch(e.errorCodeEnum){case ErrorCodeEnum.READY_SUCCESS:this.onReadySuccessHandler(e);break;case ErrorCodeEnum.READY_NOT_INSEAT:this.onReadyNotInSeatHandler(e)}},t.prototype.onReadySuccessHandler=function(e){var t=this.getSeatSeatDataUtil(this.ownSystemID);t.readyStatusEnum=e.readyStatusEnum,ClientEventManager.ins.createAndSendEventByPositionEnum(ClientEventEnum.READY_CHANGE,PositionEnum.BOTTOM,e.readyStatusEnum)},t.prototype.onReadyNotInSeatHandler=function(e){var t=new NoticeTextUtil(SNoticeTextTypeEnum.TEXT_I_STATE);this.createAndSendEvent(ClientEventEnum.NOTICE_TEXT,t)},t.prototype.send_ready_data=function(){var e=new CMDUtil(CMDEnum.READY);this.sendData(e)},Object.defineProperty(t,"ins",{get:function(){return null==this._ins&&(this._ins=new t),this._ins},set:function(e){this._ins=e},enumerable:!0,configurable:!0}),t}(LogicBase);__reflect(ReadyLogic.prototype,"ReadyLogic");var ScoreLogic=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.recieveData=function(e){BLLComman.gameDataController.animationList=e.animationList,BLLComman.gameDataController.animation2List=e.animation2List,BLLComman.gameDataController.scoreBoxUtil=e.scoreBoxUtil,BLLComman.gameDataController.showCardListUtil=e.showCardList,BLLComman.gameDataController.roomUtil.roomStatusEnum=SRoomStatusEnum.SHOW_CARD,this.createAndSendEvent(ClientEventEnum.START_SHOW_CARD)},Object.defineProperty(t,"ins",{get:function(){return null==this._ins&&(this._ins=new t),this._ins},set:function(e){this._ins=e},enumerable:!0,configurable:!0}),t}(LogicBase);__reflect(ScoreLogic.prototype,"ScoreLogic");var SitDownLogic=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.recieveData=function(e){switch(e.errorCodeEnum){case ErrorCodeEnum.SIT_DOWN_SUCCESS:this.onSitDownSuccessHandler(e);break;case ErrorCodeEnum.SIT_DOWN_ERROR_ISSITDOWN:this.onAlreadySitDownHandler(e);break;case ErrorCodeEnum.STAND_UP_SUCCESS:this.onStandUpSuccessHandler(e);break;case ErrorCodeEnum.STAND_UP_ISSTANDUP:this.onAlreadyStandUpHandler(e)}},t.prototype.onSitDownSuccessHandler=function(e){this.split_mapList(this.ownSystemID.toString(),this.roomUtil.watchPlayerList,this.roomUtil.seatPlayerList),this.ownSeat=e.seat,this.setSeatPlayerSeat(this.ownSystemID,e.seat);var t=this.getSeatSeatDataUtil(this.ownSystemID);this.createAndSendEventByPositionEnum(ClientEventEnum.SIT_DOWN_SUCCESS,PositionEnum.BOTTOM,t);var n=new NoticeTextUtil(SNoticeTextTypeEnum.TEXT_A_STATE);n.seat=this.ownSeat,this.createAndSendEvent(ClientEventEnum.NOTICE_TEXT,n);for(var r=this,a=0;a<BLLComman.gameConfig.maxPlayerCount;a++)r.createAndSendEventByPositionEnum(ClientEventEnum.STAND_UP_SUCCESS,a),r.createAndSendEventByPositionEnum(ClientEventEnum.READY_CHANGE,a,SReadyStatusEnum.NOT_READY);this.roomUtil.seatPlayerList.forEach(function(e,t){var n=BLLComman.getUserPositionEnum(e.seat);r.createAndSendEventByPositionEnum(ClientEventEnum.SIT_DOWN_SUCCESS,n,e),r.createAndSendEventByPositionEnum(ClientEventEnum.READY_CHANGE,n,e.readyStatusEnum)})},t.prototype.onAlreadySitDownHandler=function(e){var t=new NoticeTextUtil(SNoticeTextTypeEnum.TEXT_B_STATE);this.createAndSendEvent(ClientEventEnum.NOTICE_TEXT,t)},t.prototype.onAlreadyStandUpHandler=function(e){var t=new NoticeTextUtil(SNoticeTextTypeEnum.TEXT_C_STATE);this.createAndSendEvent(ClientEventEnum.NOTICE_TEXT,t)},t.prototype.onStandUpSuccessHandler=function(e){this.split_mapList(this.ownSystemID.toString(),this.roomUtil.seatPlayerList,this.roomUtil.watchPlayerList),this.setWatchPlayerSeat(this.ownSystemID,0),this.createAndSendEventByPositionEnum(ClientEventEnum.STAND_UP_SUCCESS,PositionEnum.BOTTOM,this.ownSystemID);var t=this.getSeatDataUtil(this.ownSystemID);t.readyStatusEnum=SReadyStatusEnum.NOT_READY,this.createAndSendEventByPositionEnum(ClientEventEnum.READY_CHANGE,PositionEnum.BOTTOM,SReadyStatusEnum.NOT_READY);var n=new NoticeTextUtil(SNoticeTextTypeEnum.TEXT_D_STATE);this.createAndSendEvent(ClientEventEnum.NOTICE_TEXT,n)},t.prototype.send_sitDown_data=function(e){var t=new CMDUtil(CMDEnum.SIT_DOWN);t.seat=e,this.sendData(t)},Object.defineProperty(t,"ins",{get:function(){return null==this._ins&&(this._ins=new t),this._ins},set:function(e){this._ins=e},enumerable:!0,configurable:!0}),t}(LogicBase);__reflect(SitDownLogic.prototype,"SitDownLogic");var TotalScoreLogic=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.recieveData=function(e){BLLComman.gameDataController.bigScoreBoxUtilList=e.bigScoreUtilList},Object.defineProperty(t,"ins",{get:function(){return null==this._ins&&(this._ins=new t),this._ins},set:function(e){this._ins=e},enumerable:!0,configurable:!0}),t}(LogicBase);__reflect(TotalScoreLogic.prototype,"TotalScoreLogic");var SDisMissRoomTypeEnum;!function(e){e[e.OTHER_PLAYER_DISMISS_ROOM=0]="OTHER_PLAYER_DISMISS_ROOM",e[e.FORCE_DISMISS_ROOM=1]="FORCE_DISMISS_ROOM",e[e.OTHER_PLAYER_AGREE_DISMISS_ROOM=2]="OTHER_PLAYER_AGREE_DISMISS_ROOM",e[e.OTHER_PLAYER_REFUSE_DISMISS_ROOM=3]="OTHER_PLAYER_REFUSE_DISMISS_ROOM",e[e.DISMISS_ROOM_FAILD=5]="DISMISS_ROOM_FAILD",e[e.DISMISS_ROOM_SUCCESS=6]="DISMISS_ROOM_SUCCESS"}(SDisMissRoomTypeEnum||(SDisMissRoomTypeEnum={}));var Comman=function(){function e(){}return Object.defineProperty(e,"stageBase",{get:function(){return this.stageManager.stageBase},enumerable:!0,configurable:!0}),e.splitNickName=function(e){return e.length>5&&(e=e.slice(0,5)+"..."),e},e.getTimeStamp=function(){return Date.parse((new Date).toString())},e.getCardTypeImageName=function(e){var t=Math.floor(e/1e5);return"cardType_image_"+t+"_png"},e.objectListToMapList=function(e){var t=new Map;for(var n in e)t.set(n,e[n]);return t},e.mapListToObjectList=function(e){var t={};return e.forEach(function(e,n){t[n]=e}),t},e.currentSeat=1,e}();__reflect(Comman.prototype,"Comman");var BitmapLabelCommponents=function(e){function t(){var t=e.call(this)||this;return t.font="",t}return __extends(t,e),t}(eui.BitmapLabel);__reflect(BitmapLabelCommponents.prototype,"BitmapLabelCommponents");var SGameChargeEnum;!function(e){e[e.AA=0]="AA",e[e.HOST=1]="HOST"}(SGameChargeEnum||(SGameChargeEnum={}));var CloseButtonCommponents=function(e){function t(t){var n=e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this;return n.messageBox=t,n}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.bgImageSource="sCloseButton_png"},Object.defineProperty(t.prototype,"messageBox",{get:function(){return this._messageBox},set:function(e){this._messageBox=e},enumerable:!0,configurable:!0}),t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t),null!=this.messageBox&&Comman.stageBase.closeLayerCommponents(this.messageBox)},t}(ButtonCommponents);__reflect(CloseButtonCommponents.prototype,"CloseButtonCommponents");var SGamePlayModeEnum;!function(e){e[e.HAND=0]="HAND",e[e.AUTO=1]="AUTO"}(SGamePlayModeEnum||(SGamePlayModeEnum={}));var ClientEventEnum;!function(e){e[e.LOGIN_SUCCESS=1e4]="LOGIN_SUCCESS",e[e.JOIN_ROOM_SUCCESS=10001]="JOIN_ROOM_SUCCESS",e[e.SIT_DOWN_SUCCESS=10002]="SIT_DOWN_SUCCESS",e[e.STAND_UP_SUCCESS=10003]="STAND_UP_SUCCESS",e[e.NOTICE_TEXT=10004]="NOTICE_TEXT",e[e.READY_CHANGE=1005]="READY_CHANGE",e[e.TEXT_CHAT=1006]="TEXT_CHAT",e[e.FACE_CHAT=1007]="FACE_CHAT",e[e.PLAY_CARD_COMPLETE=1008]="PLAY_CARD_COMPLETE",e[e.PLAY_TS=1118]="PLAY_TS",e[e.OTHER_PLAYER_PLAY_CARD_COMPLETE=1009]="OTHER_PLAYER_PLAY_CARD_COMPLETE",e[e.SHOW_CARD=1010]="SHOW_CARD",e[e.SPECIAL_CARDTYPE_COMPLETE=1011]="SPECIAL_CARDTYPE_COMPLETE",e[e.GAME_CONTINUE=1012]="GAME_CONTINUE",e[e.TOTAL_SCORE_CHANGE=1013]="TOTAL_SCORE_CHANGE",e[e.CREATE_ROOM_SUCCESS=1014]="CREATE_ROOM_SUCCESS",e[e.START_PLAY_CARD=1015]="START_PLAY_CARD",e[e.START_SHOW_CARD=1016]="START_SHOW_CARD",e[e.OTHER_PLAYER_DISMISS_ROOM_OPERATE=1017]="OTHER_PLAYER_DISMISS_ROOM_OPERATE",e[e.DISMISS_ROOM_FALID=1018]="DISMISS_ROOM_FALID",e[e.DISMISS_ROOM_SUCCESS=1019]="DISMISS_ROOM_SUCCESS",e[e.OTHER_PLAYER_DISMISS_ROOM=1020]="OTHER_PLAYER_DISMISS_ROOM",e[e.WATCH_PLAYERLIST_CHANGE=1021]="WATCH_PLAYERLIST_CHANGE",e[e.BACK_HOME=1022]="BACK_HOME",e[e.ROUND_CHANGE=1023]="ROUND_CHANGE",e[e.PLAYER_OFFLINE=1024]="PLAYER_OFFLINE",e[e.SHOW_SPECIAL_CARD=1025]="SHOW_SPECIAL_CARD",e[e.OPTIONBOX_CLOSE=1026]="OPTIONBOX_CLOSE",e[e.SEND_PLAY_CARD_MESSAGE=1027]="SEND_PLAY_CARD_MESSAGE",e[e.QUAN_LEI_DA_COMPLETE=1028]="QUAN_LEI_DA_COMPLETE",e[e.GAME_START=1029]="GAME_START",e[e.RECONNECT_SIT_DOWN_SUCCESS=20007]="RECONNECT_SIT_DOWN_SUCCESS",e[e.PLAYER_ANIMATION_START=20008]="PLAYER_ANIMATION_START",e[e.PLAYER_ANIMATION_COMPLETE=20006]="PLAYER_ANIMATION_COMPLETE",e[e.RECONNECT_STAND_UP_SUCCESS=20033]="RECONNECT_STAND_UP_SUCCESS",e[e.HALL_READY=20034]="HALL_READY",e[e.OWN_OFFLINE=20035]="OWN_OFFLINE",e[e.OWN_CHANGE=20036]="OWN_CHANGE"}(ClientEventEnum||(ClientEventEnum={}));var CMDEnum;!function(e){e[e.LOGIN=101002]="LOGIN",e[e.LOGIN_SUCCESS=100006]="LOGIN_SUCCESS",e[e.CREATE_ROOM=140003]="CREATE_ROOM",e[e.SIT_DOWN=140002]="SIT_DOWN",e[e.JOIN_ROOM=140004]="JOIN_ROOM",e[e.PLAY_CARD=140007]="PLAY_CARD",e[e.PLAY_TS=140037]="PLAY_TS",e[e.JOIN_ROOM_BROADCAST=140064]="JOIN_ROOM_BROADCAST",e[e.PLAY_CARD_COMPLETE=140009]="PLAY_CARD_COMPLETE",e[e.PLAY_CARD_COMPLETE_BROADCAST=140069]="PLAY_CARD_COMPLETE_BROADCAST",e[e.BACK_HOME_BROADCAST=140067]="BACK_HOME_BROADCAST",e[e.SIT_DOWN_BROADCAST=140062]="SIT_DOWN_BROADCAST",e[e.OFF_LINE_BROADCAST=140070]="OFF_LINE_BROADCAST",e[e.OPERATE_DISMISS_ROOM=140008]="OPERATE_DISMISS_ROOM",e[e.READY=140005]="READY",e[e.READY_BROADCAST=140065]="READY_BROADCAST",e[e.CHAT=140010]="CHAT",e[e.CHAT_BORADCAST=1400610]="CHAT_BORADCAST",e[e.SCORE=140068]="SCORE",e[e.DISMISS_ROOM=140006]="DISMISS_ROOM",e[e.BACK_HOME=140017]="BACK_HOME",e[e.DISMISS_ROOM_BORADCARD=140066]="DISMISS_ROOM_BORADCARD",e[e.OTHER_PLAYER_OPERATE_DISMISSROOM=140078]="OTHER_PLAYER_OPERATE_DISMISSROOM",e[e.DISMISS_ROOM_RESULT=140038]="DISMISS_ROOM_RESULT",e[e.BIG_SCORE=140077]="BIG_SCORE",e[e.DAO_LUN=1400093]="DAO_LUN",e[e.OWN_CHANGE=140616]="OWN_CHANGE",e[e.START_GAME=140016]="START_GAME"}(CMDEnum||(CMDEnum={}));var ErrorCodeEnum;!function(e){e[e.LOGIN_SUCCESS=100100]="LOGIN_SUCCESS",e[e.JOIN_ROOM_SUCCESS=100200]="JOIN_ROOM_SUCCESS",e[e.SIT_DOWN_SUCCESS=100300]="SIT_DOWN_SUCCESS",e[e.SIT_DOWN_ERROR_ISSITDOWN=100301]="SIT_DOWN_ERROR_ISSITDOWN",e[e.STAND_UP_SUCCESS=100400]="STAND_UP_SUCCESS",e[e.STAND_UP_ISSTANDUP=100401]="STAND_UP_ISSTANDUP",e[e.OTHER_PLAYER_JOINROOM_SUCCESS=100500]="OTHER_PLAYER_JOINROOM_SUCCESS",e[e.READY_SUCCESS=100600]="READY_SUCCESS",e[e.READY_NOT_INSEAT=100601]="READY_NOT_INSEAT",e[e.OTHER_READY_SUCCESS=100700]="OTHER_READY_SUCCESS",e[e.OTHER_PLAYER_CHAT_CUCCESS=100800]="OTHER_PLAYER_CHAT_CUCCESS",e[e.CREATE_ROOM_SUCCESS=100900]="CREATE_ROOM_SUCCESS"}(ErrorCodeEnum||(ErrorCodeEnum={}));var PositionEnum;!function(e){e[e.BOTTOM=0]="BOTTOM",e[e.RIGHT=1]="RIGHT",e[e.TOP=2]="TOP",e[e.LEFT=3]="LEFT"}(PositionEnum||(PositionEnum={}));var SocketConnectTypeEnum;!function(e){e[e.IP=1]="IP",e[e.WS_URL=2]="WS_URL",e[e.WSS_URL=3]="WSS_URL"}(SocketConnectTypeEnum||(SocketConnectTypeEnum={}));var WXCallBackErrorCodeEnum;!function(e){e[e.LOGIN_SUCCESS=1e4]="LOGIN_SUCCESS",e[e.LOGIN_FAILD=10001]="LOGIN_FAILD",e[e.LOGIN_COMPLETE=11e3]="LOGIN_COMPLETE",e[e.GET_USERINFO_SUCCESS=2e4]="GET_USERINFO_SUCCESS",e[e.GET_USERINFO_FAILD=20001]="GET_USERINFO_FAILD",e[e.GET_USERINFO_COMPLETE=21e3]="GET_USERINFO_COMPLETE"}(WXCallBackErrorCodeEnum||(WXCallBackErrorCodeEnum={}));var WXGenderEnum;!function(e){e[e.UN_KNOWN=0]="UN_KNOWN",e[e.MALE=1]="MALE",e[e.FEMALE=2]="FEMALE"}(WXGenderEnum||(WXGenderEnum={}));var ClientEventManager=function(e){function t(){var t=e.call(this)||this;return t.CLIENT_EVENT_TYPE_FORMAT="client",t.CLIENT_EVENT_POSITION_TYPE_FORMAT="position",t}return __extends(t,e),t.prototype.createClientEventType=function(e){return this.CLIENT_EVENT_TYPE_FORMAT+e},t.prototype.createClientEventTypeByPositionEnum=function(e,t){return this.CLIENT_EVENT_TYPE_FORMAT+e+this.CLIENT_EVENT_POSITION_TYPE_FORMAT+t},t.prototype.createAndSendEvent=function(e,t){void 0===t&&(t=null);var n=new ClientEvent(this.createClientEventType(e),t);this.dispatchEvent(n)},t.prototype.createAndSendEventByPositionEnum=function(e,t,n){void 0===n&&(n=null);var r=new ClientEvent(this.createClientEventTypeByPositionEnum(e,t),n);this.dispatchEvent(r)},t.prototype.createAndSendEventByPlayerSeat=function(e,t,n){void 0===n&&(n=null);var r=BLLComman.getUserSeat(t),a=new ClientEvent(this.createClientEventTypeByPositionEnum(e,r),n);this.dispatchEvent(a)},Object.defineProperty(t,"ins",{get:function(){return null==this._ins&&(this._ins=new t),this._ins},set:function(e){this._ins=e},enumerable:!0,configurable:!0}),t}(eui.Group);__reflect(ClientEventManager.prototype,"ClientEventManager");var ClientEvent=function(e){function t(t,n,r,a){void 0===n&&(n=null),void 0===r&&(r=!1),void 0===a&&(a=!1);var o=e.call(this,t,r,a)||this;return o.msg=n,o}return __extends(t,e),t}(egret.Event);__reflect(ClientEvent.prototype,"ClientEvent");var DebugLogManager=function(){function e(){}return e.prototype.log=function(e,t){},e}();__reflect(DebugLogManager.prototype,"DebugLogManager");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,n){function r(r){t.call(n,r,e)}if(RES.hasRes(e)){var a=RES.getRes(e);a?r(a):RES.getResAsync(e,r,this)}else RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var SPlayerDisMissRoomTypeEnum;!function(e){e[e.UN_KNOWN=0]="UN_KNOWN",e[e.AGREE=1]="AGREE",e[e.REFUSE=2]="REFUSE"}(SPlayerDisMissRoomTypeEnum||(SPlayerDisMissRoomTypeEnum={}));var LocalStorageManager=function(){function e(){}return e.save=function(e,t){egret.localStorage.setItem(e,t)},e.load=function(e){var t=egret.localStorage.getItem(e);return t},e}();__reflect(LocalStorageManager.prototype,"LocalStorageManager");var SocketManager=function(e){function t(){var t=e.call(this)||this;return t.connectCount=0,t.config=new ServerConfigUtil,t.config=CWTFrameWork.ResourceManager.getJson(ServerConfigUtil),t.addEventListener(egret.Event.CONNECT,t.connectCompleteHandler,t),t.addEventListener(egret.ProgressEvent.SOCKET_DATA,t.recieveData,t),t.addEventListener(egret.Event.CLOSE,t.closeHandler,t),t.addEventListener(egret.IOErrorEvent.IO_ERROR,t.ioErrorHandler,t),t}return __extends(t,e),t.prototype.onClientConnect=function(){this.connect(this.config.serverIP,this.config.serverPort)},t.prototype.connectCompleteHandler=function(e){console.log("成功链接服务器")},t.prototype.sendData=function(e){BLLComman.hallManager.send_data(e)},t.prototype.recieveData=function(e){console.log(e);var t=e;if(e.forLobby)switch(console.log("ready"==e.cmd),e.cmd){case"ready":ClientEventManager.ins.createAndSendEvent(ClientEventEnum.HALL_READY);break;case"offline":ClientEventManager.ins.createAndSendEvent(ClientEventEnum.OWN_OFFLINE)}else(new DeSerializeData).recieveData(JSON.stringify(e)),BLLLogic.ins.recieveData(t)},t.prototype.closeHandler=function(e){console.log("与服务器的链接已关闭"),this.onClientConnect()},t.prototype.ioErrorHandler=function(e){console.log("与服务器的链接已关闭")},t.prototype.dispose=function(){this.removeEventListener(egret.Event.CONNECT,this.connectCompleteHandler,this),this.removeEventListener(egret.ProgressEvent.SOCKET_DATA,this.recieveData,this),this.removeEventListener(egret.Event.CLOSE,this.closeHandler,this),this.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.ioErrorHandler,this)},t.prototype.addClientEventListener=function(e,t,n,r,a){this.addEventListener(e,t,n)},t.prototype.removeClientEventListener=function(e,t,n,r,a){this.removeEventListener(e,t,n)},t}(egret.WebSocket);__reflect(SocketManager.prototype,"SocketManager");var WXSocketManager=function(e){function t(){var t=e.call(this)||this;return t.config=new ServerConfigUtil,t.config=CWTFrameWork.ResourceManager.getJson(ServerConfigUtil),t.onClientConnect(),WXCallBackManager.ins.onSocketOpen(),WXCallBackManager.ins.onSocketMessage(),WXCallBackManager.ins.onSocketClose(),t}return __extends(t,e),t.prototype.onClientConnect=function(){WXCallBackManager.ins.connectSocket(this.config.wssUrl)},t.prototype.sendData=function(e){WXCallBackManager.ins.sendSocketMessage(e)},t.prototype.recieveData=function(e){},t.prototype.addClientEventListener=function(e,t,n,r,a){this.addEventListener(e,t,n)},t.prototype.removeClientEventListener=function(e,t,n,r,a){this.removeEventListener(e,t,n)},t}(egret.WebSocket);__reflect(WXSocketManager.prototype,"WXSocketManager");var SoundManager=function(){function e(){this.currentMusicName="",this.effectVolume=1,this.musicVolume=1,this.startPlayMusicSoundTweenTime=1e3,this.stopPlayMusicSoundTweenTime=1e3;var t=StorageManager.ins.load(e.SOUND_SETUP_UTIL_STO_NAME);return null==t?void(this.soundSetUpUtil=new SoundSetUpUtil):void(this.soundSetUpUtil=JSON.parse(t))}return Object.defineProperty(e.prototype,"musicSoundEnabled",{set:function(e){return this.soundSetUpUtil.musicSoundEnabled=e,e?void this.switchMusicSoundEnabled(this.musicSoundChannel,1,this.startPlayMusicSoundTweenTime):e?void 0:void this.switchMusicSoundEnabled(this.musicSoundChannel,0,this.stopPlayMusicSoundTweenTime)
},enumerable:!0,configurable:!0}),e.prototype.switchMusicSoundEnabled=function(e,t,n){null!=e&&egret.Tween.get(e,{loop:!1}).to({volume:t},n)},e.prototype.playEffectSound=function(t,n){if(void 0===n&&(n=this.effectVolume),this.soundSetUpUtil.effectSoundEnabled){var r=RES.getRes(t+e.MP3_FORMAT);if(null!=r){var a=r.play(0,1);a.volume=n}}},e.prototype.playMusicSound=function(t){var n=t+e.MP3_FORMAT;if(n!=this.currentMusicName){var r=RES.getRes(n);if(null!=r){this.currentMusicName=n;var a=r.play(0,-1);this.musicSoundChannel=a,this.musicSoundChannel.volume=0,this.soundSetUpUtil.musicSoundEnabled&&this.switchMusicSoundEnabled(this.musicSoundChannel,1,this.startPlayMusicSoundTweenTime)}}},Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},set:function(e){this._ins=e},enumerable:!0,configurable:!0}),e.MP3_FORMAT="_mp3",e.CLICK_EFFECT_SOUND="click",e.MUSIC_ONE_SOUND="bg",e.SOUND_SETUP_UTIL_STO_NAME="SOUND_SETUP_UTIL_NAME",e}();__reflect(SoundManager.prototype,"SoundManager");var StorageManager=function(){function e(){}return e.prototype.load=function(e){return localStorage.getItem(e)},e.prototype.save=function(e,t){localStorage.setItem(e,t)},Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},set:function(e){this._ins=e},enumerable:!0,configurable:!0}),e}();__reflect(StorageManager.prototype,"StorageManager");var VersionControllerManager=function(){function e(e,t){void 0===t&&(t="?v=")}return e.initialize=function(e,t){void 0===t&&(t="?v="),RES.BinAnalyzer.prototype.loadFile=function(n,r,a){if(this.fileDic[n.name])return void r.call(a,n);var o=this.getRequest();this.resItemDic[o.hashCode]={item:n,func:r,thisObject:a},o.open(RES.$getVirtualUrl(n.url+t+e)),o.send()},RES.ImageAnalyzer.prototype.loadFile=function(n,r,a){if(this.fileDic[n.name])return void r.call(a,n);var o=this.getLoader();this.resItemDic[o.$hashCode]={item:n,func:r,thisObject:a},o.load(RES.$getVirtualUrl(n.url+t+e))},RES.SoundAnalyzer.prototype.loadFile=function(n,r,a){if(this.soundDic[n.name])return void r.call(a,n);var o=new egret.Sound;o.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),o.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this),this.resItemDic[o.$hashCode]={item:n,func:r,thisObject:a},o.load(RES.$getVirtualUrl(n.url+t+e)),n.data&&(o.type=n.data.soundType)},RES.SheetAnalyzer.prototype.onLoadFinish=function(n){var r=n.target,a=this.resItemDic[r.$hashCode];delete this.resItemDic[r.hashCode];var o=a.item,i=a.func;if(o.loaded=n.type==egret.Event.COMPLETE,o.loaded)if(r instanceof egret.HttpRequest){o.loaded=!1;var s=this.analyzeConfig(o,r.response);if(s)return this.loadImage(s+t+e,a),void this.recycler.push(r)}else{var l=new egret.Texture;l._setBitmapData(r.data),this.analyzeBitmap(o,l)}r instanceof egret.HttpRequest?this.recycler.push(r):this.recyclerIamge.push(r),i.call(a.thisObject,o)}},e}();__reflect(VersionControllerManager.prototype,"VersionControllerManager");var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(e,t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.login=function(e,t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.connectSocket=function(e,t,n,r,a,o,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.vibrateLong=function(e,t,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.onSocketOpen=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.sendSocketMessage=function(e,t,n,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.onSocketMessage=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.onSocketClose=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.closeSocket=function(e,t,n,r,a){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.request=function(e,t,n,r,a,o,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var WXCallBackManager=function(){function e(){}return e.prototype.recieveCallBackHandler=function(e){},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,platform.login(this.login_success_handler,this.login_faild_handler)];case 1:return e=t.sent(),[2]}})})},e.prototype.login_success_handler=function(e){},e.prototype.login_faild_handler=function(e){},e.prototype.login_complete_andler=function(e){},e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,platform.getUserInfo(this.getUserInfo_success_handler,this.getUserInfo_faild_handler,this.getUserInfo_complete_andler)];case 1:return e=t.sent(),[2]}})})},e.prototype.getUserInfo_success_handler=function(e){},e.prototype.getUserInfo_faild_handler=function(e){},e.prototype.getUserInfo_complete_andler=function(e){},e.prototype.connectSocket=function(e,t,n,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(a){switch(a.label){case 0:return[4,platform.connectSocket(e,t,n,r,this.connectSocket_success_handler,this.connectSocket_faild_handler,this.connectSocket_complete_andler)];case 1:return a.sent(),[2]}})})},e.prototype.connectSocket_success_handler=function(e){},e.prototype.connectSocket_faild_handler=function(e){},e.prototype.connectSocket_complete_andler=function(e){},e.prototype.onSocketOpen=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,platform.onSocketOpen(this.onSocketOpen_handler)];case 1:return e.sent(),[2]}})})},e.prototype.onSocketOpen_handler=function(){console.log("链接成功")},e.prototype.sendSocketMessage=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return console.log("send data :"),e=JSON.stringify(e),[4,platform.sendSocketMessage(e,this.sendSocketMessage_success_handler,this.sendSocketMessage_faild_handler,this.sendSocketMessage_complete_andler)];case 1:return t.sent(),[2]}})})},e.prototype.sendSocketMessage_success_handler=function(e){console.log(e)},e.prototype.sendSocketMessage_faild_handler=function(e){console.log(e)},e.prototype.sendSocketMessage_complete_andler=function(e){console.log(e)},e.prototype.onSocketMessage=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,platform.onSocketMessage(this.onSocketMessage_handler)];case 1:return e.sent(),[2]}})})},e.prototype.onSocketMessage_handler=function(e){},e.prototype.onSocketClose=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,platform.onSocketClose(this.onSocketClose_handler)];case 1:return e.sent(),[2]}})})},e.prototype.onSocketClose_handler=function(e){console.log(e)},e.prototype.closeSocket=function(e,t){return void 0===e&&(e="正常关闭"),void 0===t&&(t=1e3),__awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return[4,platform.closeSocket(e,t,this.closeSocket_success_handler,this.closeSocket_faild_handler,this.closeSocket_complete_andler)];case 1:return n.sent(),[2]}})})},e.prototype.closeSocket_success_handler=function(e){console.log(e)},e.prototype.closeSocket_faild_handler=function(e){console.log(e)},e.prototype.closeSocket_complete_andler=function(e){console.log(e)},e.prototype.request=function(e,t,n,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(a){switch(a.label){case 0:return[4,platform.request(e,t,n,r,this.request_success_handler,this.request_faild_handler,this.request_complete_andler)];case 1:return a.sent(),[2]}})})},e.prototype.request_success_handler=function(e){console.log(e)},e.prototype.request_faild_handler=function(e){console.log(e)},e.prototype.request_complete_andler=function(e){console.log(e)},Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},set:function(e){this._ins=e},enumerable:!0,configurable:!0}),e}();__reflect(WXCallBackManager.prototype,"WXCallBackManager");var MaskBox=function(e){function t(t,n,r,a){void 0===n&&(n=!0),void 0===r&&(r=1),void 0===a&&(a=!0);var o=e.call(this,t,n,r,a)||this;return o.layerAnimationTatics=new CWTFrameWork.LayerScaleAnimationTatics,o}return __extends(t,e),t}(MaskBoxLayerBase);__reflect(MaskBox.prototype,"MaskBox");var CMDUtil=function(){function e(e){this.animationList=new Array,this.animation2List=new Array,this.cmdEnum=e}return e}();__reflect(CMDUtil.prototype,"CMDUtil");var ServerConfigUtil=function(){function e(){}return e}();__reflect(ServerConfigUtil.prototype,"ServerConfigUtil");var SoundSetUpUtil=function(){function e(){this.musicSoundEnabled=!0,this.effectSoundEnabled=!0}return e}();__reflect(SoundSetUpUtil.prototype,"SoundSetUpUtil");var WXCallBackUtil=function(){function e(){}return e}();__reflect(WXCallBackUtil.prototype,"WXCallBackUtil");var WXPlayerUtil=function(){function e(){}return e}();__reflect(WXPlayerUtil.prototype,"WXPlayerUtil");var DeSerializeData=function(){function e(){}return e.prototype.recieveData=function(e){console.log("DeSerializeData",e);var t=JSON.parse(e),n=null,r=null;switch(t.cmd){case CMDEnum.LOGIN_SUCCESS:n=this.on_loginSuccess_deSerialize(t);break;case CMDEnum.CREATE_ROOM:n=this.on_createRoom_deSerialize(t);break;case CMDEnum.JOIN_ROOM:n=this.on_joinRoom_deSerialize(t);break;case CMDEnum.JOIN_ROOM_BROADCAST:n=this.on_joinRoom_broadCast_deSerialize(t);break;case CMDEnum.SIT_DOWN:n=this.on_sitDown_deSerialize(t);break;case CMDEnum.SIT_DOWN_BROADCAST:n=this.on_sidDown_broadCast_deSerialize(t);break;case CMDEnum.READY:n=this.on_ready_deSerialize(t);break;case CMDEnum.READY_BROADCAST:n=this.on_ready_deSerialize(t);break;case CMDEnum.CHAT:n=this.on_chatBroadCast_deSerialize(t);break;case CMDEnum.PLAY_CARD:n=this.on_playCard_deSerialize(t);break;case CMDEnum.PLAY_TS:r=this.on_playTs_deSerialize(t),ClientEventManager.ins.createAndSendEvent(ClientEventEnum.PLAY_TS,r);break;case CMDEnum.PLAY_CARD_COMPLETE_BROADCAST:n=this.on_playCardComplete_broadCast_deSerialize(t);break;case CMDEnum.SCORE:n=this.on_smallScore_tranmission(t);break;case CMDEnum.BACK_HOME:n=this.backHome_tranmission(t);break;case CMDEnum.DISMISS_ROOM:n=this.disMissRoom_tranmission(t);break;case CMDEnum.OFF_LINE_BROADCAST:n=this.offLineBroadCast_tranmission(t);break;case CMDEnum.BACK_HOME_BROADCAST:n=this.backHomeBroadCast_tranmission(t);break;case CMDEnum.DISMISS_ROOM_BORADCARD:n=this.on_disMissRoomBroadCard(t);break;case CMDEnum.OTHER_PLAYER_OPERATE_DISMISSROOM:n=this.on_other_player_dismmision(t);break;case CMDEnum.DISMISS_ROOM_RESULT:n=this.onDisMissRoomResult(t);break;case CMDEnum.BIG_SCORE:n=this.on_total_score_deSerialize_data(t);break;case CMDEnum.DAO_LUN:this.on_DaoLun_deSerialize_data(t);break;case CMDEnum.OWN_CHANGE:n=this.on_ownerChange_deSerialize_data(t)}null!=n&&null!=n.cmdEnum&&BLLLogic.ins.recieveData(n)},e.prototype.create_cmdUtil=function(e){var t=new CMDUtil;return t.cmdEnum=e.cmd,t},e.prototype.on_ownerChange_deSerialize_data=function(e){var t=this.create_cmdUtil(e);return t.currentOwnerID=e.startRoleId,t},e.prototype.on_DaoLun_deSerialize_data=function(e){throw new Error("倒轮")},e.prototype.on_total_score_deSerialize_data=function(e){var t=this.create_cmdUtil(e);t.cmdEnum=e.cmd,t.bigScoreUtilList=new Array;for(var n=0;n<e.list.length;n++){var r=new SSingleBigScoreUtil;r.headerImageUrl=e.list[n].headImgUrl,r.nickName=e.list[n].nickname,r.totalScore=e.list[n].score,t.bigScoreUtilList.push(r)}return t},e.prototype.on_disMissRoomBroadCard=function(e){var t=new CMDUtil;t.cmdEnum=CMDEnum.DISMISS_ROOM,t.systemID=e.roleId,t.seat=e.seat,BLLComman.gameDataController.disMissRoomCurrentTimeCount=e.dissovleLeftTime,t.disMissRoomTypeEnum=SDisMissRoomTypeEnum.OTHER_PLAYER_DISMISS_ROOM;var n=Comman.objectListToMapList(e.dissolveMap);return n.forEach(function(e,t){var n=BLLComman.gameDataController.getSeatDataUtilBySeat(parseInt(t)).playerUtil.systemID;BLLComman.gameDataController.disMissRoomOperateTypeList.set(n,1==e?SDisMissRoomTypeEnum.OTHER_PLAYER_AGREE_DISMISS_ROOM:SDisMissRoomTypeEnum.OTHER_PLAYER_REFUSE_DISMISS_ROOM)}),t},e.prototype.on_other_player_dismmision=function(e){var t=new CMDUtil;return t.cmdEnum=CMDEnum.DISMISS_ROOM,t.systemID=e.roleId,t.seat=e.seat,t.disMissRoomTypeEnum=1==e.agree?SDisMissRoomTypeEnum.OTHER_PLAYER_AGREE_DISMISS_ROOM:SDisMissRoomTypeEnum.OTHER_PLAYER_REFUSE_DISMISS_ROOM,t},e.prototype.onDisMissRoomResult=function(e){var t=new CMDUtil;return t.cmdEnum=CMDEnum.DISMISS_ROOM,t.disMissRoomTypeEnum=1==e.dissolve?SDisMissRoomTypeEnum.DISMISS_ROOM_SUCCESS:SDisMissRoomTypeEnum.DISMISS_ROOM_FAILD,t},e.prototype.on_createRoom_deSerialize=function(e){var t=new CMDUtil;return t.cmdEnum=e.cmd,t.roomID=e.roomId,t.errorCodeEnum=ErrorCodeEnum.CREATE_ROOM_SUCCESS,t},e.prototype.on_loginSuccess_deSerialize=function(e){var t=this.create_cmdUtil(e);return t.cmdEnum=CMDEnum.LOGIN,t.errorCodeEnum=ErrorCodeEnum.LOGIN_SUCCESS,t.systemID=e.player.roleId,t.roomID=0==e.player.roomId?null:e.player.roomId,t},e.prototype.on_joinRoom_deSerialize=function(e){var t=this.create_cmdUtil(e);t.errorCodeEnum=ErrorCodeEnum.JOIN_ROOM_SUCCESS;var n=this.create_room_deSerialize(e.room);t.roomUtil=n;var r=e.hand;if(console.log(" autoPutLeftTime: "+e.autoPutLeftTime),e.autoPutLeftTime&&(BLLComman.gameDataController.currentTimeCount=Math.round(e.autoPutLeftTime/1e3)),e.dissovleLeftTime&&(BLLComman.gameDataController.disMissRoomCurrentTimeCount=1e3*Math.round(e.dissovleLeftTime/1e3)),null!=r&&0!=r.length){for(var a=new Array,o=0;o<r.length;o++){var i=this.create_card_deSerialize(r[o]);a.push(i)}t.playCardList=a}if(BLLComman.gameDataController.roomUtil.seatPlayerList=t.roomUtil.seatPlayerList,null!=e.room.dissolveMap&&Object.keys(e.room.dissolveMap).length>0){var s=Comman.objectListToMapList(e.room.dissolveMap);s.forEach(function(e,t){var n=BLLComman.gameDataController.getSeatDataUtilBySeat(parseInt(t)).playerUtil.systemID;BLLComman.gameDataController.disMissRoomOperateTypeList.set(n,1==e?SDisMissRoomTypeEnum.OTHER_PLAYER_AGREE_DISMISS_ROOM:SDisMissRoomTypeEnum.OTHER_PLAYER_REFUSE_DISMISS_ROOM)})}if(Object.keys(e.room.balanceMap).length>0){var l=Array(),c=!1;for(var u in e.room.balanceMap){var m={};m.headImgUrl=e.room.balanceMap[u].headImgUrl,m.nickname=e.room.balanceMap[u].nickname,m.roleId=e.room.balanceMap[u].roleId,m.compare=e.room.balanceMap[u].compareScore[0]+e.room.balanceMap[u].compareScore[1]+e.room.balanceMap[u].compareScore[2],m.wanted=e.room.balanceMap[u].shotScore,m.redwave=e.room.balanceMap[u].allKillScore,m.score=e.room.balanceMap[u].winScore,m.totalScore=e.room.balanceMap[u].score,e.room.balanceMap[u].round!=e.room.round&&(c=!0),l.push(m)}if(e.droppedScore=l,null!=e.droppedScore&&e.droppedScore.length>0){for(var d=new SScoreBoxUtil,h=e.droppedScore,p=0;p<h.length;p++){var C=new SSingleScoreUtil;C.nickName=h[p].nickname,C.headerImageUrl=h[p].headImgUrl,C.compareNumbers=h[p].compare,C.gunsNumbers=h[p].wanted,C.redWaveNumbers=h[p].redwave,C.scoreNumbers=h[p].score,C.totalScoreNumbers=h[p].totalScore,C.systemID=h[p].roleId,1==h[p].win&&(C.winTypeEnum=SWinTypeEnum.WIN),0==h[p].win&&(C.winTypeEnum=SWinTypeEnum.LOSE),d.isLastRound=h[p].isover,d.playerScoreList.set(p.toString(),C)}t.scoreBoxUtil=d,c&&(t.scoreBoxUtil=null)}}return t},e.prototype.on_sitDown_deSerialize=function(e){var t=this.create_cmdUtil(e);return t.systemID=e.roleId,t.seat=e.seat,null!=e.sitDown?(1==e.sitDown?t.errorCodeEnum=ErrorCodeEnum.SIT_DOWN_SUCCESS:0==e.sitDown&&(t.errorCodeEnum=ErrorCodeEnum.STAND_UP_SUCCESS),t):void 0},e.prototype.on_sidDown_broadCast_deSerialize=function(e){var t=this.create_cmdUtil(e);return t.systemID=e.roleId,t.seat=e.seat,null!=e.sitDown?(1==e.sitDown?t.errorCodeEnum=ErrorCodeEnum.SIT_DOWN_SUCCESS:0==e.sitDown&&(t.errorCodeEnum=ErrorCodeEnum.STAND_UP_SUCCESS),t):void 0},e.prototype.on_joinRoom_broadCast_deSerialize=function(e){var t=this.create_cmdUtil(e);t.errorCodeEnum=ErrorCodeEnum.OTHER_PLAYER_JOINROOM_SUCCESS;var n=this.create_seatData_deSerialize(e.seatInfo);return t.seatDataUtil=n,t.systemID=n.playerUtil.systemID,t},e.prototype.on_ready_deSerialize=function(e){var t=this.create_cmdUtil(e);return t.systemID=BLLComman.gameDataController.playerUtil.systemID,t.readyStatusEnum=1==e.ready?SReadyStatusEnum.READY:SReadyStatusEnum.NOT_READY,e.roleId==BLLComman.gameDataController.playerUtil.systemID?t.cmdEnum=CMDEnum.READY:t.cmdEnum=CMDEnum.READY_BROADCAST,t.errorCodeEnum=ErrorCodeEnum.READY_SUCCESS,t.seat=e.seat,t.systemID=e.roleId,t},e.prototype.on_chatBroadCast_deSerialize=function(e){var t=this.create_cmdUtil(e);if(null!=e.seat)return t.cmdEnum=CMDEnum.CHAT_BORADCAST,t.chatUtil=e.chatUtil,t.seat=e.seat,t},e.prototype.offLineBroadCast_tranmission=function(e){var t=this.create_cmdUtil(e);return t.seat=e.seat,t.playerNetStatusEnum=1==e.offLine?SPlayerNetStatusEnum.OFF_LINE:SPlayerNetStatusEnum.ON_LINE,t},e.prototype.backHomeBroadCast_tranmission=function(e){var t=this.create_cmdUtil(e);return t.seat=e.seat,t.systemID=e.roleId,t},e.prototype.on_playCardComplete_broadCast_deSerialize=function(e){var t=this.create_cmdUtil(e);return t.systemID=e.roleId,t.seat=e.seat,t},e.prototype.on_playTs_deSerialize=function(e){for(var t={cmdEnum:e.cmd,list:[]},n=e.cheatList,r=0;r<n.length;r++){for(var a=new Array,o=0;o<n[r].handCard.length;o++){var i=this.create_card_deSerialize(n[r].handCard[o]);a.push(i)}n[r].playCardList=a}return t.list=n,t},e.prototype.on_playCard_deSerialize=function(e){var t=this.create_cmdUtil(e),n=e.hand;if(console.log(" autoPutLeftTime: "+e.autoPutLeftTime),BLLComman.gameDataController.currentTimeCount=Math.round(e.autoPutLeftTime/1e3),console.log(" BLLComman.gameDataController.currentTimeCount :"+BLLComman.gameDataController.currentTimeCount),null!=n&&0!=n.length){for(var r=new Array,a=0;a<n.length;a++){var o=this.create_card_deSerialize(n[a]);r.push(o)}t.playCardList=r}return t.currentRoundNumbers=e.round,t},e.prototype.on_smallScore_tranmission=function(e){var t=new CMDUtil;t.cmdEnum=CMDEnum.SCORE;var n=e.balance,r=Comman.objectListToMapList(n),a=new Map,o="-1";r.forEach(function(e,t){"-1"==o&&(o=t)});var i=r.get(o).sort;e.showCard={},e.showCard.before=new Array;for(var s=i[0].length-1;s>=0;s--){var l=r.get(i[0][s].toString()).daoDeck[0],c=r.get(i[0][s].toString()).specialType,u={};u.cardtype=0==c?l.type:c,u.card=l.member,u.seat=i[0][s],u.score=r.get(i[0][s].toString()).compareScore[0],e.showCard.before.push(u)}e.showCard.center=new Array;for(var s=i[1].length-1;s>=0;s--){var l=r.get(i[1][s].toString()).daoDeck[1],c=r.get(i[1][s].toString()).specialType,u={};u.cardtype=0==c?l.type:c,u.card=l.member,u.seat=i[1][s],u.score=r.get(i[1][s].toString()).compareScore[1],e.showCard.center.push(u)}e.showCard.after=new Array;for(var s=i[2].length-1;s>=0;s--){var l=r.get(i[2][s].toString()).daoDeck[2],c=r.get(i[2][s].toString()).specialType,u={};u.cardtype=0==c?l.type:c,u.card=l.member,u.seat=i[2][s],u.score=r.get(i[2][s].toString()).compareScore[2],e.showCard.after.push(u)}t.showCardList=new Array,a.set("before",this.createShowCardUtilList(e.showCard.before,0)),a.set("center",this.createShowCardUtilList(e.showCard.center,1)),a.set("after",this.createShowCardUtilList(e.showCard.after,2)),a.forEach(function(e,n){e.forEach(function(e,n){t.showCardList.push(e)})});var m=new Array;for(var s in n)1==n[s].allKill;var d=0;for(var h in e.balance){var p=new Map,C=new Array;1==e.balance[h].allKill&&m.push(new AnimationDataUtil(AnimationTypeEnum.HONG_BO_LANG));for(var s=0;s<e.balance[h].shotList.length;s++)C.push(new egret.Point(parseInt(h),e.balance[h].shotList[s]));p.set(d,C),m.push(new AnimationDataUtil(AnimationTypeEnum.GUNS,p)),d++}t.animation2List=m;var _=Array(),y=new SScoreBoxUtil;for(var h in e.balance){var g={};g.headImgUrl=e.balance[h].headImgUrl,g.nickname=e.balance[h].nickname,g.roleId=e.balance[h].roleId,g.compare=e.balance[h].compareScore[0]+e.balance[h].compareScore[1]+e.balance[h].compareScore[2],g.wanted=e.balance[h].shotScore,g.redwave=e.balance[h].allKillScore,g.score=e.balance[h].winScore,g.totalScore=e.balance[h].score,_.push(g)}for(var s=0;s<_.length;s++){var S=new SSingleScoreUtil;S.nickName=_[s].nickname,S.headerImageUrl=_[s].headImgUrl,S.compareNumbers=_[s].compare,S.gunsNumbers=_[s].wanted,S.redWaveNumbers=_[s].redwave,S.scoreNumbers=_[s].score,S.totalScoreNumbers=_[s].totalScore,S.systemID=_[s].roleId,1==_[s].win&&(S.winTypeEnum=SWinTypeEnum.WIN),0==_[s].win&&(S.winTypeEnum=SWinTypeEnum.LOSE),y.isLastRound=_[s].isover,y.playerScoreList.set(s.toString(),S)}if(t.scoreBoxUtil=y,null!=e.total){var E=new Array;y.isLastRound=!0;for(var s=0;s<e.total.length;s++){var T=new SSingleBigScoreUtil;T.headerImageUrl=e.total[s].headImgUrl,T.nickName=e.total[s].nickname,T.totalScore=e.total[s].totalScore,1==e.total[s].win&&(T.winTypeEnum=SWinTypeEnum.WIN),0==e.total[s].win&&(T.winTypeEnum=SWinTypeEnum.LOSE),E.push(T)}}var f=new Map;t.animationList=[new AnimationDataUtil(AnimationTypeEnum.GAME_START)];for(var s=0;s<t.showCardList.length;){var L=t.showCardList[s];if(L.cardTypeEnum>1e6){var v=f.get(L.seat);null==v&&(v=new ShowCardUtil),v.cardUtilList=v.cardUtilList.concat(L.cardUtilList),v.seat=L.seat,v.cardTypeEnum=L.cardTypeEnum,f.set(L.seat,v),t.showCardList.splice(s,1),s=0}else s++}return f.forEach(function(e,n){var r=new AnimationDataUtil(AnimationTypeEnum.SPECIAL_CARDTYPE);r.specialCardUtilList=e.cardUtilList,r.specialCardTypeEnum=e.cardTypeEnum,r.seat=e.seat,t.animation2List.push(r)}),t},e.prototype.createShowCardUtilList=function(e,t){for(var n=new Map,r=0;r<e.length;r++){var a=new ShowCardUtil;a.cardTypeEnum=1e5*e[r].cardtype,a.scoreNumbers=e[r].score,a.yChildNumber=t,a.seat=e[r].seat,a.cardUtilList=this.createCardUtilList(e[r].card),n.set(e[r].seat.toString(),a)}return n},e.prototype.createCardUtilList=function(e){for(var t=new Array,n=0;n<e.length;n++){var r=new CardUtil;r.cardColor=e[n].type,r.cardValue=e[n].value,t.push(r)}return t},e.prototype.disMissRoom_tranmission=function(e){var t=this.create_cmdUtil(e);return t.cmdEnum=e.cmd,t.disMissRoomTypeEnum=e.type,t.seat=e.seat,t.systemID=e.roleId,t},e.prototype.create_score_deSerialize=function(e){for(var t=new SScoreBoxUtil,n=0;n<e.length;n++){var r=this.create_singleScore_deSerialize(e[n]);t.playerScoreList.set(r.systemID.toString(),r)}return t},e.prototype.create_singleScore_deSerialize=function(e){var t=new SSingleScoreUtil;return t.compareNumbers=e.compare,t.headerImageUrl=e.headImgUrl,t.nickName=e.nickname,t.gunsNumbers=e.wanted,t.scoreNumbers=e.score,t.totalScoreNumbers=e.totalScore,t.redWaveNumbers=e.redwave,t.systemID=e.roleId,t},e.prototype.create_showCard_deSerialize=function(e){for(var t=new Array,n=0;n<e.before.length;n++)t.push(this.create_showCardUtil_deSerialize(e.before[n],0));for(var n=0;n<e.center.length;n++)t.push(this.create_showCardUtil_deSerialize(e.center[n],1));for(var n=0;n<e.after.length;n++)t.push(this.create_showCardUtil_deSerialize(e.after[n],2));return t},e.prototype.backHome_tranmission=function(e){var t=this.create_cmdUtil(e);return t.cmdEnum=e.cmd,t.systemID=e.roleId,t},e.prototype.create_room_deSerialize=function(e){var t=new SRoomUtil;t.gameChargeEnum=1==e.aA?SGameChargeEnum.AA:SGameChargeEnum.HOST,t.gamePlayModeEnum=1==e.auto?SGamePlayModeEnum.AUTO:SGamePlayModeEnum.HAND,t.specialCardTypeEnum=1==e.roomType?SSpecialCardTypeEnum.HAS_SPECIAL:SSpecialCardTypeEnum.NO_SPECIAL,t.totalRoundNumbers=e.totalRound,t.currentRoundNumbers=e.round,t.currentOwnerID=e.startRoleId,t.roomID=e.roomId,t.roomStatusEnum=e.roomStatus;var n=Comman.objectListToMapList(e.seatMap),r=this;n.forEach(function(e,n){var a=r.create_seatData_deSerialize(e);t.seatPlayerList.set(a.playerUtil.systemID.toString(),a)});for(var a=0;a<e.watchList.length;a++){var o=this.create_seatData_deSerialize(e.watchList[a]);t.watchPlayerList.set(o.playerUtil.systemID.toString(),o)}return t},e.prototype.create_seatData_deSerialize=function(e){var t=new SSeatDataUtil,n=this.create_player_deSerialize(e.player);return t.playerUtil=n,t.netStatusEnum=1==e.offline?SPlayerNetStatusEnum.OFF_LINE:SPlayerNetStatusEnum.ON_LINE,t.putCardStatusEnum=1==e.putDone?SPutCardStatusEnum.PUT_CARD_COMPLETE:SPutCardStatusEnum.PUT_CARD,t.readyStatusEnum=1==e.ready?SReadyStatusEnum.READY:SReadyStatusEnum.NOT_READY,t.totalScoreNumbers=e.score,t.seat=e.seat,0==t.seat?t.seatTypeEnum=SSeatTypeEnum.WATCH:t.seat>0&&(t.seatTypeEnum=SSeatTypeEnum.SEAT),t},e.prototype.create_player_deSerialize=function(e){var t=new SPlayerUtil;return t.currency=e.gold,t.headerImageUrl=e.headImgUrl,t.locationIP=e.ip,t.nickName=e.nickname,t.roomID=e.roomId,t.genderEnum=e.sex,t.systemID=e.roleId,t.splitNickName=BLLComman.spliceNickName(t.nickName),t},e.prototype.create_showCardUtil_deSerialize=function(e,t){var n=new ShowCardUtil;n.cardTypeEnum=1e5*e.cardtype,n.scoreNumbers=e.score,n.seat=e.seat,n.yChildNumber=t;for(var r=0;r<e.card.length;r++)n.cardUtilList.push(this.create_card_deSerialize(e.card[r]));return n},e.prototype.create_card_deSerialize=function(e){var t=new CardUtil;return t.cardColor=e.type,t.cardValue=e.value,t},e.prototype.create_guns_seSerialize=function(e){var t=new Array,n=Comman.objectListToMapList(e.sankanplayersSeat),r=0;return n.forEach(function(e,n){var a=new Map,o=new Array;3==e.length&&t.push(new AnimationDataUtil(AnimationTypeEnum.HONG_BO_LANG));for(var i=0;i<e.length;i++)o.push(new egret.Point(parseInt(n),e[i]));0!=e.length&&(a.set(r,o),r++,t.push(new AnimationDataUtil(AnimationTypeEnum.GUNS,a)))}),t},Object.defineProperty(e,"ins",{get:function(){return null==this._ins&&(this._ins=new e),this._ins},set:function(e){this._ins=e},enumerable:!0,configurable:!0}),e}();__reflect(DeSerializeData.prototype,"DeSerializeData");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var CardTs=function(e){function t(){var t=e.call(this)||this;return t.selectAnimationTime=150,t.currentY=0,t.endX=0,t.endY=0,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.currentY=this.y},Object.defineProperty(t.prototype,"cardUtil",{get:function(){return this._cardUtil},set:function(e){if(this._cardUtil=e,null==e)return this.cardValueImage.source="",void(this.cardSmallColorImage.source="");var t=this.selectCardColor(e.cardColor);return this.cardSmallColorImage.source="cardColor_"+t+"_small_png",1==e.cardColor||3==e.cardColor?void(this.cardValueImage.source="card_hong_"+e.cardValue+"_png"):void((2==e.cardColor||4==e.cardColor)&&(this.cardValueImage.source="card_hei_"+e.cardValue+"_png"))},enumerable:!0,configurable:!0}),t.prototype.getCardUtil=function(){return this._cardUtil},t.prototype.selectCardColor=function(e){switch(e){case 1:return"fang";case 2:return"mei";case 3:return"hong";case 4:return"hei"}},t.SELECT_SPACE_Y=-30,t}(CWTFrameWork.CommponentsBase);__reflect(CardTs.prototype,"CardTs");var CardTsCommponents=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},Object.defineProperty(t.prototype,"dataList",{get:function(){return this._dataList},set:function(e){this._dataList=e;for(var t=0;t<e.length;t++){var n=BLLComman.getUserPositionEnum(e[t].seat);this.getChildByName("cardGroup"+n)}},enumerable:!0,configurable:!0}),t.prototype.getdDtaList=function(){return this._dataList},t}(CWTFrameWork.CommponentsBase);__reflect(CardTsCommponents.prototype,"CardTsCommponents");var ReadyImageCommponents=function(e){function t(){var t=e.call(this)||this;return t.positionEnumString="",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);var t=ClientEventManager.ins.createClientEventTypeByPositionEnum(ClientEventEnum.READY_CHANGE,parseInt(this.positionEnumString));this.eventListenerManager.addClientEventListener(ClientEventManager.ins,t,this.onReadyChangeHandler,this)},t.prototype.onReadyChangeHandler=function(e){var t=e.msg;this.changeReadyStatus(t)},t.prototype.changeReadyStatus=function(e){switch(e){case SReadyStatusEnum.NOT_READY:this.visible=!1;break;case SReadyStatusEnum.READY:this.visible=!0}},t}(CWTFrameWork.ImageCommponentsBase);__reflect(ReadyImageCommponents.prototype,"ReadyImageCommponents");var HistoryShareBoxGroupButton=function(e){function t(){return e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t),BLLComman.h5WXShareManager.share_history_to_friends(),Comman.stageBase.openLayerCommponents(new SShareBox(SShareTypeEnum.SHARE_HISTORY_RECORD_TO_FRIENDS))},t}(ButtonCommponents);__reflect(HistoryShareBoxGroupButton.prototype,"HistoryShareBoxGroupButton");var LoginButton=function(e){function t(){var t=e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this;return t.systemID="",t.signture="",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t),BLLComman.gameDataController.playerUtil.systemID=parseInt(this.systemID),LoginLogic.ins.send_login_data(parseInt(this.systemID),this.signture)},t}(ButtonCommponents);__reflect(LoginButton.prototype,"LoginButton");var NowBackHomeButton=function(e){function t(){return e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t)},t}(ButtonCommponents);__reflect(NowBackHomeButton.prototype,"NowBackHomeButton");var SAmmountBoxButton=function(e){function t(){return e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t),Comman.stageBase.openLayerCommponents(new STestMessageBox)},t}(ButtonCommponents);__reflect(SAmmountBoxButton.prototype,"SAmmountBoxButton");var SBackHomeButton=function(e){function t(){return e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t),Comman.stageBase.openLayerCommponents(new SNoticeBABox("你确定要退出游戏吗？"))},t}(ButtonCommponents);__reflect(SBackHomeButton.prototype,"SBackHomeButton");var SChatBoxButton=function(e){function t(){return e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t),Comman.stageBase.openLayerCommponents(new SChatBox)
},t}(ButtonCommponents);__reflect(SChatBoxButton.prototype,"SChatBoxButton");var SCreateRoomButton=function(e){function t(){return e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t),CreateRoomLogic.ins.send_createRoom_data()},t}(ButtonCommponents);__reflect(SCreateRoomButton.prototype,"SCreateRoomButton");var SDisMissRoomButton=function(e){function t(){return e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t),Comman.stageBase.openLayerCommponents(new SNoticeBBBox("你确定要解散房间吗？"))},t}(ButtonCommponents);__reflect(SDisMissRoomButton.prototype,"SDisMissRoomButton");var SHistoryBoxButton=function(e){function t(){return e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t),Comman.stageBase.openLayerCommponents(new SHistoryBox)},t}(ButtonCommponents);__reflect(SHistoryBoxButton.prototype,"SHistoryBoxButton");var SNowBackHomeButton=function(e){function t(){return e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t),BLLComman.hallManager.game_close_send()},t}(ButtonCommponents);__reflect(SNowBackHomeButton.prototype,"SNowBackHomeButton");var SOptionBoxButton=function(e){function t(){var t=e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this;return t.optionBoxIsOpend=!1,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.contentImage.width=this.contentImage.height=61;var t=ClientEventManager.ins.createClientEventType(ClientEventEnum.OPTIONBOX_CLOSE);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,t,this.onOptionBoxCloseHandler,this)},t.prototype.onTouchedHandler=function(t){return e.prototype.onTouchedHandler.call(this,t),this.optionBoxIsOpend?(Comman.stageBase.closeLayerCommponentsByName(egret.getQualifiedClassName(SOptionBox)),void(this.optionBoxIsOpend=!1)):this.optionBoxIsOpend?void 0:(Comman.stageBase.openLayerCommponents(new SOptionBox),void(this.optionBoxIsOpend=!0))},t.prototype.onOptionBoxCloseHandler=function(e){this.optionBoxIsOpend=!1},t}(ButtonCommponents);__reflect(SOptionBoxButton.prototype,"SOptionBoxButton");var SPlayCardButton=function(e){function t(){return e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t),ClientEventManager.ins.createAndSendEvent(ClientEventEnum.SEND_PLAY_CARD_MESSAGE)},t}(ButtonCommponents);__reflect(SPlayCardButton.prototype,"SPlayCardButton");var SPlayerInformation2Button=function(e){function t(){return e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.contentImage.width=this.contentImage.height=85,this.contentImage.mask=this.maskImage},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t)},t}(ButtonCommponents);__reflect(SPlayerInformation2Button.prototype,"SPlayerInformation2Button");var SPlayerInformationButton=function(e){function t(){return e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.contentImage.mask=this.maskImage},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t)},t.prototype.createMaskCircle=function(e,t,n){var r=new egret.Shape;return r.graphics.beginFill(0),r.graphics.drawCircle(t,n,e),r.graphics.endFill(),r},t}(ButtonCommponents);__reflect(SPlayerInformationButton.prototype,"SPlayerInformationButton");var SReadyButton=function(e){function t(){return e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.bitmapTextLabel.verticalCenter=-3,this.bitmapTextLabel.horizontalCenter=-1,this.bitmapTextLabel.letterSpacing=10;var t=ClientEventManager.ins.createClientEventTypeByPositionEnum(ClientEventEnum.READY_CHANGE,PositionEnum.BOTTOM);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,t,this.onReadyChangeHandler,this)},t.prototype.onReadyChangeHandler=function(e){var t=e.msg;this.changeReadyStatus(t)},t.prototype.changeReadyStatus=function(e){switch(e){case SReadyStatusEnum.NOT_READY:this.contentImageSource="readyButton_ready_image_png";break;case SReadyStatusEnum.READY:this.contentImageSource="readyButton_cancel_ready_image_png"}},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t),ReadyLogic.ins.send_ready_data()},t}(ButtonCommponents);__reflect(SReadyButton.prototype,"SReadyButton");var SRuleBoxButton=function(e){function t(){return e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t),Comman.stageBase.openLayerCommponents(new SRuleBox)},t}(ButtonCommponents);__reflect(SRuleBoxButton.prototype,"SRuleBoxButton");var SShareHistoryButton=function(e){function t(){return e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t),Comman.stageBase.openLayerCommponents(new SShareBox(SShareTypeEnum.SHARE_HISTORY_RECORD_TO_FRIENDS))},t}(ButtonCommponents);__reflect(SShareHistoryButton.prototype,"SShareHistoryButton");var SShareToFriendsButton=function(e){function t(){return e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t),Comman.stageBase.openLayerCommponents(new SShareBox(SShareTypeEnum.SHARE_TITLE_TO_FRIENDS))},t}(ButtonCommponents);__reflect(SShareToFriendsButton.prototype,"SShareToFriendsButton");var SShareTopGameButton=function(e){function t(){return e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t),Comman.stageBase.openLayerCommponents(new SShareBox(SShareTypeEnum.TOP_GAMES))},t}(ButtonCommponents);__reflect(SShareTopGameButton.prototype,"SShareTopGameButton");var SSitDownButton=function(e){function t(){var t=e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this;return t._positionEnumString="",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},Object.defineProperty(t.prototype,"positionEnumString",{get:function(){return this._positionEnumString},set:function(e){this._positionEnumString=e},enumerable:!0,configurable:!0}),t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t);var n=BLLComman.gameDataController.roomUtil,r=BLLComman.getUserSeat(parseInt(this.positionEnumString));if(console.log(n.roomStatusEnum),n.roomStatusEnum==SRoomStatusEnum.SHOW_CARD){var a=new NoticeTextUtil(SNoticeTextTypeEnum.TEXT_K_STATE);return ClientEventManager.ins.createAndSendEvent(ClientEventEnum.NOTICE_TEXT,a),void(BLLComman.gameDataController.sendSeat=r)}if(n.roomStatusEnum==SRoomStatusEnum.START_DEAL_CARD){var a=new NoticeTextUtil(SNoticeTextTypeEnum.TEXT_J_STATE);return ClientEventManager.ins.createAndSendEvent(ClientEventEnum.NOTICE_TEXT,a),void(BLLComman.gameDataController.sendSeat=r)}SitDownLogic.ins.send_sitDown_data(r)},t}(ButtonCommponents);__reflect(SSitDownButton.prototype,"SSitDownButton");var SSoundSetUpBoxButton=function(e){function t(){return e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t),Comman.stageBase.openLayerCommponents(new SSoundSetUpBox)},t}(ButtonCommponents);__reflect(SSoundSetUpBoxButton.prototype,"SSoundSetUpBoxButton");var SStandUpButton=function(e){function t(){var t=e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this;return t.positionEnumString="",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.bitmapTextLabel.verticalCenter=-3,this.bitmapTextLabel.horizontalCenter=-1,this.bitmapTextLabel.letterSpacing=10},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t),SitDownLogic.ins.send_sitDown_data(0)},t}(ButtonCommponents);__reflect(SStandUpButton.prototype,"SStandUpButton");var StartGameButton=function(e){function t(){var t=e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this;return t.systemID="",t.signture="",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t);var n=new CMDUtil(CMDEnum.START_GAME);BLLLogic.ins.sendData(n)},t}(ButtonCommponents);__reflect(StartGameButton.prototype,"StartGameButton");var SWatchPlayerBoxButton=function(e){function t(){return e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t),BLLComman.watchPlayerBoxOpend?Comman.stageBase.closeLayerCommponentsByName(egret.getQualifiedClassName(WatchPlayerBox)):Comman.stageBase.openLayerCommponents(new WatchPlayerBox)},t}(ButtonCommponents);__reflect(SWatchPlayerBoxButton.prototype,"SWatchPlayerBoxButton");var BottomBackCard=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.setAnchorOffset=function(){this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2,this.x+=this.anchorOffsetX,this.y+=this.anchorOffsetY},t}(CWTFrameWork.CommponentsBase);__reflect(BottomBackCard.prototype,"BottomBackCard");var BottomCard=function(e){function t(){var t=e.call(this)||this;return t.selectAnimationTime=150,t.currentY=0,t.endX=0,t.endY=0,t._selected=!1,t._selected2=!1,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.currentY=this.y},Object.defineProperty(t.prototype,"cardUtil",{get:function(){return this._cardUtil},set:function(e){if(this._cardUtil=e,null==e)return this.cardBgImage.source="card_back_bg_png",this.cardColorImage.source="",this.cardValueImage.source="",void(this.cardSmallColorImage.source="");this.cardBgImage.source="card_bg_png";var t=this.selectCardColor(e.cardColor);return this.cardColorImage.source="cardColor_"+t+"_png",this.cardSmallColorImage.source="cardColor_"+t+"_small_png",1==e.cardColor||3==e.cardColor?void(this.cardValueImage.source="card_hong_"+e.cardValue+"_png"):void((2==e.cardColor||4==e.cardColor)&&(this.cardValueImage.source="card_hei_"+e.cardValue+"_png"))},enumerable:!0,configurable:!0}),t.prototype.getCardUtil=function(){return this._cardUtil},t.prototype.selectCardColor=function(e){switch(e){case 1:return"fang";case 2:return"mei";case 3:return"hong";case 4:return"hei"}},Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(e){return this._selected=e,e?void this.selectAnimation(this,this.currentY+t.SELECT_SPACE_Y,this.selectAnimationTime):e?void 0:void this.selectAnimation(this,this.currentY,this.selectAnimationTime)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selected2",{get:function(){return this._selected2},set:function(e){return this._selected2=e,e?void this.select2Animation(this,1,1,this.selectAnimationTime):e?void 0:void this.select2Animation(this,.8,.8,this.selectAnimationTime)},enumerable:!0,configurable:!0}),t.prototype.selectAnimation=function(e,t,n){egret.Tween.removeTweens(e),this.touchEnabled=!1,egret.Tween.get(e,{loop:!1}).to({y:t},n).call(this.tweenAnimationComplete,this,[this])},t.prototype.select2Animation=function(e,t,n,r){egret.Tween.removeTweens(e),this.touchEnabled=!1,egret.Tween.get(e,{loop:!1}).to({scaleX:t,scaleY:n},r).call(this.tweenAnimationComplete,this,[this])},t.prototype.tweenAnimationComplete=function(e){this.touchEnabled=!0},t.SELECT_SPACE_Y=-30,t}(CWTFrameWork.CommponentsBase);__reflect(BottomCard.prototype,"BottomCard");var CardTypeEnum;!function(e){e[e.WU_LONG=1e5]="WU_LONG",e[e.DUI_ZI=2e5]="DUI_ZI",e[e.LIANG_DUI=3e5]="LIANG_DUI",e[e.SAN_TIAO=4e5]="SAN_TIAO",e[e.SHUN_ZI=5e5]="SHUN_ZI",e[e.TONG_HUA=6e5]="TONG_HUA",e[e.HU_LU=7e5]="HU_LU",e[e.TIE_ZHI=8e5]="TIE_ZHI",e[e.TONG_HUA_SHUN=9e5]="TONG_HUA_SHUN",e[e.SAN_SHUN_ZI=21e5]="SAN_SHUN_ZI",e[e.SAN_TONG_HUA=22e5]="SAN_TONG_HUA",e[e.LIU_DUI_BAN=23e5]="LIU_DUI_BAN",e[e.WU_DUI_CHONG_SAN=24e5]="WU_DUI_CHONG_SAN",e[e.SI_TAO_CHONG_SAN=25e5]="SI_TAO_CHONG_SAN",e[e.COU_YI_SE=26e5]="COU_YI_SE",e[e.QUAN_XIAO=27e5]="QUAN_XIAO",e[e.QUAN_DA=28e5]="QUAN_DA",e[e.SAN_TAO_ZHA_DAN=29e5]="SAN_TAO_ZHA_DAN",e[e.SAN_TONG_HUA_SHUN=3e6]="SAN_TONG_HUA_SHUN",e[e.SHI_ER_HUANG_ZU=31e5]="SHI_ER_HUANG_ZU",e[e.YI_TIAO_LONG=32e5]="YI_TIAO_LONG",e[e.ZHI_ZUN_QING_LONG=33e5]="ZHI_ZUN_QING_LONG"}(CardTypeEnum||(CardTypeEnum={}));var CardUtil=function(){function e(){}return e}();__reflect(CardUtil.prototype,"CardUtil");var ShowCardUtil=function(){function e(){this.cardUtilList=new Array}return e}();__reflect(ShowCardUtil.prototype,"ShowCardUtil");var CardListCommponents=function(e){function t(){var t=e.call(this)||this;return t.isTouched=!1,t.positionEnum="",t.card_group_name_format="cardGroup",t._touched=!1,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);for(var t=0;t<this.numChildren;t++)for(var n=this.getChildByName(this.card_group_name_format+t),r=0;r<n.numChildren;r++){var a=n.getChildAt(r);a.cardUtil=null}},t.prototype.bottomCard_start_animation=function(e,t){egret.Tween.removeTweens(e);var n=e.rotation,r=e.y,a=35;0==t&&(a=60);var o=e.scaleX,i=e.scaleY;egret.Tween.get(e,{loop:!1}).to({y:a,rotation:0,scaleX:1,scaleY:1},150).wait(500).to({},0).call(this.bottomCard_center_animation,this,[e,r,n,o,i])},t.prototype.bottomCard_center_animation=function(e,t,n,r,a){egret.Tween.get(e,{loop:!1}).to({y:t,rotation:n,scaleX:r,scaleY:a},150)},t.prototype.onTouchedHandler=function(e){if(BLLComman.gameDataController.isInSeat()!=SSeatTypeEnum.WATCH){this.isTouched=!this.isTouched;var t=this;if(this.isTouched){if(null==BLLComman.gameDataController.sendCardTypeUtilList)return;BLLComman.gameDataController.sendCardTypeUtilList.forEach(function(e,n){"before"==n&&t.show_card_data2(e,0),"center"==n&&t.show_card_data2(e,1),"after"==n&&t.show_card_data2(e,2)})}this.isTouched||(this.show_card_data2([null,null,null],0),this.show_card_data2([null,null,null,null,null],1),this.show_card_data2([null,null,null,null,null],2))}},t.prototype.show_card_data=function(e,t){var n=this.getChildByName(this.card_group_name_format+t);this.setChildIndex(n,this.numChildren-1),egret.Tween.get(n,{loop:!1}).wait(200).to({scaleX:1,scaleY:1},200);for(var r=0;r<n.numChildren;r++){var a=n.getChildAt(r);a.cardUtil=e[r],this.bottomCard_start_animation(a,t)}},Object.defineProperty(t.prototype,"touched",{get:function(){return this._touched},set:function(e){this._touched=e,e&&this.eventListenerManager.addClientEventListener(this,egret.TouchEvent.TOUCH_TAP,this.onTouchedHandler,this)},enumerable:!0,configurable:!0}),t.prototype.show_card_data2=function(e,t){var n=this.getChildByName(this.card_group_name_format+t);this.setChildIndex(n,this.numChildren-1),egret.Tween.get(n,{loop:!1}).wait(200).to({scaleX:1,scaleY:1},200);for(var r=0;r<n.numChildren;r++){var a=n.getChildAt(r);a.cardUtil=e[r]}},t}(CWTFrameWork.CommponentsBase);__reflect(CardListCommponents.prototype,"CardListCommponents");var SFaceChatCommponents=function(e){function t(){var t=e.call(this)||this;return t.positionEnum="",t.faceChat_animation_ar_name="face",t.faceChat_ske_json_name="faceChat_ske_json",t.faceChat_tex_json_name="faceChat_tex_json",t.faceChat_tex_png_name="faceChat_tex_png",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);var t=parseInt(this.positionEnum),n=ClientEventManager.ins.createClientEventTypeByPositionEnum(ClientEventEnum.FACE_CHAT,t);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,n,this.onFaceChatHandler,this)},t.prototype.onFaceChatHandler=function(e){this.removeChildren();var t=e.msg,n=new dragonBones.EgretFactory;if(null!=RES.getRes(this.faceChat_ske_json_name)){n.parseDragonBonesData(RES.getRes(this.faceChat_ske_json_name)),n.parseTextureAtlasData(RES.getRes(this.faceChat_tex_json_name),RES.getRes(this.faceChat_tex_png_name));var r=n.buildArmatureDisplay(this.faceChat_animation_ar_name+t.currentChatNumbers);this.addChild(r),r.x+=50,r.y+=100,r.animation.play("newAnimation",-1),this.animation(r)}},t.prototype.animation=function(e){egret.Tween.removeTweens(this),egret.Tween.get(this,{loop:!1}).to({alpha:1},500).wait(1500).to({alpha:0},500).call(this.onAnimationComplete,this,[e])},t.prototype.onAnimationComplete=function(e){e.parent&&e.parent.removeChild(e)},t}(CWTFrameWork.CommponentsBase);__reflect(SFaceChatCommponents.prototype,"SFaceChatCommponents");var GameStartCommponents=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.start_animation()},t.prototype.start_animation=function(){egret.Tween.removeTweens(this.aniamtionImage),egret.Tween.get(this.aniamtionImage,{loop:!1}).to({scaleX:1,scaleY:1},500,egret.Ease.backOut).call(this.animationComplete,this)},t.prototype.animationComplete=function(){this.parent&&this.parent.removeChild(this),ClientEventManager.ins.createAndSendEvent(ClientEventEnum.GAME_START)},t}(CWTFrameWork.CommponentsBase);__reflect(GameStartCommponents.prototype,"GameStartCommponents");var JumpTextCommponents=function(e){function t(t,n,r){var a=e.call(this)||this;return a.jumpText=t,a.font=n,a.textTypeEnum=r,a}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.initialize(this.jumpText,this.font,this.textTypeEnum)},t.prototype.initialize=function(e,t,n){for(var r=new Array;e.length>0;)r.push(e[0]),e=e.slice(1,e.length);for(var a=new Array,o=0;o<r.length;o++){var i=this.choose_textTypeEnum(n,r[o],this.font,o);a.push(i)}this.tween_animation(a)},t.prototype.choose_textTypeEnum=function(e,t,n,r){switch(e){case TextTypeEnum.LABEL:return this.show_label_text(t,n,r);case TextTypeEnum.BITMAP_LABEL:return this.show_bitmapLabel_text(t,n,r)}},t.prototype.show_label_text=function(e,t,n){var r=new LabelCommponents;r.text=e,r.fontFamily=t,this.addChild(r);var a=this.get_label_position(r,n);return r.x=a.x,r.y=a.y,r},t.prototype.show_bitmapLabel_text=function(e,t,n){var r=new eui.BitmapLabel;r.text=e,r.font=t,this.addChild(r),r.width=45,r.height=44;var a=this.get_label_position(r,n);return r.x=a.x,r.y=a.y,r},t.prototype.get_label_position=function(e,t){var n=e.width*t,r=0;return new egret.Point(n,r)},t.prototype.tween_animation=function(e,t){void 0===t&&(t=0),egret.Tween.get(e[t],{loop:!1}).to({y:-10},150).call(this.tween_animation_complete,this,[e,t]).to({y:0},150)},t.prototype.tween_animation_complete=function(e,t){t++,t>=e.length&&(t=0),this.tween_animation(e,t)},t}(eui.Group);__reflect(JumpTextCommponents.prototype,"JumpTextCommponents");var TextTypeEnum;!function(e){e[e.LABEL=0]="LABEL",e[e.BITMAP_LABEL=1]="BITMAP_LABEL"}(TextTypeEnum||(TextTypeEnum={}));var GameNameLabel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.text=BLLComman.gameDataController.roomUtil.gameName},t}(LabelCommponents);__reflect(GameNameLabel.prototype,"GameNameLabel");var RoomIDLabel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.text="房间号："+BLLComman.gameDataController.roomUtil.roomID.toString()},t}(LabelCommponents);__reflect(RoomIDLabel.prototype,"RoomIDLabel");var RoundLabel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){var e=BLLComman.gameDataController.roomUtil;this.setText(e.currentRoundNumbers,e.totalRoundNumbers);var t=ClientEventManager.ins.createClientEventType(ClientEventEnum.ROUND_CHANGE);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,t,this.onRoundChangeHandler,this)},t.prototype.setText=function(e,t){this.text="对局数："+e+"/"+t},t.prototype.onRoundChangeHandler=function(e){var t=BLLComman.gameDataController.roomUtil;this.setText(t.currentRoundNumbers,t.totalRoundNumbers)},t}(LabelCommponents);__reflect(RoundLabel.prototype,"RoundLabel");var SPlayerNetStatusEnum;!function(e){e[e.ON_LINE=0]="ON_LINE",e[e.OFF_LINE=1]="OFF_LINE"}(SPlayerNetStatusEnum||(SPlayerNetStatusEnum={}));var SPlayerInformationBase=function(e){function t(){var t=e.call(this)||this;return t.positionEnumString="",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);var t=parseInt(this.positionEnumString),n=this.playerInformationGroup.getChildAt(0);egret.getQualifiedClassName(n)==egret.getQualifiedClassName(SSitDownButton)&&(n.positionEnumString=this.positionEnumString);var r=ClientEventManager.ins.createClientEventTypeByPositionEnum(ClientEventEnum.SIT_DOWN_SUCCESS,t);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,r,this.onSitDownSuccessHandler,this);var a=ClientEventManager.ins.createClientEventTypeByPositionEnum(ClientEventEnum.STAND_UP_SUCCESS,t);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,a,this.onStandUpSuccessHandler,this);var o=ClientEventManager.ins.createClientEventTypeByPositionEnum(ClientEventEnum.PLAYER_OFFLINE,t);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,o,this.onOffLineHandler,this);var i=ClientEventManager.ins.createClientEventTypeByPositionEnum(ClientEventEnum.TOTAL_SCORE_CHANGE,t);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,i,this.onTotalScoreChangeHandler,this)},t.prototype.onSitDownSuccessHandler=function(e){var t=e.msg;this.playerInformationGroup.removeChildren();var n=new SPlayerInformationB;this.playerInformationGroup.addChild(n),n.seatDataUtil=t},t.prototype.onTotalScoreChangeHandler=function(e){var t=this.playerInformationGroup.getChildAt(0);egret.getQualifiedClassName(t)==egret.getQualifiedClassName(SPlayerInformationB)&&t.setCurrencyText(e.msg)},t.prototype.onStandUpSuccessHandler=function(e){this.playerInformationGroup.removeChildren();var t=new SSitDownButton;t.positionEnumString=this.positionEnumString,t.width=93,t.height=95,t.bgImageSource="playerInformation_looks_bg_png",this.playerInformationGroup.addChild(t);e.msg},t.prototype.onOffLineHandler=function(e){var t=e.msg;this.offlineImage.visible=t==SPlayerNetStatusEnum.OFF_LINE?!0:!1},t}(CWTFrameWork.CommponentsBase);__reflect(SPlayerInformationBase.prototype,"SPlayerInformationBase");var SRightPlayerInformationB=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(SPlayerInformationB);__reflect(SRightPlayerInformationB.prototype,"SRightPlayerInformationB");var QuanLeiDaCommponents=function(e){function t(){var t=e.call(this)||this;return t.animtionPointArray=[new egret.Point(-300,-50),new egret.Point(0,-50),new egret.Point(-180,-200)],t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.playAnimation(this.animtionPointArray[0].x,this.animtionPointArray[0].y)},t.prototype.mc_aniamtion=function(e){},t.prototype.playAnimation=function(e,t){var n=RES.getRes("quanleidaAnimation_json"),r=RES.getRes("quanleidaAnimation_png"),a=new egret.MovieClipDataFactory(n,r),o=new egret.MovieClip(a.generateMovieClipData("quanleidaAnimation"));this.addChild(o),o.play(1),o.x=e,o.y=t,o.addEventListener(egret.Event.COMPLETE,this.onAnimationCompleteHandler,this)},t.prototype.onAnimationCompleteHandler=function(e){var t=e.target;return t.removeEventListener(egret.Event.COMPLETE,this.onAnimationCompleteHandler,this),t.parent&&t.parent.removeChild(t),this.animtionPointArray.shift(),0==this.animtionPointArray.length?(ClientEventManager.ins.createAndSendEvent(ClientEventEnum.QUAN_LEI_DA_COMPLETE),void(this.parent&&this.parent.removeChild(this))):void this.playAnimation(this.animtionPointArray[0].x,this.animtionPointArray[0].y)},t}(CWTFrameWork.CommponentsBase);__reflect(QuanLeiDaCommponents.prototype,"QuanLeiDaCommponents");var SRightShowCardListCommponents=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(SShowCardListCommponents);__reflect(SRightShowCardListCommponents.prototype,"SRightShowCardListCommponents");var SPlayerStatusEnum;!function(e){e[e.WATCH=0]="WATCH",e[e.READY=1]="READY",e[e.DEAL_CARD=2]="DEAL_CARD",e[e.DEAL_CARD_COMPLETE=3]="DEAL_CARD_COMPLETE",e[e.SHOW_CARD=4]="SHOW_CARD",e[e.SCORE=5]="SCORE"}(SPlayerStatusEnum||(SPlayerStatusEnum={}));var SSpecialCardTypeCommponents=function(e){function t(t){var n=e.call(this)||this;return n.cardTypeEnum=t,n}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.animationImage.source="specialCardType_"+this.cardTypeEnum/1e5+"_png",this.animationImage_animation();var t=(BLLComman.gameDataController.playerUtil,BLLComman.gameDataController.get_gender_string());SoundManager.ins.playEffectSound(t+this.cardTypeEnum/1e5)},t.prototype.animationImage_animation=function(){egret.Tween.removeTweens(this.animationImage),this.animationImage.horizontalCenter=500,this.animationImage.x=CWTFrameWork.Comman.startStageWidth,egret.Tween.get(this.animationImage,{loop:!1}).to({horizontalCenter:0},500),egret.Tween.get(this,{loop:!1}).wait(1e3).to({alpha:0},500),egret.Tween.get(this,{loop:!1}).to({},2e3).call(this.onSpecialCardTypeCompleteHandler,this)},t.prototype.onSpecialCardTypeCompleteHandler=function(){ClientEventManager.ins.createAndSendEvent(ClientEventEnum.SPECIAL_CARDTYPE_COMPLETE,this)},t}(CWTFrameWork.CommponentsBase);__reflect(SSpecialCardTypeCommponents.prototype,"SSpecialCardTypeCommponents");var SRightTextChatCommponents=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(STextChatCommponents);__reflect(SRightTextChatCommponents.prototype,"SRightTextChatCommponents");var SPutCardStatusEnum;!function(e){e[e.READY=2]="READY",e[e.PUT_CARD=4]="PUT_CARD",e[e.PUT_CARD_COMPLETE=5]="PUT_CARD_COMPLETE"}(SPutCardStatusEnum||(SPutCardStatusEnum={}));var STopTextChatCommponents=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(STextChatCommponents);__reflect(STopTextChatCommponents.prototype,"STopTextChatCommponents");var Time2Commponents=function(e){function t(){var t=e.call(this)||this;return t.timeCount=9e4,t.time_tick_numbers=90,t.noticeLessTime=10,t.tickTime=1e3,t.intervalName=0,t.startAngel=-Math.PI/2,t.endAngel=-Math.PI/2,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.maskShape=new Time2MaskShape(this.startAngel,this.endAngel),this.addChild(this.maskShape),this.createMaskShape(this.startAngel,this.endAngel),this.maskShape.x=85,this.maskShape.y=40,this.fillImage.mask=this.maskShape},t.prototype.onTimerCompleteHandler=function(){clearInterval(this.intervalName)},t.prototype.onRemovedFromStageHandler=function(t){e.prototype.onRemovedFromStageHandler.call(this,t),clearInterval(this.intervalName),BLLComman.gameDataController.currentTimeCount=9e4},Object.defineProperty(t.prototype,"currentTimeCount",{set:function(e){var t=2*Math.PI/(this.timeCount/1e3);this.endAngel+=(this.timeCount-e)/1e3*t,this.time_tick_numbers=e/1e3},enumerable:!0,configurable:!0}),t.prototype.onTimerHandler=function(e){this.putCardTimerText.text=this.time_tick_numbers.toString(),egret.Tween.get(this.maskShape,{loop:!1}).to({endAngel:e},1e3)},t.prototype.onLessTimeHandler=function(){this.putCardTimerText.textColor=16711680,egret.Tween.get(this.putCardTimerText,{loop:!1}).to({alpha:.5},500).to({alpha:1},500)},t.prototype.start=function(){var e=2*Math.PI/this.timeCount*1e3,t=this;t.endAngel+=e,t.onTimerHandler(t.endAngel),t.time_tick_numbers--,t.time_tick_numbers<=t.noticeLessTime&&this.onLessTimeHandler(),this.intervalName=setInterval(function(){t.onTimerHandler(t.endAngel),t.endAngel+=e,t.time_tick_numbers<=0&&t.onTimerCompleteHandler(),t.time_tick_numbers--,t.time_tick_numbers<=t.noticeLessTime&&t.onLessTimeHandler()},this.tickTime)},t.prototype.createMaskShape=function(e,t){},t}(CWTFrameWork.CommponentsBase);__reflect(Time2Commponents.prototype,"Time2Commponents");var Time2MaskShape=function(e){function t(t,n){var r=e.call(this)||this;return r.startAngel=0,r._endAngel=0,r.create(t,n),r.startAngel=t,r._endAngel=n,r}return __extends(t,e),Object.defineProperty(t.prototype,"endAngel",{get:function(){return this._endAngel},set:function(e){this.create(this.startAngel,e),this._endAngel=e},enumerable:!0,configurable:!0}),t.prototype.create=function(e,t){this.graphics.clear(),this.graphics.beginFill(0),this.graphics.moveTo(0,0),this.graphics.lineTo(80,40),this.graphics.drawArc(0,0,80,e,t),this.graphics.lineTo(0,0),this.graphics.endFill()},t}(egret.Shape);__reflect(Time2MaskShape.prototype,"Time2MaskShape");var TimeCommponents=function(e){function t(){var t=e.call(this)||this;return t.totalTime=3e4,t.tickTime=1e3,t.currentRunCount=0,t.progressingImageWidth=0,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.progressingImageWidth=this.progressingImage.width},Object.defineProperty(t.prototype,"currentTimeCount",{set:function(e){var t=this.totalTime/this.tickTime;this.currentRunCount=(this.totalTime-e)/1e3;(t-this.currentRunCount)*(1/t)*this.progressingImageWidth;this.start()},enumerable:!0,configurable:!0}),t.prototype.onTimerHandler=function(e,t,n,r,a){var o=e/n,i=(o-t)*(1/o)*a;this.progressImage_animation(r,i),o==t&&this.onTimerCompleteHandler()},t.prototype.onRemovedFromStageHandler=function(t){e.prototype.onRemovedFromStageHandler.call(this,t),this.clearSetInterval(),BLLComman.gameDataController.disMissRoomCurrentTimeCount=3e4},t.prototype.onTimerCompleteHandler=function(){this.clearSetInterval()},t.prototype.start=function(){var e=this;e.onTimerHandler(e.totalTime,e.currentRunCount,e.tickTime,e.progressingImage,e.progressingImageWidth),this.setIntervalName=setInterval(function(){e.currentRunCount++,e.onTimerHandler(e.totalTime,e.currentRunCount,e.tickTime,e.progressingImage,e.progressingImageWidth)},this.tickTime)},t.prototype.clearSetInterval=function(){clearInterval(this.setIntervalName)},t.prototype.stop=function(){this.onTimerCompleteHandler()},t.prototype.pause=function(){},t.prototype.resume=function(){},t.prototype.progressImage_animation=function(e,t){egret.Tween.removeTweens(e),egret.Tween.get(e,{loop:!1}).to({width:t},this.tickTime)
},t}(CWTFrameWork.CommponentsBase);__reflect(TimeCommponents.prototype,"TimeCommponents");var RoomCurrentStatusEnum;!function(e){e[e.NOT_START=0]="NOT_START",e[e.START=1]="START",e[e.DISMISS=2]="DISMISS"}(RoomCurrentStatusEnum||(RoomCurrentStatusEnum={}));var SChatTypeEnum;!function(e){e[e.TEXT_CHAT=1]="TEXT_CHAT",e[e.FACE_CHAT=2]="FACE_CHAT"}(SChatTypeEnum||(SChatTypeEnum={}));var SNoticeTextTypeEnum;!function(e){e[e.TEXT_A_STATE=1]="TEXT_A_STATE",e[e.TEXT_B_STATE=2]="TEXT_B_STATE",e[e.TEXT_C_STATE=3]="TEXT_C_STATE",e[e.TEXT_D_STATE=4]="TEXT_D_STATE",e[e.TEXT_E_STATE=5]="TEXT_E_STATE",e[e.TEXT_F_STATE=6]="TEXT_F_STATE",e[e.TEXT_G_STATE=7]="TEXT_G_STATE",e[e.TEXT_H_STATE=8]="TEXT_H_STATE",e[e.TEXT_I_STATE=9]="TEXT_I_STATE",e[e.TEXT_J_STATE=10]="TEXT_J_STATE",e[e.TEXT_K_STATE=11]="TEXT_K_STATE",e[e.TEXT_L_STATE=12]="TEXT_L_STATE",e[e.TEXT_M_STATE=13]="TEXT_M_STATE",e[e.TEXT_N_STATE=14]="TEXT_N_STATE",e[e.TEXT_O_STATE=15]="TEXT_O_STATE"}(SNoticeTextTypeEnum||(SNoticeTextTypeEnum={}));var SShareTypeEnum;!function(e){e[e.SHARE_TITLE_TO_FRIENDS=0]="SHARE_TITLE_TO_FRIENDS",e[e.SHARE_HISTORY_RECORD_TO_FRIENDS=1]="SHARE_HISTORY_RECORD_TO_FRIENDS",e[e.TOP_GAMES=2]="TOP_GAMES"}(SShareTypeEnum||(SShareTypeEnum={}));var SAmmountBox=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(MessageBoxLayerBase);__reflect(SAmmountBox.prototype,"SAmmountBox");var SAutoCardBox=function(e){function t(t){var n=e.call(this)||this;return n.bottomCard_animation_time=300,n.cardTypeUtilList=new Array,n.bottomCardList=new Array,n.cardUtilList=t,n}return __extends(t,e),t.prototype.childrenCreated=function(){if(e.prototype.childrenCreated.call(this),BLLComman.gameDataController.roomUtil.specialCardTypeEnum==SSpecialCardTypeEnum.HAS_SPECIAL){var t=(new SpecialCardTypeLogic).decideByCardUtilList(this.cardUtilList);this.choose_special_cardType(t)}var n=ClientEventManager.ins.createClientEventType(ClientEventEnum.PLAY_CARD_COMPLETE);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,n,this.onPlayCardCompleteHandler,this),this.time2Commponents.currentTimeCount=1e3*BLLComman.gameDataController.currentTimeCount,this.time2Commponents.start(),this.cardUtilListToBottomCardList(this.cardUtilList);var r=(new AutoCardLogic).calculate_auto_cardList(this.bottomCardList);this.cardTypeList.itemRenderer=SAutoCardBoxItemRenderer,this.cardTypeList.dataProvider=new eui.ArrayCollection(r),this.cardTypeList.validateNow(),this.cardTypeList.selectedIndex=0,this.put_bottomCardList_to_cardGroup(r[0]),this.cardTypeUtilList=this.copy_cardTypeUtilList(r[0].concat()),this.eventListenerManager.addClientEventListener(this.putCompleteGroupButton,egret.TouchEvent.TOUCH_TAP,this.onPutCompleteGroupButtonTouchedHandler,this),this.eventListenerManager.addClientEventListener(this.cardTypeList,eui.ItemTapEvent.ITEM_TAP,this.onCardTypeListTouchedHandler,this),this.eventListenerManager.addClientEventListener(this.cardGroup,egret.TouchEvent.TOUCH_TAP,this.onCardGroupTouchedHandler,this)},t.prototype.choose_special_cardType=function(e){switch(e){case CardTypeEnum.ZHI_ZUN_QING_LONG:this.show_special_cardType("至尊青龙",e);break;case CardTypeEnum.YI_TIAO_LONG:this.show_special_cardType("一条龙",e);break;case CardTypeEnum.SHI_ER_HUANG_ZU:this.show_special_cardType("十二皇族",e);break;case CardTypeEnum.SAN_TONG_HUA_SHUN:this.show_special_cardType("三同花顺",e);break;case CardTypeEnum.SAN_TAO_ZHA_DAN:this.show_special_cardType("三套炸弹",e);break;case CardTypeEnum.QUAN_DA:this.show_special_cardType("全大",e);break;case CardTypeEnum.QUAN_XIAO:this.show_special_cardType("全小",e);break;case CardTypeEnum.COU_YI_SE:this.show_special_cardType("凑一色",e);break;case CardTypeEnum.SI_TAO_CHONG_SAN:this.show_special_cardType("四套三条",e);break;case CardTypeEnum.WU_DUI_CHONG_SAN:this.show_special_cardType("五对三条",e);break;case CardTypeEnum.LIU_DUI_BAN:this.show_special_cardType("六对半",e);break;case CardTypeEnum.SAN_TONG_HUA:this.show_special_cardType("三同花",e);break;case CardTypeEnum.SAN_SHUN_ZI:this.show_special_cardType("三顺子",e)}},t.prototype.show_special_cardType=function(e,t){Comman.stageBase.openLayerCommponents(new SNoticeBCBox("你碰到了特殊牌型"+e,t,this.cardUtilList))},t.prototype.onPlayCardCompleteHandler=function(e){var t=e.msg;t==PositionEnum.BOTTOM&&Comman.stageBase.closeLayerCommponents(this)},t.prototype.onPutCompleteBroadCastHandler=function(e){Comman.stageBase.closeLayerCommponents(this)},t.prototype.onPutCompleteGroupButtonTouchedHandler=function(e){var t=new Array;if(t.push(this.cardTypeUtilList[0].cardList.concat()),t.push(this.cardTypeUtilList[1].cardList.concat()),t.push(this.cardTypeUtilList[2].cardList.concat()),!this.isReserve(t)){var n=new Map;n.set("before",this.get_carsUtil_from_cardTypeUtilList(this.cardTypeUtilList[2])),n.set("center",this.get_carsUtil_from_cardTypeUtilList(this.cardTypeUtilList[1])),n.set("after",this.get_carsUtil_from_cardTypeUtilList(this.cardTypeUtilList[0])),PlayCardLogic.ins.send_playCard_complete_data(n)}},t.prototype.isReserve=function(e){for(var t=e.length-1;t>=0;t--)for(var n=(new DecideCardTypeLogic).decideCardType(e[t]),r=t-1;r>=0;r--){var a=(new DecideCardTypeLogic).decideCardType(e[r]);if(n.x>a.x)return this.reserve_image_animation(3-t,3-r),!0;if(n.x==a.x&&n.y>a.y)return this.reserve_image_animation(3-t,3-r),!0}return!1},t.prototype.reserve_image_animation=function(e,t){this.reserveImage.source="reserverImage_"+e+t+"_png",egret.Tween.removeTweens(this.reserveImage),this.reserveImage.alpha=0,egret.Tween.get(this.reserveImage,{loop:!1}).to({alpha:1},500).wait(2e3).to({alpha:0},500)},t.prototype.get_carsUtil_from_cardTypeUtilList=function(e){for(var t=new Array,n=0;n<e.cardList.length;n++)t.push(e.cardList[n].cardUtil);return t},t.prototype.onCardGroupTouchedHandler=function(e){if(e.target!=e.currentTarget&&egret.getQualifiedClassName(e.target)==egret.getQualifiedClassName(eui.Image)){if(egret.getQualifiedClassName(e.target.parent)!=egret.getQualifiedClassName(BottomCard))return;var t=e.target.parent;this.touched_card(t)}},t.prototype.touched_card=function(e){if(null==this.currentSelcted_bottomCard)return this.currentSelcted_bottomCard=e,void(e.selected2=!0);if(null!=this.currentSelcted_bottomCard){if(this.currentSelcted_bottomCard==e)return e.selected2=!1,void(this.currentSelcted_bottomCard=null);if(this.currentSelcted_bottomCard!=e){var t=this.get_touched_bottomCard_position(e),n=this.get_touched_bottomCard_position(this.currentSelcted_bottomCard);if(t.y==n.y)return this.currentSelcted_bottomCard.selected2=!1,void(this.currentSelcted_bottomCard=null);this.cardTypeUtilList[n.y].cardList.splice(n.x,1),this.cardTypeUtilList[n.y].cardList.push(e),this.cardTypeUtilList[t.y].cardList.splice(t.x,1),this.cardTypeUtilList[t.y].cardList.push(this.currentSelcted_bottomCard),this.put_bottomCardList_to_cardGroup(this.cardTypeUtilList),this.currentSelcted_bottomCard=null}}},t.prototype.copy_cardTypeUtilList=function(e){for(var t=new Array,n=0;n<e.length;n++){for(var r=new CardTypeUtil,a=0;a<e[n].cardList.length;a++)r.cardList=e[n].cardList.concat(),r.weightPercent=e[n].weightPercent.clone();t.push(r)}return t},t.prototype.get_touched_bottomCard_position=function(e){for(var t=0;t<this.cardTypeUtilList.length;t++)for(var n=0;n<this.cardTypeUtilList[t].cardList.length;n++)if(this.cardTypeUtilList[t].cardList[n]==e)return new egret.Point(n,t)},t.prototype.onCardTypeListTouchedHandler=function(e){var t=e.itemRenderer;t.selected=!0,this.cardTypeUtilList=this.copy_cardTypeUtilList(t.data.concat()),this.put_bottomCardList_to_cardGroup(t.data)},t.prototype.bottomCard_animation=function(e,t,n,r,a){e.touchEnabled=!1,egret.Tween.removeTweens(e),egret.Tween.get(e,{loop:!1}).to({x:t,y:n,scaleX:r,scaleY:a},this.bottomCard_animation_time).call(this.bottomCard_animation_complete,this,[e,t,n])},t.prototype.bottomCard_animation_complete=function(e,t,n){e.x=t,e.y=n,e.touchEnabled=!0},t.prototype.put_bottomCardList_to_cardGroup=function(e){for(var t=0;t<e.length;t++){var n=e[t].cardList;n.sort(this.sortByBottomCard);for(var r=0;r<n.length;r++){var a=this.get_bottomCard_position(new egret.Point(r,2-t));this.bottomCard_animation(n[r],a.x+.8*n[r].anchorOffsetX,a.y+.8*n[r].anchorOffsetY,.8,.8)}}},t.prototype.get_bottomCard_position=function(e){var t=this.cardGroup.getChildByName("putCardGroup"+e.y+"_"+e.x),n=new egret.Point(t.x,t.y);return n},t.prototype.sortByBottomCard=function(e,t){if(null==e)return 1;if(null==t)return-1;var n=e.cardUtil,r=t.cardUtil;return n.cardValue>r.cardValue?-1:n.cardValue<r.cardValue?1:n.cardColor>=r.cardColor?-1:1},t.prototype.sortByCardUtil=function(e,t){return e.cardValue>t.cardValue?-1:e.cardValue<t.cardValue?1:e.cardColor>=t.cardColor?-1:1},t.prototype.cardUtilListToBottomCardList=function(e){e.sort(this.sortByCardUtil);for(var t=0;t<e.length;t++){var n=new BottomCard;this.bottomCardList.push(n),this.cardGroup.addChild(n),(new CWTFrameWork.AnchorOffsetManager).set_center_anchorOffset(n),n.x=50+t*(n.width-30),n.y=500,n.cardUtil=e[t]}},t}(MessageBoxLayerBase);__reflect(SAutoCardBox.prototype,"SAutoCardBox");var SAutoCardBoxItemRenderer=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},Object.defineProperty(t.prototype,"selected",{set:function(e){this.selectImage.visible=e},enumerable:!0,configurable:!0}),t.prototype.dataChanged=function(){this.data.before=this.switchCardTypeImageSource(Math.round(this.data[2].weightPercent.x)),this.data.center=this.switchCardTypeImageSource(Math.round(this.data[1].weightPercent.x)),this.data.after=this.switchCardTypeImageSource(Math.round(this.data[0].weightPercent.x))},t.prototype.switchCardTypeImageSource=function(e){var t=Math.floor(e/1e5);switch(t){case 1:return"wulong_image_png";case 2:return"duizi_image_png";case 3:return"liangdui_image_png";case 4:return"santiao_image_png";case 5:return"shunzi_image_png";case 6:return"tonghua_image_png";case 7:return"hulu_image_png";case 8:return"zhadan_image_png";case 9:return"tonghuashun_image_png"}},t}(CWTFrameWork.ItemRendererBase);__reflect(SAutoCardBoxItemRenderer.prototype,"SAutoCardBoxItemRenderer");var AutoCardLogic=function(){function e(){this.maxNumberArray=[5,5,3]}return e.prototype.calculate_auto_cardList=function(e){for(var t=new Array,n=CardTypeEnum.TONG_HUA_SHUN;t.length<3&&n>CardTypeEnum.WU_LONG;){var r=e.concat(),a=new Array,o=new CardTypePromptLogic(e).cardTypeList,i=this.calculate(o,this.maxNumberArray[0],n);if(i.weightPercent.x>=7e5&&i.weightPercent.y<8e5&&(i=this.getMinHuLu(o)),null==i)return t;a.push(i),n=1e5*Math.floor(i.weightPercent.x/1e5);for(var s=n;s>CardTypeEnum.DUI_ZI&&t.length<3;){var l=r.concat(),c=new CardTypePromptLogic(l).cardTypeList,u=this.calculate(c,this.maxNumberArray[0],n);if(null==u)return t;u.weightPercent.x>=7e5&&u.weightPercent.y<8e5&&(u=this.getMinHuLu(c)),this.splice_bottomCardList(l,u.cardList);var m=new Array;m.push(u);var d=new CardTypePromptLogic(l).cardTypeList,h=this.calculate(d,this.maxNumberArray[1],s);null==h&&(h=new CardTypeUtil,h.weightPercent=new egret.Point(CardTypeEnum.WU_LONG,0)),h.weightPercent.x>=7e5&&h.weightPercent.y<8e5&&(h=this.getMinHuLu(d)),m.push(h),s=1e5*Math.floor(h.weightPercent.x/1e5),this.splice_bottomCardList(l,h.cardList);var p=new CardTypePromptLogic(l).cardTypeList,C=this.calculate(p,this.maxNumberArray[2],s);if(null==C&&(C=new CardTypeUtil,C.weightPercent=new egret.Point(CardTypeEnum.WU_LONG,0)),m.push(C),this.splice_bottomCardList(l,C.cardList),l.sort(this.sortByBottomCard),s-=1e5,s<CardTypeEnum.WU_LONG&&0!=t.length)return t;this.auto_less_bottomCardList(l,u,this.maxNumberArray[0]),0==h.cardList.length&&l.sort(this.sortByBottomCard_max),this.auto_less_bottomCardList(l,h,this.maxNumberArray[1]);var _=this.auto_less_bottomCardList(l,C,this.maxNumberArray[2]);if(-1==_)return t;t.push(m)}n-=1e5}for(var y=0;y<t.length;)5!=t[y][0].cardList.length||5!=t[y][1].cardList.length||3!=t[y][2].cardList.length?(t.splice(y,1),y=0):y++;return t},e.prototype.getMinHuLu=function(e){for(var t=e.get(CardTypeEnum.SAN_TIAO),n=t[t.length-1],r=e.get(CardTypeEnum.DUI_ZI),a=r[0],o=!0;o;){a=r[0];for(var i=0,s=0;s<n.cardList.length;s++)a.cardList[0]==n.cardList[s]&&(r.shift(),i++);i>0||(o=!1)}var l=n.cardList.concat(a.cardList),c=(new DecideCardTypeLogic).calculateWeightPercent(CardTypeEnum.HU_LU,l),u=new CardTypeUtil(n.cardList.concat(a.cardList),c);return u},e.prototype.auto_less_bottomCardList=function(e,t,n){for(var r=n-t.cardList.length,a=0,o=function(){if(a==e.length)return{value:-1};var n=e[a],o=t.cardList.concat(n),i=new CardTypePromptLogic(o).cardTypeList,s=CardTypeEnum.WU_LONG;i.forEach(function(e,t){e.length>0&&(s=t)}),Math.floor(s/1e5)==Math.floor(t.weightPercent.x/1e5)?(t.cardList.push(n),e.splice(a,1),a=0,r--):a++};r>0;){var i=o();if("object"==typeof i)return i.value}t.cardList.sort(this.sortByBottomCard_max)},e.prototype.splice_bottomCardList=function(e,t){for(t=t.concat();t.length>0;){var n=t[0];e.splice(e.indexOf(n),1),t.shift()}},e.prototype.calculate=function(e,t,n){var r=new Array;e.forEach(function(e,t){for(var a=0;a<e.length;a++)1e5*Math.floor(e[a].weightPercent.x/1e5)<=n&&r.push(e[a])}),r.sort(this.sortByWeightPercent);for(var a=null,o=0;o<r.length;o++)if(r[o].cardList.length<=t){a=r[o];break}return a},e.prototype.sortByWeightPercent=function(e,t){return e.weightPercent.y>t.weightPercent.y?-1:1},e.prototype.sortByBottomCard=function(e,t){if(null==e)return 1;if(null==t)return-1;var n=e.cardUtil,r=t.cardUtil;return n.cardValue>r.cardValue?1:n.cardValue<r.cardValue?-1:(n.cardColor>=r.cardColor,1)},e.prototype.sortByBottomCard_max=function(e,t){if(null==e)return-1;if(null==t)return-1;var n=e.cardUtil,r=t.cardUtil;return n.cardValue>r.cardValue?-1:n.cardValue<r.cardValue?1:n.cardColor>=r.cardColor?-1:1},e}();__reflect(AutoCardLogic.prototype,"AutoCardLogic");var SBigScoreBox=function(e){function t(t){var n=e.call(this)||this;return n.bigScoreUtilList=t,n.maskBox=new MaskBox(n,!0,0,!1),n.locationLayerName="C_LAYER",n}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),console.log("bisScoreBox opened!"),this.roomIDLabel.text="房间号："+BLLComman.gameDataController.roomUtil.roomID,console.log("roomId:"+BLLComman.gameDataController.roomUtil.roomID),this.roomRoundLabel.text="局数："+BLLComman.gameDataController.roomUtil.totalRoundNumbers,this.closeButton.visible=!1,this.singleBigScoreUtilList.itemRenderer=SSBigScoreItemRenderer,this.singleBigScoreUtilList.dataProvider=new eui.ArrayCollection(this.bigScoreUtilList)},t}(MessageBoxLayerBase);__reflect(SBigScoreBox.prototype,"SBigScoreBox");var SSBigScoreItemRenderer=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dataChanged=function(){return this.data.nickName=Comman.splitNickName(this.data.nickName),this.hatImage.visible=this.data.winTypeEnum==SWinTypeEnum.WIN?!0:!1,this.data.totalScore>=0?void(this.textColorLabel.textColor=12708447):this.data.totalScore<0?void(this.textColorLabel.textColor=16738408):void 0},t}(CWTFrameWork.ItemRendererBase);__reflect(SSBigScoreItemRenderer.prototype,"SSBigScoreItemRenderer");var SSingleBigScoreUtil=function(){function e(){this.headerImageUrl="test_header1_jpg",this.nickName="我是来测试的",this.totalScore=5,this.totalScoreColor=5,this.winTypeEnum=SWinTypeEnum.LOSE}return e}();__reflect(SSingleBigScoreUtil.prototype,"SSingleBigScoreUtil");var SCardBox=function(e){function t(t,n){var r=e.call(this)||this;return r.move_selectBottomCard=null,r.bottomCardList_startX=200,r.bottomCardList_startY=520,r.bottomCard_realWidth=109,r.bottomCard_realHeight=148,r.bottomCard_spaceH=-50,r.bottomCardList=new Array,r.cardTypeUtilList=new Array,r.selectBottomCardList=new Array,r.selectBottomCardList_maxSize=4,r.bottomCard_animation_time=300,r.initialize(),r.Ts(n),r.cardUtilList=t,r}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);var t=ClientEventManager.ins.createClientEventType(ClientEventEnum.PLAY_TS);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,t,this.Ts,this),this.putCompleteGroupButton.bgImageSource="button_yellow4_png",this.putCompleteGroupButton.contentImageSource="button_ok_png",this.eventListenerManager.addClientEventListener(this,egret.TouchEvent.TOUCH_BEGIN,this.onTouchedBeginHandler,this),this.eventListenerManager.addClientEventListener(this.cardGroup,egret.TouchEvent.TOUCH_TAP,this.onCardGroupTouchedHandler,this),this.eventListenerManager.addClientEventListener(this.returnButtonGroup,egret.TouchEvent.TOUCH_TAP,this.onReturnButtonGroupTouchedHandler,this),this.eventListenerManager.addClientEventListener(this.cardTypeButtonDataGroup,eui.ItemTapEvent.ITEM_TAP,this.onCardTypeButtonDataGroupTouchedHandler,this),this.eventListenerManager.addClientEventListener(this.putCompleteGroupButton,egret.TouchEvent.TOUCH_TAP,this.onPutCompleteGroupButtonTouchedHandler,this);var n=ClientEventManager.ins.createClientEventType(ClientEventEnum.PLAY_CARD_COMPLETE);if(this.eventListenerManager.addClientEventListener(ClientEventManager.ins,n,this.onPlayCardCompleteHandler,this),this.cardUtilListToBottomCardList(this.cardUtilList),BLLComman.gameDataController.roomUtil.specialCardTypeEnum==SSpecialCardTypeEnum.HAS_SPECIAL){var r=(new SpecialCardTypeLogic).decideByCardUtilList(this.cardUtilList);this.choose_special_cardType(r)}this.cardTypePromptLogic=new CardTypePromptLogic(this.bottomCardList),this.cardTypeButtonDataGroup.itemRenderer=SCardTypeButtonItemRenderer,this.cardTypeButtonDataGroup.dataProvider=new eui.ArrayCollection(this.cardTypePromptLogic.cardTypeButtonList),this.cardTypeButtonDataGroup.validateNow(),this.refreshCardTypeButtonDataGroup(this.cardTypePromptLogic.cardTypeList),console.log(this),console.log(this.time2Commponents),this.time2Commponents.currentTimeCount=1e3*BLLComman.gameDataController.currentTimeCount,this.time2Commponents.start()},t.prototype.Ts=function(e){this.tsData=e||{};for(var t=this.tsData.list||[],n=0;n<t.length;n++)if(1!=t[n].seat)for(var r=0;r<t[n].playCardList.length;r++){var a=new CardTs;a.cardUtil=t[n].playCardList[r],this["ts"+t[n].seat].addChild(a)}console.log(e,"ts cardbox")},t.prototype.choose_special_cardType=function(e){switch(e){case CardTypeEnum.ZHI_ZUN_QING_LONG:this.show_special_cardType("至尊青龙",e);break;case CardTypeEnum.YI_TIAO_LONG:this.show_special_cardType("一条龙",e);break;case CardTypeEnum.SHI_ER_HUANG_ZU:this.show_special_cardType("十二皇族",e);break;case CardTypeEnum.SAN_TONG_HUA_SHUN:this.show_special_cardType("三同花顺",e);break;case CardTypeEnum.SAN_TAO_ZHA_DAN:this.show_special_cardType("三套炸弹",e);break;case CardTypeEnum.QUAN_DA:this.show_special_cardType("全大",e);break;case CardTypeEnum.QUAN_XIAO:this.show_special_cardType("全小",e);break;case CardTypeEnum.COU_YI_SE:this.show_special_cardType("凑一色",e);break;case CardTypeEnum.SI_TAO_CHONG_SAN:this.show_special_cardType("四套三条",e);break;case CardTypeEnum.WU_DUI_CHONG_SAN:this.show_special_cardType("五对三条",e);break;case CardTypeEnum.LIU_DUI_BAN:this.show_special_cardType("六对半",e);break;case CardTypeEnum.SAN_TONG_HUA:this.show_special_cardType("三同花",e);break;case CardTypeEnum.SAN_SHUN_ZI:this.show_special_cardType("三顺子",e)}},t.prototype.show_special_cardType=function(e,t){Comman.stageBase.openLayerCommponents(new SNoticeBCBox("你碰到了特殊牌型"+e,t,this.cardUtilList))},t.prototype.onTouchedBeginHandler=function(e){this.eventListenerManager.addClientEventListener(this,egret.TouchEvent.TOUCH_MOVE,this.onTouchedMoveHandler,this),this.eventListenerManager.addClientEventListener(this,egret.TouchEvent.TOUCH_END,this.onTouchedEndHandler,this)},t.prototype.onTouchedEndHandler=function(e){this.eventListenerManager.removeClientEventListener(this,egret.TouchEvent.TOUCH_MOVE,this.onTouchedMoveHandler,this),this.eventListenerManager.removeClientEventListener(this,egret.TouchEvent.TOUCH_END,this.onTouchedEndHandler,this)},t.prototype.onTouchedMoveHandler=function(e){if(egret.getQualifiedClassName(e.target.parent)==egret.getQualifiedClassName(BottomCard)){var t=e.target.parent;if(this.isTouchedBottomCard(t.y)&&(null==this.move_selectBottomCard||this.move_selectBottomCard!=t)){if(1==t.selected)return this.move_selectBottomCard=t,void this.remove_bottomCard_from_selectBottomCardList(t);this.move_selectBottomCard=t,this.add_bottomCard_from_selectBottomCardList(t)}}},t.prototype.onPutCompleteBroadCastHandler=function(e){Comman.stageBase.closeLayerCommponents(this)},t.prototype.onPlayCardCompleteHandler=function(e){var t=e.msg;t==PositionEnum.BOTTOM&&Comman.stageBase.closeLayerCommponents(this)},t.prototype.initialize=function(){var e=new CardTypeUtil([null,null,null],null);this.cardTypeUtilList.push(e);var t=new CardTypeUtil([null,null,null,null,null],null);this.cardTypeUtilList.push(t);var n=new CardTypeUtil([null,null,null,null,null],null);this.cardTypeUtilList.push(n)},t.prototype.onPutCompleteGroupButtonTouchedHandler=function(e){var t=new Map;t.set("before",this.get_carsUtil_from_cardTypeUtilList(this.cardTypeUtilList[0])),t.set("center",this.get_carsUtil_from_cardTypeUtilList(this.cardTypeUtilList[1])),t.set("after",this.get_carsUtil_from_cardTypeUtilList(this.cardTypeUtilList[2])),PlayCardLogic.ins.send_playCard_complete_data(t)},t.prototype.get_carsUtil_from_cardTypeUtilList=function(e){for(var t=new Array,n=0;n<e.cardList.length;n++)t.push(e.cardList[n].cardUtil);return t},t.prototype.onCardGroupTouchedHandler=function(e){if(e.target!=e.currentTarget){if(egret.getQualifiedClassName(e.target)==egret.getQualifiedClassName(eui.Group)){var t=e.target;this.touched_group(t)}if(egret.getQualifiedClassName(e.target)==egret.getQualifiedClassName(eui.Image)){if(egret.getQualifiedClassName(e.target.parent)!=egret.getQualifiedClassName(BottomCard))return;var n=e.target.parent;this.touched_card(n)}}},t.prototype.onReturnButtonGroupTouchedHandler=function(e){var t=parseInt(e.target.name),n=this.cardTypeUtilList[t].cardList.concat();this.remove_putBottomCardList_to_bottomCardList(n,t)},t.prototype.onCardTypeButtonDataGroupTouchedHandler=function(e){var t=e.itemRenderer,n=t.cardTypeEnum,r=this.cardTypePromptLogic.selectedCardType(n);if(null!=r){this.remove_selectBottomCardList_maxSize(0);for(var a=0;a<r.length;a++)this.add_bottomCard_from_selectBottomCardList(r[a])}},t.prototype.touched_card=function(e){if(this.isTouchedBottomCard(e.y)){if(1==e.selected)return void this.remove_bottomCard_from_selectBottomCardList(e);this.add_bottomCard_from_selectBottomCardList(e)}if(!this.isTouchedBottomCard(e.y)){if(null==this.currentTouchedBottomCard)return this.currentTouchedBottomCard=e,void(this.currentTouchedTimeStamp=Date.parse((new Date).toString()));if(this.currentTouchedBottomCard==e){var t=Date.parse((new Date).toString());if(t-this.currentTouchedTimeStamp<=1e3){var n=this.get_bottomCard_from_putBottomCardList(e);this.remove_putBottomCardList_to_bottomCardList([e],n.y),this.currentTouchedBottomCard=null,this.currentTouchedTimeStamp=null}return}this.currentTouchedBottomCard!=e&&(this.currentTouchedBottomCard=null,this.currentTouchedTimeStamp=null)}},t.prototype.remove_bottomCard_from_selectBottomCardList=function(e){e.selected=!1;var t=this.selectBottomCardList.indexOf(e);this.selectBottomCardList.splice(t,1)},t.prototype.add_bottomCard_from_selectBottomCardList=function(e){this.remove_selectBottomCardList_maxSize(this.selectBottomCardList_maxSize),e.selected=!0,this.selectBottomCardList.push(e)},t.prototype.get_bottomCard_from_putBottomCardList=function(e){for(var t=this.cardTypeUtilList,n=0;n<t.length;n++){var r=t[n].cardList.indexOf(e);if(-1!=r)return new egret.Point(r,n)}},t.prototype.remove_selectBottomCardList_maxSize=function(e){for(;this.selectBottomCardList.length>e;){var t=this.selectBottomCardList[0];t.selected=!1,this.selectBottomCardList.shift()}},t.prototype.touched_group=function(e){var t=this.getTouchedGroupVector(e.name);this.can_put_selectBottomCardList_to_group(t)&&(this.put_selectBottomCardList_to_group(t),this.completion_less_bottomCardList())},t.prototype.completion_less_bottomCardList=function(){0<this.bottomCardList.length&&this.bottomCardList.length<=5&&(this.completion(0,3),this.completion(1,5),this.completion(2,5))},t.prototype.completion=function(e,t){var n=this.get_null_putBottomCardCount(this.cardTypeUtilList[e].cardList);if(t>=n&&this.bottomCardList.length==n){for(var r=(this.cardGroup.getChildByName("putCardGroup"+e+"_0"),0);r<this.bottomCardList.length;r++)this.add_bottomCard_from_selectBottomCardList(this.bottomCardList[r]);if(this.can_put_selectBottomCardList_to_group(new egret.Point(0,e)))this.put_selectBottomCardList_to_group(new egret.Point(0,e));else for(var a=0;a<this.bottomCardList.length;a++)this.remove_bottomCard_from_selectBottomCardList(this.bottomCardList[a]);this.refreshBottomCardList()}},t.prototype.remove_putBottomCardList_to_bottomCardList=function(e,t){for(var n=this.cardTypeUtilList[t].cardList,r=0;r<e.length;r++)if(null!=e[r]){this.bottomCardList.push(e[r]);var a=n.indexOf(e[r]);n[a]=null,this.cardTypeUtilList[t].weightPercent=null,this.refresh_cardType_image(CardTypeEnum.WU_LONG,t,!1),this.is_show_complete_button()||(this.putCompleteGroupButton.visible=!1)}n.sort(this.sortByBottomCard),this.refreshBottomCardList(),this.refresh_putBottomCardList(t),this.cardTypePromptLogic=new CardTypePromptLogic(this.bottomCardList),this.refreshCardTypeButtonDataGroup(this.cardTypePromptLogic.cardTypeList)},t.prototype.can_put_selectBottomCardList_to_group=function(e){var t=e.y,n=this.selectBottomCardList,r=this.get_withoutNull_putBottomCardList(this.cardTypeUtilList[t].cardList),a=n.length+r.length;if(a>this.get_group_maxCount(t))return!1;if(a==this.get_group_maxCount(t)){var o=this.selectBottomCardList.concat(r);if(this.is_selectBottomCardList_reserve(o,t))return!1}return!0},t.prototype.is_selectBottomCardList_reserve=function(e,t){var n=(new DecideCardTypeLogic).decideCardType(e);return this.is_reserve(n,t)},t.prototype.is_reserve=function(e,t){if(0==t){var n=this.cardTypeUtilList[1].weightPercent;if(null!=n&&e.x>n.x)return this.reserve_image_animation(1,2),!0;if(null!=n&&e.x==n.x&&e.y>n.y)return this.reserve_image_animation(1,2),!0;var r=this.cardTypeUtilList[2].weightPercent;if(null!=r&&e.x>r.x)return this.reserve_image_animation(1,3),!0;if(null!=r&&e.x==r.x&&e.y>r.y)return this.reserve_image_animation(1,3),!0}if(1==t){var a=this.cardTypeUtilList[0].weightPercent;if(null!=a&&null!=a&&e.x<a.x)return this.reserve_image_animation(1,2),!0;if(null!=a&&e.x==a.x&&e.y<a.y)return this.reserve_image_animation(1,2),!0;var r=this.cardTypeUtilList[2].weightPercent;if(null!=r&&null!=r&&e.x>r.x)return this.reserve_image_animation(2,3),!0;if(null!=r&&e.x==r.x&&e.y>r.y)return this.reserve_image_animation(1,2),!0}if(2==t){var a=this.cardTypeUtilList[0].weightPercent;if(null!=a&&e.x<a.x)return this.reserve_image_animation(1,3),!0;if(null!=a&&e.x==a.x&&e.y<a.y)return this.reserve_image_animation(1,3),!0;var n=this.cardTypeUtilList[1].weightPercent;if(null!=n&&e.x<n.x)return this.reserve_image_animation(2,3),!0;if(null!=n&&e.x==n.x&&e.y<n.y)return this.reserve_image_animation(2,3),!0}},t.prototype.reserve_image_animation=function(e,t){this.reserveImage.source="reserverImage_"+e+t+"_png",egret.Tween.removeTweens(this.reserveImage),this.reserveImage.alpha=0,egret.Tween.get(this.reserveImage,{loop:!1}).to({alpha:1},500).wait(2e3).to({alpha:0},500)},t.prototype.get_group_maxCount=function(e){switch(e){case 0:return 3;case 1:return 5;case 2:return 5}},t.prototype.get_withoutNull_putBottomCardList=function(e){for(var t=new Array,n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t},t.prototype.get_null_putBottomCardCount=function(e){for(var t=0,n=0;n<e.length;n++)null==e[n]&&t++;return t},t.prototype.put_selectBottomCardList_to_group=function(e){var t=e.y,n=this.selectBottomCardList;if(0!=n.length){for(var r=this.cardTypeUtilList[t].cardList,a=r.indexOf(null),o=0;o<n.length;o++){var i=n[o];r[o+a]=n[o],i.selected=!1;var s=this.bottomCardList.indexOf(i);this.bottomCardList.splice(s,1)}if(this.selectBottomCardList=new Array,this.refresh_putBottomCardList(t),this.refreshBottomCardList(),this.cardTypePromptLogic=new CardTypePromptLogic(this.bottomCardList),this.refreshCardTypeButtonDataGroup(this.cardTypePromptLogic.cardTypeList),-1==r.indexOf(null)){var l=(new DecideCardTypeLogic).decideCardType(r);this.cardTypeUtilList[t].weightPercent=l,this.refresh_cardType_image(l.x,t)}this.is_show_complete_button()&&(this.putCompleteGroupButton.visible=!0)}},t.prototype.is_show_complete_button=function(){var e=!1,t=this.get_null_putBottomCardCount(this.cardTypeUtilList[0].cardList),n=this.get_null_putBottomCardCount(this.cardTypeUtilList[1].cardList),r=this.get_null_putBottomCardCount(this.cardTypeUtilList[2].cardList);return 0==t&&0==n&&0==r&&(e=!0),e},t.prototype.refresh_putBottomCardList=function(e){var t=this.cardTypeUtilList[e].cardList;t.sort(this.sortByBottomCard);for(var n=0;n<t.length;n++)if(null!=t[n]){var r=this.cardGroup.getChildByName("putCardGroup"+e+"_"+n);this.bottomCard_animation(t[n],r.x,r.y,.8,.8)}},t.prototype.isTouchedBottomCard=function(e){return e>=this.bottomCardList_startY+BottomCard.SELECT_SPACE_Y?!0:!1},t.prototype.getTouchedGroupVector=function(e){var t=e.split("putCardGroup")[1].split("_");return new egret.Point(parseInt(t[1]),parseInt(t[0]))},t.prototype.refreshBottomCardList=function(){var e=this.bottomCardList;e.sort(this.sortByBottomCard);for(var t=0;t<e.length;t++){var n=this.getBottomCardPosition(t);this.isTouchedBottomCard(e[t].y)&&(n.y=e[t].y),this.bottomCard_animation(e[t],n.x,n.y,1,1)}},t.prototype.refreshCardTypeButtonDataGroup=function(e){var t=this;e.forEach(function(e,n){var r=t.cardTypeButtonDataGroup.getChildByName(n.toString());r.canEnabled=0==e.length?!1:!0})},t.prototype.refresh_cardType_image=function(e,t,n){void 0===n&&(n=!0);var r=Comman.getCardTypeImageName(e);switch(n||(r=""),t){case 0:this.beforeCardTypeImage.source=r;break;case 1:this.centerCardTypeImage.source=r;break;case 2:this.afterCardTypeImage.source=r}},t.prototype.cardUtilListToBottomCardList=function(e){e.sort(this.sortByCardUtil);for(var t=0;t<e.length;t++){var n=new BottomCard;n.x=this.bottomCardList_startX,n.y=this.bottomCardList_startY,this.cardGroup.addChild(n),this.bottomCardList.push(n),n.cardUtil=e[t]}this.refreshBottomCardList()},t.prototype.getBottomCardPosition=function(e){var t=this.bottomCardList_startX+e*(this.bottomCard_realWidth+this.bottomCard_spaceH),n=this.bottomCardList_startY;return new egret.Point(t,n)},t.prototype.bottomCard_animation=function(e,t,n,r,a){e.touchEnabled=!1,egret.Tween.removeTweens(e),egret.Tween.get(e,{loop:!1}).to({x:t,y:n,scaleX:r,scaleY:a},this.bottomCard_animation_time).call(this.bottomCard_animation_complete,this,[e,t,n])},t.prototype.bottomCard_animation_complete=function(e,t,n){e.x=t,e.y=n,e.touchEnabled=!0},t.prototype.sortByBottomCard=function(e,t){if(null==e)return 1;if(null==t)return-1;var n=e.cardUtil,r=t.cardUtil;return n.cardValue>r.cardValue?-1:n.cardValue<r.cardValue?1:n.cardColor>=r.cardColor?-1:1},t.prototype.sortByCardUtil=function(e,t){return e.cardValue>t.cardValue?-1:e.cardValue<t.cardValue?1:e.cardColor>=t.cardColor?-1:1},t}(MessageBoxLayerBase);__reflect(SCardBox.prototype,"SCardBox");var SCardTypeButtonItemRenderer=function(e){function t(){var t=e.call(this)||this;return t._canEnabled=!0,t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.cardTypeEnum=e,this.name=this.cardTypeEnum.toString();var t=this.swtichCardType(e);this.cardTypeImage.source=t},Object.defineProperty(t.prototype,"canEnabled",{get:function(){return this._canEnabled},set:function(e){return e?(this.touchEnabled=!0,void(this.cardTypeBgImage.source="button_blue2_png")):e?void 0:(this.touchEnabled=!1,void(this.cardTypeBgImage.source="button_black_png"))},enumerable:!0,configurable:!0}),t.prototype.swtichCardType=function(e){switch(e){case CardTypeEnum.DUI_ZI:return"duizi_image_png";case CardTypeEnum.LIANG_DUI:return"liangdui_image_png";
case CardTypeEnum.SAN_TIAO:return"santiao_image_png";case CardTypeEnum.SHUN_ZI:return"shunzi_image_png";case CardTypeEnum.TONG_HUA:return"tonghua_image_png";case CardTypeEnum.HU_LU:return"hulu_image_png";case CardTypeEnum.TIE_ZHI:return"zhadan_image_png";case CardTypeEnum.TONG_HUA_SHUN:return"tonghuashun_image_png"}},t}(CWTFrameWork.ItemRendererBase);__reflect(SCardTypeButtonItemRenderer.prototype,"SCardTypeButtonItemRenderer");var CardTypePromptLogic=function(){function e(e){this.cardTypeButtonList=[2e5,3e5,4e5,5e5,6e5,7e5,8e5,9e5],this.cardTypeList=new Map,this.cardValueList=[2,3,4,5,6,7,8,9,10,11,12,13,14],this.cardColorList=[1,2,3,4],this.currentSelectCardTypeIndex=0,this.bottomCardList=e,this.initializeCardTypeList(),this.calculateCardType(e.concat().sort(this.sortByBottomCard))}return e.prototype.initializeCardTypeList=function(){for(var e=this.cardTypeButtonList,t=0;t<e.length;t++)this.cardTypeList.set(e[t],new Array)},e.prototype.calculateCardType=function(e){for(var t=new Map,n=new Map,r=0;r<e.length;r++){var a=e[r].cardUtil.cardValue,o=e[r].cardUtil.cardColor,i=t.get(a);null==i&&(i=new Array,t.set(a,i));var s=n.get(o);null==s&&(s=new Array,n.set(o,s)),i.push(e[r]),s.push(e[r])}var l=this.cardTypeList.get(CardTypeEnum.DUI_ZI),c=this.cardTypeList.get(CardTypeEnum.SAN_TIAO),u=this.cardTypeList.get(CardTypeEnum.TIE_ZHI),m=this;t.forEach(function(e,t){if(2==e.length){var n=m.createDuiZiCardTypeUtilArray(e);l=l.concat(n),m.cardTypeList.set(CardTypeEnum.DUI_ZI,l)}if(3==e.length){var r=new CardTypeUtil(e,null);r.weightPercent=(new DecideCardTypeLogic).calculateWeightPercent(CardTypeEnum.SAN_TIAO,r.cardList),c.push(r),m.cardTypeList.set(CardTypeEnum.SAN_TIAO,c);var n=m.createDuiZiCardTypeUtilArray(e);l=l.concat(n),m.cardTypeList.set(CardTypeEnum.DUI_ZI,l)}if(4==e.length){var a=new CardTypeUtil(e,null);a.weightPercent=(new DecideCardTypeLogic).calculateWeightPercent(CardTypeEnum.TIE_ZHI,a.cardList),u.push(a);var o=m.createSanTiaoCardTypeUtilArray(e);c=c.concat(o),m.cardTypeList.set(CardTypeEnum.SAN_TIAO,c);var n=m.createDuiZiCardTypeUtilArray(e);l=l.concat(n),m.cardTypeList.set(CardTypeEnum.DUI_ZI,l)}});var d=this.cardTypeList.get(CardTypeEnum.TONG_HUA);n.forEach(function(e,t){if(e.length>=5){d=m.cardTypeList.get(CardTypeEnum.TONG_HUA);var n=m.createTongHuaCardTypeUtilArray(e);d=d.concat(n),m.cardTypeList.set(CardTypeEnum.TONG_HUA,d)}});var h=this.createLiangDuiCardTypeUtilArray(l);this.cardTypeList.set(CardTypeEnum.LIANG_DUI,h);var p=this.createShunZiCardTypeUtilArray(e);this.cardTypeList.set(CardTypeEnum.SHUN_ZI,p),d=this.cardTypeList.get(CardTypeEnum.TONG_HUA),p=this.cardTypeList.get(CardTypeEnum.SHUN_ZI);var C=this.createTongHuaShunCardTypeUtil(p,d);this.cardTypeList.set(CardTypeEnum.TONG_HUA_SHUN,C);var _=this.createHuLuCardTypeUtilArray(l,c);this.cardTypeList.set(CardTypeEnum.HU_LU,_)},e.prototype.createDuiZiCardTypeUtilArray=function(e){for(var t=new Array,n=0;n<e.length-1;n++)for(var r=n+1;r<e.length;r++){var a=new CardTypeUtil;a.cardList.push(e[n]),a.cardList.push(e[r]),a.weightPercent=(new DecideCardTypeLogic).calculateWeightPercent(CardTypeEnum.DUI_ZI,a.cardList),t.push(a)}return t},e.prototype.createLiangDuiCardTypeUtilArray=function(e){for(var t=new Array,n=0;n<e.length;n++)for(var r=e[n].cardList[0].cardUtil,a=n;a<e.length;a++){var o=e[a].cardList[0].cardUtil;if(r.cardValue!=o.cardValue){var i=new CardTypeUtil;i.cardList=e[n].cardList.concat(e[a].cardList),i.weightPercent=(new DecideCardTypeLogic).calculateWeightPercent(CardTypeEnum.LIANG_DUI,i.cardList),t.push(i)}}return t},e.prototype.createSanTiaoCardTypeUtilArray=function(e){for(var t=new Array,n=0;n<e.length-2;n++)for(var r=n+1;r<e.length-1;r++)for(var a=r+1;a<e.length;a++){var o=new CardTypeUtil;o.cardList.push(e[n]),o.cardList.push(e[r]),o.cardList.push(e[a]),o.weightPercent=(new DecideCardTypeLogic).calculateWeightPercent(CardTypeEnum.SAN_TIAO,o.cardList),t.push(o)}return t},e.prototype.createTongHuaCardTypeUtilArray=function(e){for(var t=new Array,n=0;n<e.length-4;n++)for(var r=n+1;r<e.length-3;r++)for(var a=r+1;a<e.length-2;a++)for(var o=a+1;o<e.length-1;o++)for(var i=o+1;i<e.length;i++){var s=new CardTypeUtil([e[i],e[o],e[a],e[r],e[n]],null);s.weightPercent=(new DecideCardTypeLogic).calculateWeightPercent(CardTypeEnum.TONG_HUA,s.cardList),t.push(s)}return t},e.prototype.createShunZiCardTypeUtilArray=function(e){for(var t=new Array,n=0;n<e.length-4;n++)for(var r=n+1;r<e.length-3;r++)if(e[r].cardUtil.cardValue-e[n].cardUtil.cardValue==1)for(var a=r+1;a<e.length-2;a++)if(e[a].cardUtil.cardValue-e[r].cardUtil.cardValue==1)for(var o=a+1;o<e.length-1;o++)if(e[o].cardUtil.cardValue-e[a].cardUtil.cardValue==1)for(var i=o+1;i<e.length;i++){var s=e[i].cardUtil,l=e[o].cardUtil;if(s.cardValue-l.cardValue==1||s.cardValue-l.cardValue==9){var c=new CardTypeUtil([e[i],e[o],e[a],e[r],e[n]],null);c.weightPercent=(new DecideCardTypeLogic).calculateWeightPercent(CardTypeEnum.SHUN_ZI,c.cardList),t.push(c)}}return t},e.prototype.createHuLuCardTypeUtilArray=function(e,t){for(var n=new Array,r=0;r<t.length;r++)for(var a=t[r].cardList[0].cardUtil,o=0;o<e.length;o++){var i=e[o].cardList[0].cardUtil;if(a.cardValue!=i.cardValue){var s=new CardTypeUtil;s.cardList=t[r].cardList.concat(e[o].cardList),s.weightPercent=(new DecideCardTypeLogic).calculateWeightPercent(CardTypeEnum.HU_LU,s.cardList),n.push(s)}}return n},e.prototype.createTongHuaShunCardTypeUtil=function(e,t){for(var n=new Array,r=0;r<e.length;){for(var a=!1,o=0;o<t.length;){if(0==e.length||0==t.length)return n;for(var i=!0,s=0;s<t[o].cardList.length;s++)if(e[r].cardList[s]!=t[o].cardList[s]){i=!1;break}i?(n.push(t[o]),t[o].weightPercent=(new DecideCardTypeLogic).calculateWeightPercent(CardTypeEnum.TONG_HUA_SHUN,t[o].cardList),e.splice(r,1),t.splice(o,1),o=0,r=0,a=!0):o++}a?r=0:r++}return n},e.prototype.selectedCardType=function(e){var t=this.cardTypeList.get(e);if(0==t.length)return null;if(this.currentSelectCardTypeEnum==e){this.currentSelectCardTypeEnum=e,this.currentSelectCardTypeIndex>=t.length&&(this.currentSelectCardTypeIndex=0);var n=t[this.currentSelectCardTypeIndex].cardList;return this.currentSelectCardTypeIndex++,n}if(this.currentSelectCardTypeEnum!=e){this.currentSelectCardTypeEnum=e,this.currentSelectCardTypeIndex=0;var n=t[this.currentSelectCardTypeIndex].cardList;return this.currentSelectCardTypeIndex++,n}},e.prototype.sortByBottomCard=function(e,t){return null==e?-1:null==t?1:e.cardUtil.cardValue>t.cardUtil.cardValue?1:e.cardUtil.cardValue<t.cardUtil.cardValue?-1:e.cardUtil.cardColor>t.cardUtil.cardColor?1:e.cardUtil.cardColor<t.cardUtil.cardColor?-1:void 0},e}();__reflect(CardTypePromptLogic.prototype,"CardTypePromptLogic");var DecideCardTypeLogic=function(){function e(){this.cardValueWeightArray=new Array,this.card2ValueWeightArray=new Array,this.card3ValueWeightArray=new Array,this.card4ValueWeightArray=new Array,this.cardColorWeightArray=[1,2,3,4],this.initializeCardValueWightArray()}return e.prototype.initializeCardValueWightArray=function(){this.cardValueWeightArray=[1e-6,2e-6,3e-6,4e-6,1e-4,5e-4,.0025,.0125,.0625,.3121,1.5585,7.7825,38.8625],this.card2ValueWeightArray=[20,40,50,80,120,190,300,480,770,1240,2e3,3230,5220],this.card3ValueWeightArray=[200,2200,4100,6e3,7900,9800,11700,13600,15500,17400,19300,21200,32100],this.card4ValueWeightArray=[2e3,4e3,6e3,8e3,1e4,12e3,14e3,16e3,18e3,2e4,22e3,24e3,26e3]},e.prototype.decideCardType=function(e){var t=null,n=e.length;if(3==n)return t=this.SanTiaoCardTypeDecide(e),null!=t?t:(t=this.LiangDuiCardTypeDecide(e),null!=t?t:(t=this.DuiZiCardTypeDecide(e),null!=t?t:(t=this.WuLongCardTypeDecide(e,n),null!=t?t:t)));if(5==n){if(t=this.TongHuaShunCardTypeDecide(e),null!=t)return t;if(t=this.TieZhiCardTypeDecide(e),null!=t)return t;if(t=this.HuLuCardTypeDecide(e),null!=t)return t;if(t=this.TongHuaCardTypeDecide(e),null!=t)return t;if(t=this.ShunZiCardTypeDecide(e),null!=t)return t;if(t=this.SanTiaoCardTypeDecide(e),null!=t)return t;if(t=this.LiangDuiCardTypeDecide(e),null!=t)return t;if(t=this.DuiZiCardTypeDecide(e),null!=t)return t;if(t=this.WuLongCardTypeDecide(e,n),null!=t)return t}return null},e.prototype.WuLongCardTypeDecide=function(e,t){var n=this.createCardValuelist(e),r=null,a=0;return n.forEach(function(e,t){1==e.length&&a++}),a==t&&(r=this.calculateWeight(CardTypeEnum.WU_LONG,n)),r},e.prototype.DuiZiCardTypeDecide=function(e){var t=this.createCardValuelist(e),n=null,r=0;return t.forEach(function(e,t){2==e.length&&r++}),1==r&&(n=this.calculateWeight(CardTypeEnum.DUI_ZI,t)),n},e.prototype.LiangDuiCardTypeDecide=function(e){var t=this.createCardValuelist(e),n=null,r=0,a=0;return t.forEach(function(e,t){2==e.length&&r++,1==e.length&&a++}),2==r&&1==a&&(n=this.calculateWeight(CardTypeEnum.LIANG_DUI,t)),n},e.prototype.SanTiaoCardTypeDecide=function(e){var t=this.createCardValuelist(e),n=null,r=0;return t.forEach(function(e,t){3==e.length&&r++}),1==r&&(n=this.calculateWeight(CardTypeEnum.SAN_TIAO,t)),n},e.prototype.ShunZiCardTypeDecide=function(e){var t=this.createCardValuelist(e);e=e.concat().sort(this.sortByBottomCard);for(var n=!0,r=null,a=0,o=0;o<e.length-1;o++){var i=e[o].cardUtil,s=e[o+1].cardUtil;s.cardColor==i.cardColor&&a++;var l=s.cardValue-i.cardValue;if(9==l&&14!=s.cardValue){n=!1;break}if(1!=l&&9!=l){n=!1;break}}return a>=4&&(n=!1),n&&(r=this.calculateWeight(CardTypeEnum.SHUN_ZI,t)),r},e.prototype.TongHuaCardTypeDecide=function(e){for(var t=this.createCardValuelist(e),n=!0,r=null,a=0,o=0;o<e.length-1;o++){var i=e[o].cardUtil,s=e[o+1].cardUtil;if(i.cardColor!=s.cardColor){s.cardValue-i.cardValue==1&&a++,n=!1;break}}return a>=4&&(n=!1),n&&(r=this.calculateWeight(CardTypeEnum.TONG_HUA,t)),r},e.prototype.HuLuCardTypeDecide=function(e){var t=this.createCardValuelist(e),n=null,r=0,a=0;return t.forEach(function(e,t){3==e.length&&r++,2==e.length&&a++}),1==r&&1==a&&(n=this.calculateWeight(CardTypeEnum.HU_LU,t)),n},e.prototype.TieZhiCardTypeDecide=function(e){var t=this.createCardValuelist(e),n=null,r=0,a=0;return t.forEach(function(e,t){4==e.length&&r++,1==e.length&&a++}),1==r&&1==a&&(n=this.calculateWeight(CardTypeEnum.TIE_ZHI,t)),n},e.prototype.TongHuaShunCardTypeDecide=function(e){var t=this.createCardValuelist(e);e=e.concat().sort(this.sortByBottomCard);for(var n=!0,r=null,a=0;a<e.length-1;a++){var o=e[a].cardUtil,i=e[a+1].cardUtil,s=i.cardValue-o.cardValue;if(9==s&&14!=i.cardValue){n=!1;break}if(o.cardColor!=i.cardColor||1!=s&&9!=s){n=!1;break}}return n&&(r=this.calculateWeight(CardTypeEnum.TONG_HUA_SHUN,t)),r},e.prototype.calculateWeight=function(e,t){var n=new egret.Point,r=this;return t.forEach(function(e,t){for(var a=0;a<e.length;a++){var o=e[a].cardUtil;1==e.length&&(n.x+=r.cardValueWeightArray[o.cardValue-2],n.y+=r.cardValueWeightArray[o.cardValue-2]*r.cardColorWeightArray[e[a].cardUtil.cardColor-1]),2==e.length&&(n.x+=r.card2ValueWeightArray[o.cardValue-2],n.y+=r.card2ValueWeightArray[o.cardValue-2]),3==e.length&&(n.x+=3*r.card3ValueWeightArray[o.cardValue-2],n.y+=r.card3ValueWeightArray[o.cardValue-2]),4==e.length&&(n.x+=r.card4ValueWeightArray[o.cardValue-2],n.y+=r.card4ValueWeightArray[o.cardValue-2])}}),n.x/=100,n.x+=e,n.y+=e,n},e.prototype.calculateWeightPercent=function(e,t){var n=this.createCardValuelist(t);return this.calculateWeight(e,n)},e.prototype.createCardValuelist=function(e){for(var t=new Map,n=0;n<e.length;n++){var r=e[n].cardUtil,a=t.get(r.cardValue);null==a&&(a=new Array,t.set(r.cardValue,a)),a.push(e[n])}return t},e.prototype.sortByBottomCard=function(e,t){return null==e?-1:null==t?1:e.cardUtil.cardValue>t.cardUtil.cardValue?1:e.cardUtil.cardValue<t.cardUtil.cardValue?-1:e.cardUtil.cardColor>t.cardUtil.cardColor?1:e.cardUtil.cardColor<t.cardUtil.cardColor?-1:void 0},e}();__reflect(DecideCardTypeLogic.prototype,"DecideCardTypeLogic");var SpecialCardTypeLogic=function(){function e(){}return e.prototype.decide=function(e){var t=this.getCardUtilList(e);return this.is_ZHI_ZUN_QING_LONG(t)?CardTypeEnum.ZHI_ZUN_QING_LONG:this.is_YI_TIAO_LONG(t)?CardTypeEnum.YI_TIAO_LONG:this.is_SHI_ER_HUANG_ZU(t)?CardTypeEnum.SHI_ER_HUANG_ZU:this.is_SAN_TONG_HUA_SHUN(t)?CardTypeEnum.SAN_TONG_HUA_SHUN:this.is_SAN_TAO_ZHA_DAN(t)?CardTypeEnum.SAN_TAO_ZHA_DAN:this.is_QUAN_DA(t)?CardTypeEnum.QUAN_DA:this.is_QUAN_XIAO(t)?CardTypeEnum.QUAN_XIAO:this.is_COU_YI_SE(t)?CardTypeEnum.COU_YI_SE:this.is_SI_TAO_SAN_TIAO(t)?CardTypeEnum.SI_TAO_CHONG_SAN:this.is_WU_DUI_SAN_TIAO(t)?CardTypeEnum.WU_DUI_CHONG_SAN:this.is_LIU_DUI_BAN(t)?CardTypeEnum.LIU_DUI_BAN:this.is_SAN_TONG_HUA(t)?CardTypeEnum.SAN_TONG_HUA:this.is_SAN_SHUN_ZI(t.concat())?CardTypeEnum.SAN_SHUN_ZI:null},e.prototype.decideByCardUtilList=function(e){return this.is_ZHI_ZUN_QING_LONG(e)?CardTypeEnum.ZHI_ZUN_QING_LONG:this.is_YI_TIAO_LONG(e)?CardTypeEnum.YI_TIAO_LONG:this.is_SHI_ER_HUANG_ZU(e)?CardTypeEnum.SHI_ER_HUANG_ZU:this.is_SAN_TONG_HUA_SHUN(e)?CardTypeEnum.SAN_TONG_HUA_SHUN:this.is_SAN_TAO_ZHA_DAN(e)?CardTypeEnum.SAN_TAO_ZHA_DAN:this.is_QUAN_DA(e)?CardTypeEnum.QUAN_DA:this.is_QUAN_XIAO(e)?CardTypeEnum.QUAN_XIAO:this.is_COU_YI_SE(e)?CardTypeEnum.COU_YI_SE:this.is_SI_TAO_SAN_TIAO(e)?CardTypeEnum.SI_TAO_CHONG_SAN:this.is_WU_DUI_SAN_TIAO(e)?CardTypeEnum.WU_DUI_CHONG_SAN:this.is_LIU_DUI_BAN(e)?CardTypeEnum.LIU_DUI_BAN:this.is_SAN_TONG_HUA(e)?CardTypeEnum.SAN_TONG_HUA:this.is_SAN_SHUN_ZI(e.concat())?CardTypeEnum.SAN_SHUN_ZI:null},e.prototype.is_ZHI_ZUN_QING_LONG=function(e){var t=this.getColorList(e),n=this.getValueList(e);return 1==t.size&&13==n.size?!0:!1},e.prototype.is_YI_TIAO_LONG=function(e){var t=this.getColorList(e),n=this.getValueList(e);return t.size>1&&13==n.size?!0:!1},e.prototype.is_SHI_ER_HUANG_ZU=function(e){var t=this.getValueList(e,11,14),n=0;return t.forEach(function(e,t){n+=e.length}),13==n?!0:!1},e.prototype.is_QUAN_DA=function(e){var t=this.getValueList(e,8,14),n=0;return t.forEach(function(e,t){n+=e.length}),13==n?!0:!1},e.prototype.is_QUAN_XIAO=function(e){var t=this.getValueList(e,2,8),n=0;return t.forEach(function(e,t){n+=e.length}),13==n?!0:!1},e.prototype.is_SAN_TAO_ZHA_DAN=function(e){var t=this.getValueList(e),n=0;return t.forEach(function(e,t){4==e.length&&n++}),3==n?!0:!1},e.prototype.is_WU_DUI_SAN_TIAO=function(e){var t=this.getValueList(e),n=0,r=0;return t.forEach(function(e,t){2==e.length&&n++,3==e.length&&r++,4==e.length&&(n+=2)}),5==n&&1==r?!0:!1},e.prototype.is_SI_TAO_SAN_TIAO=function(e){var t=this.getValueList(e),n=0;return t.forEach(function(e,t){3==e.length&&n++}),4==n?!0:!1},e.prototype.is_LIU_DUI_BAN=function(e){var t=this.getValueList(e),n=0;return t.forEach(function(e,t){2==e.length&&n++,4==e.length&&(n+=2)}),6==n?!0:!1},e.prototype.is_COU_YI_SE=function(e){var t=this.getColorList(e);return t.size>2?!1:null!=t.get(1)&&null!=t.get(3)&&t.get(1).length>0&&t.get(3).length>0?!0:null!=t.get(2)&&null!=t.get(4)&&t.get(2).length>0&&t.get(4).length>0?!0:void 0},e.prototype.is_SAN_TONG_HUA=function(e){var t=this.getColorList(e);if(3==t.size){var n=!0;return t.forEach(function(e,t){5!=e.length&&3!=e.length&&(n=!1)}),n}if(2==t.size){var r=!0;return t.forEach(function(e,t){5!=e.length&&3!=e.length&&8!=e.length&&10!=e.length&&(r=!1)}),r}},e.prototype.is_SAN_SHUN_ZI=function(e){var t=this.createShunZiCardTypeUtilArray(e);if(5!=t.length)return!1;var n=this.splice_cardUtil(e,t),r=this.createShunZiCardTypeUtilArray(n);if(5!=r.length)return!1;var a=this.splice_cardUtil(n,r),o=this.createSAN_ShunZiCardTypeUtilArray(a);return 3==o.length?!0:void 0},e.prototype.is_SAN_TONG_HUA_SHUN=function(e){var t=this.getColorList(e);if(3==t.size){var n=!0;if(t.forEach(function(e,t){5!=e.length&&3!=e.length&&(n=!1)}),n){var r=this;t.forEach(function(e,t){5==e.length&&5!=r.createShunZiCardTypeUtilArray(e).length&&(n=!1),3==e.length&&3!=r.createSAN_ShunZiCardTypeUtilArray(e).length&&(n=!1)})}return n}if(2==t.size){var a=!0;if(t.forEach(function(e,t){5!=e.length&&3!=e.length&&8!=e.length&&10!=e.length&&(a=!1)}),a){var o=this;t.forEach(function(t,n){if(5==t.length&&5!=o.createShunZiCardTypeUtilArray(t).length&&(a=!1),3==t.length&&3!=o.createSAN_ShunZiCardTypeUtilArray(t).length&&(a=!1),8==t.length){var r=o.createShunZiCardTypeUtilArray(e);if(5==r.length){var i=o.splice_cardUtil(e,r),s=o.createSAN_ShunZiCardTypeUtilArray(i);3!=s.length&&(a=!1)}else a=!1}if(10==t.length){var r=o.createShunZiCardTypeUtilArray(e);if(5==r.length){var i=o.splice_cardUtil(e,r),s=o.createShunZiCardTypeUtilArray(i);5!=s.length&&(a=!1)}else a=!1}})}return a}},e.prototype.splice_cardUtil=function(e,t){for(;t.length>0;)for(var n=0;n<e.length;){if(0==t.length)return e;e[n].cardValue==t[0].cardValue&&e[n].cardColor==t[0].cardColor?(e.splice(n,1),t.shift(),n=0):n++}return e},e.prototype.createShunZiCardTypeUtilArray=function(e){e.sort(this.sortByCardUtil);for(var t=(new Array,new Array),n=0;n<e.length-4;n++)for(var r=n+1;r<e.length-3;r++)if(e[r].cardValue-e[n].cardValue==1)for(var a=r+1;a<e.length-2;a++)if(e[a].cardValue-e[r].cardValue==1)for(var o=a+1;o<e.length-1;o++)if(e[o].cardValue-e[a].cardValue==1)for(var i=o+1;i<e.length;i++){var s=e[i],l=e[o];(s.cardValue-l.cardValue==1||s.cardValue-l.cardValue==9)&&(t=[e[i],e[o],e[a],e[r],e[n]])}return t},e.prototype.createSAN_ShunZiCardTypeUtilArray=function(e){var t=(new Array,new Array);e.sort(this.sortByCardUtil);for(var n=0;n<e.length-2;n++)for(var r=n+1;r<e.length-1;r++)if(e[r].cardValue-e[n].cardValue==1)for(var a=r+1;a<e.length;a++){var o=e[a],i=e[r];(o.cardValue-i.cardValue!=11||14==o.cardValue)&&(o.cardValue-i.cardValue==1||o.cardValue-i.cardValue==11)&&(t=[e[a],e[r],e[n]])}return t},e.prototype.getColorList=function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=4);for(var r=new Map,a=0;a<e.length;a++){var o=e[a].cardColor,i=r.get(o);o>=t&&n>=o&&(null==i&&(i=new Array,r.set(o,i)),i.push(e[a]))}return r},e.prototype.getValueList=function(e,t,n){void 0===t&&(t=2),void 0===n&&(n=14);for(var r=new Map,a=0;a<e.length;a++){var o=e[a].cardValue,i=r.get(o);o>=t&&n>=o&&(null==i&&(i=new Array,r.set(o,i)),i.push(e[a]))}return r},e.prototype.getCardUtilList=function(e){for(var t=new Array,n=0;n<e.length;n++)t.push(e[n].cardUtil);return t},e.prototype.sortByCardUtil=function(e,t){return e.cardValue>t.cardValue?1:e.cardValue<t.cardValue?-1:e.cardColor>=t.cardColor?1:-1},e}();__reflect(SpecialCardTypeLogic.prototype,"SpecialCardTypeLogic");var CardTypeUtil=function(){function e(e,t){void 0===e&&(e=new Array),void 0===t&&(t=null),this.cardList=new Array,this.cardList=e,this.weightPercent=t}return e}();__reflect(CardTypeUtil.prototype,"CardTypeUtil");var SChatBox=function(e){function t(){var t=e.call(this)||this;return t.textChatArray=new Array,t.faceChatArray=new Array,t.initialize_textChatArray(),t.initialize_faceChatArray(),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.textChatList.itemRenderer=STextChatItemRenderer,this.textChatList.dataProvider=new eui.ArrayCollection(this.textChatArray),this.faceChatList.itemRenderer=SFaceChatItemRenderer,this.faceChatList.dataProvider=new eui.ArrayCollection(this.faceChatArray),this.eventListenerManager.addClientEventListener(this.selectChatTypeRadioButton.group,eui.UIEvent.CHANGE,this.onSelectChatTypeChangeHandler,this)},t.prototype.initialize_textChatArray=function(){this.textChatArray.push(new SChatUtil("大家好，很高兴见到各位！",1)),this.textChatArray.push(new SChatUtil("快点吧，我等到花儿都谢了。",2)),this.textChatArray.push(new SChatUtil("不要走，决战到天亮。",3)),this.textChatArray.push(new SChatUtil("你是帅哥还是美女？",4)),this.textChatArray.push(new SChatUtil("君子报仇，十盘不算晚。",5)),this.textChatArray.push(new SChatUtil("打错了，呜呜呜呜。",6))},t.prototype.initialize_faceChatArray=function(){for(var e=0;20>e;e++){var t=new SChatUtil("chatBox_expression"+(e+1)+"_png",e+1);this.faceChatArray.push(t)}},t.prototype.onSelectChatTypeChangeHandler=function(e){var t=e.target;this.chatViewStack.selectedIndex=t.selectedValue},t}(MessageBoxLayerBase);__reflect(SChatBox.prototype,"SChatBox");var SFaceChatItemRenderer=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.eventListenerManager.addClientEventListener(this,egret.TouchEvent.TOUCH_TAP,this.onTouchedHandler,this)},t.prototype.onTouchedHandler=function(e){var t=this.data.chatText,n=this.data.currentChatNumbers,r=SChatTypeEnum.FACE_CHAT,a=(BLLComman.gameDataController.isInSeat(),new SChatUtil(t,n,r));ChatLogic.ins.send_chat_data(a),Comman.stageBase.closeLayerCommponentsByName(egret.getQualifiedClassName(SChatBox))},t}(CWTFrameWork.ItemRendererBase);__reflect(SFaceChatItemRenderer.prototype,"SFaceChatItemRenderer");var STextChatItemRenderer=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.eventListenerManager.addClientEventListener(this,egret.TouchEvent.TOUCH_TAP,this.onTouchedHandler,this)},t.prototype.onTouchedHandler=function(e){var t=this.data.chatText,n=this.data.currentChatNumbers,r=SChatTypeEnum.TEXT_CHAT,a=new SChatUtil(t,n,r);ChatLogic.ins.send_chat_data(a),Comman.stageBase.closeLayerCommponentsByName(egret.getQualifiedClassName(SChatBox))},t}(CWTFrameWork.ItemRendererBase);__reflect(STextChatItemRenderer.prototype,"STextChatItemRenderer");var SChatUtil=function(){function e(e,t,n,r){this.chatText=e,this.currentChatNumbers=t,this.chatSeat=r,this.chatTypeEnum=n}return e}();__reflect(SChatUtil.prototype,"SChatUtil");var SHistoryBox=function(e){function t(){var t=e.call(this)||this;return t.layerAnimationTatics=new CWTFrameWork.LayerRightAnimationTatics(-280,280,0,0,200),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.textChatList.itemRenderer=SHistoryBoxItemRenderer,this.textChatList.dataProvider=new eui.ArrayCollection([null,null]),this.faceChatList.itemRenderer=SHistoryBoxItemRenderer,this.faceChatList.dataProvider=new eui.ArrayCollection([null,null,null,null]),this.eventListenerManager.addClientEventListener(this.selectChatTypeRadioButton.group,eui.UIEvent.CHANGE,this.onSelectChatTypeChangeHandler,this)},t.prototype.onSelectChatTypeChangeHandler=function(e){var t=e.target;this.chatViewStack.selectedIndex=t.selectedValue},t}(MessageBoxLayerBase);__reflect(SHistoryBox.prototype,"SHistoryBox");var SHistoryBoxItemRenderer=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(CWTFrameWork.ItemRendererBase);__reflect(SHistoryBoxItemRenderer.prototype,"SHistoryBoxItemRenderer");var SNoticeAABox=function(e){function t(t){void 0===t&&(t="");var n=e.call(this,egret.getQualifiedClassName(SNoticeABoxSkin))||this;return n.labelText="",n.labelText=BLLComman.getUserSeat(parseInt(t)).toString(),n}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.eventListenerManager.addClientEventListener(this.buttonCommponents,egret.TouchEvent.TOUCH_TAP,this.onTouchedHandler,this),this.textLabel.text="你确定要坐在"+this.labelText+"号座位上吗？"},t.prototype.onTouchedHandler=function(e){SitDownLogic.ins.send_sitDown_data(parseInt(this.labelText)),Comman.stageBase.closeLayerCommponents(this)},t}(MessageBoxLayerBase);__reflect(SNoticeAABox.prototype,"SNoticeAABox");var SNoticeABox=function(e){function t(t){void 0===t&&(t="");var n=e.call(this)||this;return n.labelText="",n.labelText=t,n}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.eventListenerManager.addClientEventListener(this.buttonCommponents,egret.TouchEvent.TOUCH_TAP,this.onTouchedHandler,this),this.textLabel.text=this.labelText},t.prototype.onTouchedHandler=function(e){Comman.stageBase.closeLayerCommponents(this)},t}(MessageBoxLayerBase);__reflect(SNoticeABox.prototype,"SNoticeABox");var SNoticeADBox=function(e){function t(t){var n=e.call(this,egret.getQualifiedClassName(SNoticeABoxSkin))||this;return n.maskBox=new MaskBox(n,!0,0,!1),n.noticeText=t,n}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.okButton.bgImageSource="button_blue_png",this.okButton.contentImageSource="button_ok_png",this.noticeLabel.text=this.noticeText,this.closeButton.visible=!1,this.eventListenerManager.addClientEventListener(this.okButton,egret.TouchEvent.TOUCH_TAP,this.onOKButtonTouchedHandler,this)},t.prototype.onOKButtonTouchedHandler=function(e){BLLComman.hallManager.game_refresh_send()},t}(MessageBoxLayerBase);__reflect(SNoticeADBox.prototype,"SNoticeADBox");var SNoticeBABox=function(e){function t(t){return void 0===t&&(t=""),e.call(this,t)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.cancelButton.bitmapTextLabelText="取消",this.closeButton.visible=!1},t.prototype.onAgreeButtonTouchedHandler=function(e){BackHomeLogic.ins.send_backHome_data(null),Comman.stageBase.closeLayerCommponents(this)},t.prototype.onCancelButtonTouchedHandler=function(e){Comman.stageBase.closeLayerCommponents(this)},t}(SNoticeBBox);__reflect(SNoticeBABox.prototype,"SNoticeBABox");var SNoticeBBBox=function(e){function t(t){return void 0===t&&(t=""),e.call(this,t)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.closeButton.visible=!1,this.agreeButton.bitmapTextLabelText="确定",this.cancelButton.bitmapTextLabelText="取消"},t.prototype.onAgreeButtonTouchedHandler=function(e){DisMissRoomLogic.ins.send_dismissRoom_data2(null),Comman.stageBase.closeLayerCommponents(this)},t.prototype.onCancelButtonTouchedHandler=function(e){Comman.stageBase.closeLayerCommponents(this)},t}(SNoticeBBox);__reflect(SNoticeBBBox.prototype,"SNoticeBBBox");var SReadyStatusEnum;!function(e){e[e.NOT_READY=0]="NOT_READY",e[e.READY=1]="READY"}(SReadyStatusEnum||(SReadyStatusEnum={}));var SNoticeBCBox=function(e){function t(t,n,r){void 0===t&&(t="");var a=e.call(this,t)||this;return a.maskBox=new MaskBox(a,!0,1,!1),a.locationLayerName="D_LAYER",a.cardTypeEnum=n,a.cardUtilList=r,a}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.closeButton.visible=!1,this.agreeButton.bitmapTextLabelText="确定",this.cancelButton.bitmapTextLabelText="取消"},t.prototype.onAgreeButtonTouchedHandler=function(e){var t=new Map;t.set("before",this.cardUtilList.splice(0,3)),t.set("center",this.cardUtilList.splice(0,5)),t.set("after",this.cardUtilList.splice(0,5)),PlayCardLogic.ins.send_playCard_complete_data(t,this.cardTypeEnum),Comman.stageBase.closeLayerCommponents(this)},t.prototype.onCancelButtonTouchedHandler=function(e){Comman.stageBase.closeLayerCommponents(this)},t}(SNoticeBBox);__reflect(SNoticeBCBox.prototype,"SNoticeBCBox");var SNoticeCBox=function(e){function t(t){var n=e.call(this)||this;return n.intervalName=0,n.maxShowCount=3,n.tickTime=1e3,n.maskBox=new MaskBox(n,!0,.8,!1),n.seatDataUtilList=t,n.locationLayerName="J_LAYER",n}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.agreeGroupButton.bgImageSource="button_blue_png",this.agreeGroupButton.contentImageSource="button_agree_png",this.refuseGroupButton.bgImageSource="button_blue_png",this.refuseGroupButton.contentImageSource="button_refuse_png",this.timeCommponents.currentTimeCount=BLLComman.gameDataController.disMissRoomCurrentTimeCount;var t=ClientEventManager.ins.createClientEventType(ClientEventEnum.DISMISS_ROOM_FALID);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,t,this.onDisMissRoomFaildHandler,this);var n=ClientEventManager.ins.createClientEventType(ClientEventEnum.DISMISS_ROOM_SUCCESS);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,n,this.onDisMissRoomSuccessHandler,this);var r=ClientEventManager.ins.createClientEventTypeByPositionEnum(ClientEventEnum.OTHER_PLAYER_DISMISS_ROOM_OPERATE,PositionEnum.BOTTOM);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,r,this.onDisMissRoomOperateHandler,this),this.eventListenerManager.addClientEventListener(this.agreeGroupButton,egret.TouchEvent.TOUCH_TAP,this.onAgreeGroupButtonTouchedHandler,this),this.eventListenerManager.addClientEventListener(this.refuseGroupButton,egret.TouchEvent.TOUCH_TAP,this.onRefuseGroupButtonTouchedHandler,this);var a=new Array,o=new Array;this.seatDataUtilList.forEach(function(e,t){o.push(e)}),o.sort(this.seatDataUtilListSort);for(var i=0;i<o.length;i++)a.push(o[i].playerUtil);this.playerInformationList.itemRenderer=SNoticeCBoxItemRenderer,this.playerInformationList.dataProvider=new eui.ArrayCollection(a),this.playerInformationList.validateNow();var s=this;BLLComman.gameDataController.disMissRoomOperateTypeList.forEach(function(e,t){if(e==SDisMissRoomTypeEnum.OTHER_PLAYER_AGREE_DISMISS_ROOM){t==BLLComman.gameDataController.playerUtil.systemID&&(s.buttonGroup.visible=!1,s.operateTypeLabel.text="请等待其他玩家同意！");var n=BLLComman.gameDataController.roomUtil.seatPlayerList.get(t.toString());if(null!=n){var r=BLLComman.getUserPositionEnum(n.seat);ClientEventManager.ins.createAndSendEventByPositionEnum(ClientEventEnum.OTHER_PLAYER_DISMISS_ROOM_OPERATE,r,e)}}}),BLLComman.gameDataController.isInSeat()==SSeatTypeEnum.WATCH&&(this.buttonGroup.visible=!1,this.operateTypeLabel.text="房间正在解散中...")},t.prototype.seatDataUtilListSort=function(e,t){var n=BLLComman.getUserPositionEnum(e.seat),r=BLLComman.getUserPositionEnum(t.seat);return n>r?1:-1},t.prototype.onRemovedFromStageHandler=function(t){e.prototype.onRemovedFromStageHandler.call(this,t),clearInterval(this.intervalName)},t.prototype.onDisMissRoomOperateHandler=function(e){this.buttonGroup.visible=!1,this.operateTypeLabel.text="请等待其他玩家同意！"},t.prototype.onDisMissRoomFaildHandler=function(e){var t=this;this.buttonGroup.visible=!1,this.showRefuseText(this.maxShowCount),this.maxShowCount--,this.intervalName=setInterval(function(){t.showRefuseText(t.maxShowCount),t.maxShowCount--,0==t.maxShowCount&&(clearInterval(t.intervalName),Comman.stageBase.closeLayerCommponents(t))},t.tickTime)},t.prototype.showRefuseText=function(e){this.operateTypeLabel.text="有玩家拒绝解散房间，窗口会在"+e+"秒后关闭!"},t.prototype.onDisMissRoomSuccessHandler=function(e){Comman.stageBase.closeLayerCommponents(this)},t.prototype.onAgreeGroupButtonTouchedHandler=function(e){DisMissRoomLogic.ins.send_dismissRoom_data3(SDisMissRoomTypeEnum.OTHER_PLAYER_AGREE_DISMISS_ROOM)},t.prototype.onRefuseGroupButtonTouchedHandler=function(e){DisMissRoomLogic.ins.send_dismissRoom_data3(SDisMissRoomTypeEnum.OTHER_PLAYER_REFUSE_DISMISS_ROOM)},t}(MessageBoxLayerBase);__reflect(SNoticeCBox.prototype,"SNoticeCBox");var SNoticeCBoxItemRenderer=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.operateTypeImage.source="";var t=this.parent.getChildIndex(this),n=ClientEventManager.ins.createClientEventTypeByPositionEnum(ClientEventEnum.OTHER_PLAYER_DISMISS_ROOM_OPERATE,t);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,n,this.onOtherPlayerDismissRoomOperateHandler,this)},t.prototype.onOtherPlayerDismissRoomOperateHandler=function(e){var t=e.msg;this.changeOperateTypeImageSource(t)},t.prototype.changeOperateTypeImageSource=function(e){return e==SDisMissRoomTypeEnum.OTHER_PLAYER_AGREE_DISMISS_ROOM?void(this.operateTypeImage.source="noticeCBox_ok_image_png"):e==SDisMissRoomTypeEnum.OTHER_PLAYER_REFUSE_DISMISS_ROOM?void(this.operateTypeImage.source="noticeCBox_cancel_image_png"):void 0},t.prototype.dataChanged=function(){this.data.nickName=Comman.splitNickName(this.data.nickName);var e=this.parent.getChildIndex(this);this.changeOperateTypeImageSource(BLLComman.gameDataController.disMissRoomOperateTypeList.get(e))},t}(CWTFrameWork.ItemRendererBase);__reflect(SNoticeCBoxItemRenderer.prototype,"SNoticeCBoxItemRenderer");var SOptionBox=function(e){function t(){var t=e.call(this)||this;return t.maskBox=new MaskBox(t,!1,0),t.x=t.anchorOffsetX+50,t.y=t.anchorOffsetY+100,t.layerAnimationTatics=new CWTFrameWork.LayerRightAnimationTatics(-235,235,0,0,0),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),BLLComman.gameDataController.roomUtil.currentRoundNumbers>0?BLLComman.gameDataController.roomUtil.roomCurrentStatusEnum=RoomCurrentStatusEnum.START:BLLComman.gameDataController.roomUtil.roomCurrentStatusEnum=RoomCurrentStatusEnum.NOT_START,this.changeRoomCurrentStatus(BLLComman.gameDataController.roomUtil.roomCurrentStatusEnum);
var t=ClientEventManager.ins.createClientEventTypeByPositionEnum(ClientEventEnum.STAND_UP_SUCCESS,PositionEnum.BOTTOM);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,t,this.onStandUpSuccessHandler,this)},t.prototype.changeRoomCurrentStatus=function(e){var t=BLLComman.gameDataController.roomUtil.watchPlayerList.get(BLLComman.gameDataController.playerUtil.systemID.toString());if(console.log(e),(null!=t||BLLComman.gameDataController.roomUtil.roomStatusEnum==SRoomStatusEnum.SHOW_CARD)&&(this.standUpGroup.alpha=.3,this.standUpGroup.touchEnabled=!1,this.standUpButton.touchEnabled=!1,this.disMissRoomButtonGroup.touchEnabled=!1,this.disMissRoomButtonGroup.alpha=.3,this.disMissRoomButton.touchEnabled=!1,this.backHomeButtonGroup.touchEnabled=!0,this.backHomeButtonGroup.alpha=1,this.backHomeButton.touchEnabled=!0),e==RoomCurrentStatusEnum.START){if(null==t)return this.backHomeButtonGroup.touchEnabled=!1,this.backHomeButtonGroup.alpha=.3,this.backHomeButton.touchEnabled=!1,this.standUpGroup.alpha=.3,this.standUpGroup.touchEnabled=!1,this.standUpButton.touchEnabled=!1,this.disMissRoomButtonGroup.touchEnabled=!0,this.disMissRoomButtonGroup.alpha=1,void(this.disMissRoomButton.touchEnabled=!0);if(null!=t)return this.backHomeButtonGroup.touchEnabled=!0,this.backHomeButtonGroup.alpha=1,this.standUpGroup.alpha=.3,this.standUpGroup.touchEnabled=!1,this.disMissRoomButtonGroup.touchEnabled=!1,void(this.disMissRoomButtonGroup.alpha=.3)}else if(e==RoomCurrentStatusEnum.NOT_START){if(console.log("not start"),null==t){this.backHomeButtonGroup.touchEnabled=!0,this.backHomeButtonGroup.alpha=1,this.standUpGroup.alpha=1,this.standUpGroup.touchEnabled=!0,this.standUpButton.touchEnabled=!0,this.disMissRoomButtonGroup.touchEnabled=!1,this.disMissRoomButtonGroup.alpha=1,this.disMissRoomButton.touchEnabled=!0;var n=BLLComman.gameDataController.roomUtil.seatPlayerList.get(BLLComman.gameDataController.playerUtil.systemID.toString());return void(n.readyStatusEnum==SReadyStatusEnum.NOT_READY&&(this.backHomeButtonGroup.touchEnabled=!1,this.backHomeButtonGroup.alpha=.3,this.backHomeButton.touchEnabled=!1))}null!=t&&console.log("in")}},t.prototype.copy_dismissRoom_button=function(e){var t=new SDisMissRoomButton;return t.bgImageSource=e.bgImageSource,t.contentImageSource="optionBox_dismissRoom_button_png",t.width=e.width,t.height=e.height,t.x=e.x,t.y=e.y,t.horizontalCenter=e.horizontalCenter,this.backHomeButton=t,t},t.prototype.onStandUpSuccessHandler=function(e){if(BLLComman.gameDataController.roomUtil.roomCurrentStatusEnum==RoomCurrentStatusEnum.START){var t=this.backHomeButton.parent;t.removeChild(this.backHomeButton),t.addChild(this.copy_backHome_button(this.backHomeButton))}},t.prototype.copy_backHome_button=function(e){var t=new SBackHomeButton;return t.bgImageSource=e.bgImageSource,t.contentImageSource="optionBox_backHome_button_png",t.width=e.width,t.height=e.height,t.x=e.x,t.y=e.y,t.horizontalCenter=e.horizontalCenter,this.backHomeButton=t,t},t}(MessageBoxLayerBase);__reflect(SOptionBox.prototype,"SOptionBox");var SRuleBox=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(MessageBoxLayerBase);__reflect(SRuleBox.prototype,"SRuleBox");var SScoreBox=function(e){function t(t){var n=e.call(this)||this;return n.maskBox=new MaskBox(n,!0,.8,!1),n.scoreBoxUtil=t,n}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.closeButton.visible=!1,this.singleScoreUtilList.itemRenderer=SScoreBoxItemRenderer,this.currentRoundNumbers=BLLComman.gameDataController.roomUtil.currentRoundNumbers;var t=this.mapListToArrayList(this.scoreBoxUtil.playerScoreList);t.sort(this.sortByScore);for(var n=0;n<t.length;n++)0==n?t[n].winTypeEnum=SWinTypeEnum.WIN:t[n].winTypeEnum=SWinTypeEnum.LOSE,t[n].winTypeEnum==SWinTypeEnum.WIN&&t[n].systemID==BLLComman.gameDataController.playerUtil.systemID?SoundManager.ins.playEffectSound("win"):SoundManager.ins.playEffectSound("lose");this.singleScoreUtilList.dataProvider=new eui.ArrayCollection(t),this.eventListenerManager.addClientEventListener(this.continueButton,egret.TouchEvent.TOUCH_TAP,this.onGameContinueHandler,this)},t.prototype.onGameContinueHandler=function(e){null!=BLLComman.gameDataController.sendSeat&&(SitDownLogic.ins.send_sitDown_data(BLLComman.gameDataController.sendSeat),BLLComman.gameDataController.sendSeat=null);var t=this.mapListToArrayList(this.scoreBoxUtil.playerScoreList),n=BLLComman.gameDataController.roomUtil;n.currentRoundNumbers==n.totalRoundNumbers&&null!=BLLComman.gameDataController.bigScoreBoxUtilList&&Comman.stageBase.openLayerCommponents(new SBigScoreBox(BLLComman.gameDataController.bigScoreBoxUtilList));for(var r=0;r<t.length;r++){var a=0,o=BLLComman.gameDataController.roomUtil.seatPlayerList.get(t[r].systemID.toString());if(null!=o){a=o.seat;var i=BLLComman.getUserPositionEnum(a);console.log("seat:"+a+"            positionEnum:"+i),ClientEventManager.ins.createAndSendEventByPositionEnum(ClientEventEnum.TOTAL_SCORE_CHANGE,i,t[r].totalScoreNumbers)}else null==o&&(o=BLLComman.gameDataController.roomUtil.watchPlayerList.get(t[r].systemID.toString()));console.log("站起的玩家："),console.log(o),null!=o&&(o.totalScoreNumbers=t[r].totalScoreNumbers,o.playerUtil.currency=t[r].totalScoreNumbers)}var s=0,l=BLLComman.gameDataController.roomUtil.seatPlayerList.get(BLLComman.gameDataController.playerUtil.systemID.toString());null!=l&&(s=l.seat),0!=s&&ReadyLogic.ins.send_ready_data(),this.currentRoundNumbers==BLLComman.gameDataController.roomUtil.currentRoundNumbers&&(BLLComman.gameDataController.roomUtil.roomStatusEnum=SRoomStatusEnum.START_READY),ClientEventManager.ins.createAndSendEvent(ClientEventEnum.GAME_CONTINUE),Comman.stageBase.closeLayerCommponents(this)},t.prototype.mapListToArrayList=function(e){var t=new Array;return this.scoreBoxUtil.playerScoreList.forEach(function(e,n){t.push(e)}),t},t.prototype.sortByScore=function(e,t){return e.scoreNumbers>t.scoreNumbers?-1:1},t}(MessageBoxLayerBase);__reflect(SScoreBox.prototype,"SScoreBox");var SScoreBoxItemRenderer=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dataChanged=function(){this.data.nickName=Comman.splitNickName(this.data.nickName),this.hatImage.visible=this.data.winTypeEnum==SWinTypeEnum.WIN?!0:!1,this.data.compareNumbersString=this.chooseScoreString(parseInt(this.data.compareNumbers)),this.data.gunsNumbersString=this.chooseScoreString(parseInt(this.data.gunsNumbers)),this.data.redWaveNumbersString=this.chooseScoreString(parseInt(this.data.redWaveNumbers)),this.data.scoreNumbersString=this.chooseScoreString(parseInt(this.data.scoreNumbers))},t.prototype.chooseScoreString=function(e){return e>=0?"+"+e:e.toString()},t.prototype.chooseScoreBitmapLabelFont=function(e){return e>=0?"winScoreFont_fnt":"loseScoreFont_fnt"},t}(CWTFrameWork.ItemRendererBase);__reflect(SScoreBoxItemRenderer.prototype,"SScoreBoxItemRenderer");var SScoreBoxUtil=function(){function e(){this.isLastRound=!1,this.playerScoreList=new Map}return e}();__reflect(SScoreBoxUtil.prototype,"SScoreBoxUtil");var SSingleScoreUtil=function(){function e(){this.totalScoreNumbers=0,this.scoreNumbers=0,this.compareNumbers=0,this.gunsNumbers=0,this.redWaveNumbers=0,this.winTypeEnum=SWinTypeEnum.WIN,this.nickName="我是测试号",this.headerImageUrl="test_header1_jpg",this.systemID=12345}return e}();__reflect(SSingleScoreUtil.prototype,"SSingleScoreUtil");var SShareBox=function(e){function t(t){void 0===t&&(t=SShareTypeEnum.SHARE_TITLE_TO_FRIENDS);var n=e.call(this)||this;return n.arrowImage_spaceH=100,n.arrowImage_animation_time=500,n.shareTypeEnum=t,n.locationLayerName="D_LAYER",n}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.shareImage.source=this.switchShareType(this.shareTypeEnum),this.arrowImage_currentX=this.arrowImage.x,this.arrowImage_animation(this.arrowImage)},t.prototype.arrowImage_animation=function(e){egret.Tween.get(e,{loop:!0}).to({x:this.arrowImage_currentX+this.arrowImage_spaceH},this.arrowImage_animation_time).to({x:this.arrowImage_currentX},this.arrowImage_animation_time)},t.prototype.switchShareType=function(e){switch(e){case SShareTypeEnum.SHARE_TITLE_TO_FRIENDS:return"shareBox_image_png";case SShareTypeEnum.SHARE_HISTORY_RECORD_TO_FRIENDS:return"shareBox_totalScore_image_png";case SShareTypeEnum.TOP_GAMES:return"top_gameBox_image_png"}},t}(MessageBoxLayerBase);__reflect(SShareBox.prototype,"SShareBox");var SSoundSetUpBox=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);var t=SoundManager.ins.soundSetUpUtil;this.musicToggleButton.selected=t.musicSoundEnabled,this.effectToggleButton.selected=t.effectSoundEnabled,this.musicToggleButton.addEventListener(eui.UIEvent.CHANGE,this.onMusicChangedHandler,this),this.effectToggleButton.addEventListener(eui.UIEvent.CHANGE,this.onEffectChangedHandler,this)},t.prototype.onMusicChangedHandler=function(e){var t=SoundManager.ins.soundSetUpUtil,n=e.target,r=n.selected;t.musicSoundEnabled=r,SoundManager.ins.musicSoundEnabled=r,StorageManager.ins.save(SoundManager.SOUND_SETUP_UTIL_STO_NAME,JSON.stringify(t))},t.prototype.onEffectChangedHandler=function(e){var t=SoundManager.ins.soundSetUpUtil,n=e.target,r=n.selected;t.effectSoundEnabled=r,StorageManager.ins.save(SoundManager.SOUND_SETUP_UTIL_STO_NAME,JSON.stringify(t))},t}(MessageBoxLayerBase);__reflect(SSoundSetUpBox.prototype,"SSoundSetUpBox");var ChoosePlayerButton=function(e){function t(){var t=e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this;return t.positionEnumString="",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t);var n=BLLComman.getUserSeat(parseInt(this.positionEnumString));Comman.stageBase.openLayerCommponents(new STestMessageBox2(n.toString()))},t}(ButtonCommponents);__reflect(ChoosePlayerButton.prototype,"ChoosePlayerButton");var OtherPlayerFaceChatButton=function(e){function t(){return e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t);var n=this.parent.seat,r=new CMDUtil(CMDEnum.CHAT);r.errorCodeEnum=ErrorCodeEnum.OTHER_PLAYER_CHAT_CUCCESS,r.chatUtil=new SChatUtil("chatBox_expression10_png",10,2,n),BLLLogic.ins.recieveData(r)},t}(ButtonCommponents);__reflect(OtherPlayerFaceChatButton.prototype,"OtherPlayerFaceChatButton");var OtherPlayerJoinRoomButton=function(e){function t(){return e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t)},t}(ButtonCommponents);__reflect(OtherPlayerJoinRoomButton.prototype,"OtherPlayerJoinRoomButton");var OtherPlayerSitDownButton=function(e){function t(){return e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t)},t}(ButtonCommponents);__reflect(OtherPlayerSitDownButton.prototype,"OtherPlayerSitDownButton");var OtherPlayerStandUpButton=function(e){function t(){return e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t)},t}(ButtonCommponents);__reflect(OtherPlayerStandUpButton.prototype,"OtherPlayerStandUpButton");var OtherPlayerTextChatButton=function(e){function t(){return e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onTouchedHandler=function(t){e.prototype.onTouchedHandler.call(this,t);var n=this.parent.seat,r=new CMDUtil(CMDEnum.CHAT_BORADCAST);r.errorCodeEnum=ErrorCodeEnum.OTHER_PLAYER_CHAT_CUCCESS,r.chatUtil=new SChatUtil("君子报仇，十盘不算晚。",5,1,n),BLLLogic.ins.recieveData(r)},t}(ButtonCommponents);__reflect(OtherPlayerTextChatButton.prototype,"OtherPlayerTextChatButton");var SOtherPlayerReadyButton=function(e){function t(){return e.call(this,egret.getQualifiedClassName(ButtonCommponentsSkin))||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onTouchedHandler=function(e){},t}(ButtonCommponents);__reflect(SOtherPlayerReadyButton.prototype,"SOtherPlayerReadyButton");var STestMessageBox=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(MessageBoxLayerBase);__reflect(STestMessageBox.prototype,"STestMessageBox");var STestMessageBox2=function(e){function t(t){var n=e.call(this)||this;return n.seat=0,n.seat=parseInt(t),n.maskBox=new MaskBox(n,!0,0,!0),n}return __extends(t,e),t}(MessageBoxLayerBase);__reflect(STestMessageBox2.prototype,"STestMessageBox2");var STestReserveBox=function(e){function t(){var t=e.call(this)||this;return t.seat=0,t.fangKuaiCardArray=new Array,t.meiHuaCardArray=new Array,t.hongTaoCardArray=new Array,t.heiTaoCardArray=new Array,t.selectCardArray=new Array,t.maskBox=new MaskBox(t,!0,0,!0),t.initialize(),t}return __extends(t,e),t.prototype.initialize=function(){this.fangKuaiCardArray=new Array,this.meiHuaCardArray=new Array,this.hongTaoCardArray=new Array,this.heiTaoCardArray=new Array,this.selectCardArray=new Array;for(var e=2;15>e;e++){var t=new CardUtil;t.cardColor=1,t.cardValue=e,this.fangKuaiCardArray.push(t)}for(var e=2;15>e;e++){var t=new CardUtil;t.cardColor=2,t.cardValue=e,this.meiHuaCardArray.push(t)}for(var e=2;15>e;e++){var t=new CardUtil;t.cardColor=3,t.cardValue=e,this.hongTaoCardArray.push(t)}for(var e=2;15>e;e++){var t=new CardUtil;t.cardColor=4,t.cardValue=e,this.heiTaoCardArray.push(t)}},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.okButton.visible=!1,this.fangKuaiCardList.itemRenderer=STestReserveBoxItemRenderer,this.meihuaCardList.itemRenderer=STestReserveBoxItemRenderer,this.hongTaoCardList.itemRenderer=STestReserveBoxItemRenderer,this.heiTaoCardList.itemRenderer=STestReserveBoxItemRenderer,this.selectCardList.itemRenderer=STestReserveBoxItemRenderer,this.fangKuaiCardList.dataProvider=new eui.ArrayCollection(this.fangKuaiCardArray),this.meihuaCardList.dataProvider=new eui.ArrayCollection(this.meiHuaCardArray),this.hongTaoCardList.dataProvider=new eui.ArrayCollection(this.hongTaoCardArray),this.heiTaoCardList.dataProvider=new eui.ArrayCollection(this.heiTaoCardArray),this.eventListenerManager.addClientEventListener(this.okButton,egret.TouchEvent.TOUCH_TAP,this.onOKButtonTouchedHandler,this),this.eventListenerManager.addClientEventListener(this.resetButton,egret.TouchEvent.TOUCH_TAP,this.onResetButtonTouchedHandler,this),this.eventListenerManager.addClientEventListener(this.fangKuaiCardList,eui.ItemTapEvent.ITEM_TAP,this.onFangKuaiListTouchedHandler,this),this.eventListenerManager.addClientEventListener(this.meihuaCardList,eui.ItemTapEvent.ITEM_TAP,this.onMeiHuaListTouchedHandler,this),this.eventListenerManager.addClientEventListener(this.hongTaoCardList,eui.ItemTapEvent.ITEM_TAP,this.onHongTaoListTouchedHandler,this),this.eventListenerManager.addClientEventListener(this.heiTaoCardList,eui.ItemTapEvent.ITEM_TAP,this.onHeiTaoListTouchedHandler,this)},t.prototype.onFangKuaiListTouchedHandler=function(e){var t=e.itemRenderer;return this.selectCardArray.length>=13?void(this.okButton.visible=!0):(this.splice_cardArray(t.data,this.fangKuaiCardArray),this.selectCardArray.push(t.data),this.selectCardArray.sort(this.sortByCardUtil),this.selectCardArray.length>=13&&(this.okButton.visible=!0),this.selectCardList.dataProvider=new eui.ArrayCollection(this.selectCardArray),void(this.fangKuaiCardList.dataProvider=new eui.ArrayCollection(this.fangKuaiCardArray)))},t.prototype.onMeiHuaListTouchedHandler=function(e){var t=e.itemRenderer;this.selectCardArray.length>=13||(this.splice_cardArray(t.data,this.meiHuaCardArray),this.selectCardArray.push(t.data),this.selectCardArray.sort(this.sortByCardUtil),this.selectCardArray.length>=13&&(this.okButton.visible=!0),this.selectCardList.dataProvider=new eui.ArrayCollection(this.selectCardArray),this.meihuaCardList.dataProvider=new eui.ArrayCollection(this.meiHuaCardArray))},t.prototype.onHongTaoListTouchedHandler=function(e){var t=e.itemRenderer;this.selectCardArray.length>=13||(this.splice_cardArray(t.data,this.hongTaoCardArray),this.selectCardArray.push(t.data),this.selectCardArray.sort(this.sortByCardUtil),this.selectCardArray.length>=13&&(this.okButton.visible=!0),this.selectCardList.dataProvider=new eui.ArrayCollection(this.selectCardArray),this.hongTaoCardList.dataProvider=new eui.ArrayCollection(this.hongTaoCardArray))},t.prototype.onHeiTaoListTouchedHandler=function(e){var t=e.itemRenderer;return this.selectCardArray.length>=13?void(this.okButton.visible=!0):(this.splice_cardArray(t.data,this.heiTaoCardArray),this.selectCardArray.push(t.data),this.selectCardArray.sort(this.sortByCardUtil),this.selectCardArray.length>=13&&(this.okButton.visible=!0),this.selectCardList.dataProvider=new eui.ArrayCollection(this.selectCardArray),void(this.heiTaoCardList.dataProvider=new eui.ArrayCollection(this.heiTaoCardArray)))},t.prototype.splice_cardArray=function(e,t){for(var n=0;n<t.length;n++)if(t[n].cardColor==e.cardColor&&t[n].cardValue==e.cardValue)return t.splice(n,1),t},t.prototype.onResetButtonTouchedHandler=function(e){this.initialize(),this.okButton.visible=!1,this.fangKuaiCardList.dataProvider=new eui.ArrayCollection(this.fangKuaiCardArray),this.meihuaCardList.dataProvider=new eui.ArrayCollection(this.meiHuaCardArray),this.hongTaoCardList.dataProvider=new eui.ArrayCollection(this.hongTaoCardArray),this.heiTaoCardList.dataProvider=new eui.ArrayCollection(this.heiTaoCardArray),this.selectCardList.dataProvider=new eui.ArrayCollection(this.selectCardArray)},t.prototype.onOKButtonTouchedHandler=function(e){Comman.stageBase.openLayerCommponents(new SCardBox(this.selectCardArray))},t.prototype.sortByCardUtil=function(e,t){return e.cardValue>t.cardValue?-1:e.cardValue<t.cardValue?1:e.cardColor>=t.cardColor?-1:1},t}(MessageBoxLayerBase);__reflect(STestReserveBox.prototype,"STestReserveBox");var STestReserveBoxItemRenderer=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dataChanged=function(){console.log(this.data),this.bottomCard.cardUtil=this.data},t}(CWTFrameWork.ItemRendererBase);__reflect(STestReserveBoxItemRenderer.prototype,"STestReserveBoxItemRenderer");var WatchPlayerBox=function(e){function t(){var t=e.call(this)||this;return t.maskBox=new MaskBox(t,!0,0),t.layerAnimationTatics=new CWTFrameWork.LayerRightAnimationTatics(-219,219,0,0,600),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.watchPlayerList.itemRenderer=WatchPlayerBoxItemRenderer;var t=ClientEventManager.ins.createClientEventType(ClientEventEnum.WATCH_PLAYERLIST_CHANGE);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,t,this.onWatchPlayerListChangeHandler,this),this.eventListenerManager.addClientEventListener(this.touchedCloseGroup,egret.TouchEvent.TOUCH_TAP,this.onTouchedCloseGroupHandler,this),this.showWatchPlayerListData()},t.prototype.onTouchedCloseGroupHandler=function(e){Comman.stageBase.closeLayerCommponents(this)},t.prototype.watchPlayerList_to_watchPlayerArray=function(e){var t=new Array;return e.forEach(function(e,n){t.push(e.playerUtil)}),t},t.prototype.onWatchPlayerListChangeHandler=function(e){this.showWatchPlayerListData()},t.prototype.showWatchPlayerListData=function(){var e=this.watchPlayerList_to_watchPlayerArray(BLLComman.gameDataController.roomUtil.watchPlayerList);this.watchPlayerCountLabel.text="围观（"+e.length+"）",this.watchPlayerList.dataProvider=new eui.ArrayCollection(e)},t}(MessageBoxLayerBase);__reflect(WatchPlayerBox.prototype,"WatchPlayerBox");var WatchPlayerBoxItemRenderer=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(CWTFrameWork.ItemRendererBase);__reflect(WatchPlayerBoxItemRenderer.prototype,"WatchPlayerBoxItemRenderer");var SNoticeLayer=function(e){function t(){var t=e.call(this)||this;return t.touchEnabled=!1,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);var t=ClientEventManager.ins.createClientEventType(ClientEventEnum.NOTICE_TEXT);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,t,this.onNoticeTextHandler,this)},t.prototype.onNoticeTextHandler=function(e){var t=e.msg;switch(t.noticeTextTypeEnum){case SNoticeTextTypeEnum.TEXT_A_STATE:this.onTextAStateHandler(t);break;case SNoticeTextTypeEnum.TEXT_B_STATE:this.onTextBStateHandler(t);break;case SNoticeTextTypeEnum.TEXT_C_STATE:this.onTextCStateHandler(t);break;case SNoticeTextTypeEnum.TEXT_D_STATE:this.onTextDStateHandler(t);break;case SNoticeTextTypeEnum.TEXT_E_STATE:this.onTextEStateHandler(t);break;case SNoticeTextTypeEnum.TEXT_F_STATE:this.onTextFStateHandler(t);break;case SNoticeTextTypeEnum.TEXT_G_STATE:this.onTextGStateHandler(t);break;case SNoticeTextTypeEnum.TEXT_H_STATE:this.onTextHStateHandler(t);break;case SNoticeTextTypeEnum.TEXT_I_STATE:this.onTextIStateHandler(t);break;case SNoticeTextTypeEnum.TEXT_J_STATE:this.onTextJStateHandler(t);break;case SNoticeTextTypeEnum.TEXT_K_STATE:this.onTextKStateHandler(t)}},t.prototype.onTextAStateHandler=function(e){this.noticeTextLabel.textFlow=[{text:"您目前坐在 ",style:{textColor:2551929,size:28}},{text:e.seat,style:{textColor:16761406,size:28}},{text:" 号座位上\r\n",style:{textColor:2551929,size:28}},{text:"如需站起，请点击",style:{textColor:2551929,size:28}},{text:"左上角",style:{textColor:16761406,size:28}},{text:"的",style:{textColor:2551929,size:28}},{text:"选项按钮",style:{textColor:16761406,size:28}}],this.noticeTextLabel_animation(this.noticeTextLabel)},t.prototype.onTextBStateHandler=function(e){this.noticeTextLabel.textFlow=[{text:"您已经坐下了，",style:{textColor:2551929,size:28}},{text:"请勿重复坐下！",style:{textColor:16761406,size:28}}],this.noticeTextLabel_animation(this.noticeTextLabel)},t.prototype.onTextCStateHandler=function(e){this.noticeTextLabel.textFlow=[{text:"您已经处于围观了，",style:{textColor:2551929,size:28}},{text:"请勿重复站起！",style:{textColor:16761406,size:28}}],this.noticeTextLabel_animation(this.noticeTextLabel)},t.prototype.onTextDStateHandler=function(e){this.noticeTextLabel.textFlow=[{text:"您已经进入围观中，",style:{textColor:2551929,size:28}},{text:"如需坐下，请点击桌面上的坐下按钮！",style:{textColor:16761406,size:28}}],this.noticeTextLabel_animation(this.noticeTextLabel)},t.prototype.onTextEStateHandler=function(e){this.noticeTextLabel.textFlow=[{text:"玩家 ",style:{textColor:2551929,size:28}},{text:e.nickName,style:{textColor:16761406,size:28}},{text:" 已加入本房间，目前处于",style:{textColor:2551929,size:28}},{text:" 围观",style:{textColor:16761406,size:28}}],this.noticeTextLabel_animation(this.noticeTextLabel)},t.prototype.onTextFStateHandler=function(e){this.noticeTextLabel.textFlow=[{text:"玩家 ",style:{textColor:2551929,size:28}},{text:e.nickName,style:{textColor:16761406,size:28}},{text:" 已重新回到本房间，目前位于 ",style:{textColor:2551929,size:28}},{text:e.seat+"号 ",style:{textColor:16761406,size:28}},{text:"座位上",style:{textColor:2551929,size:28}}],this.noticeTextLabel_animation(this.noticeTextLabel)},t.prototype.onTextGStateHandler=function(e){this.noticeTextLabel.textFlow=[{text:"玩家 ",style:{textColor:2551929,size:28}},{text:e.nickName,style:{textColor:16761406,size:28}},{text:" 已坐到 ",style:{textColor:2551929,size:28}},{text:e.seat+"号 ",style:{textColor:16761406,size:28}},{text:"座位上",style:{textColor:2551929,size:28}}],this.noticeTextLabel_animation(this.noticeTextLabel)},t.prototype.onTextJStateHandler=function(e){this.noticeTextLabel.textFlow=[{text:"当前处于 ",style:{textColor:2551929,size:28}},{text:" 摆牌 ",style:{textColor:16761406,size:28}},{text:"阶段，请等待下一局再进行坐下",style:{textColor:2551929,size:28}}],this.noticeTextLabel_animation(this.noticeTextLabel)},t.prototype.onTextKStateHandler=function(e){this.noticeTextLabel.textFlow=[{text:"当前处于 ",style:{textColor:2551929,size:28}},{text:" 比牌 ",style:{textColor:16761406,size:28}},{text:"阶段，请等待下一局再进行坐下",style:{textColor:2551929,size:28}}],this.noticeTextLabel_animation(this.noticeTextLabel)},t.prototype.onTextHStateHandler=function(e){this.noticeTextLabel.textFlow=[{text:"玩家 ",style:{textColor:2551929,size:28}},{text:e.nickName,style:{textColor:16761406,size:28}},{text:" 已站起，目前 ",style:{textColor:2551929,size:28}},{text:e.seat+"号 ",style:{textColor:16761406,size:28}},{text:"位置空余，欢迎大家加入！",style:{textColor:2551929,size:28}}],this.noticeTextLabel_animation(this.noticeTextLabel)},t.prototype.onTextIStateHandler=function(e){this.noticeTextLabel.textFlow=[{text:"你当前未在座位上,准备失败 ",style:{textColor:2551929,size:28}},{text:"如想玩本局，点击桌面上的坐下按钮",style:{textColor:16761406,size:28}}],this.noticeTextLabel_animation(this.noticeTextLabel)},t.prototype.noticeTextLabel_animation=function(e){egret.Tween.removeTweens(e),e.alpha=0,egret.Tween.get(e,{loop:!1}).to({alpha:1},500).wait(1e3).to({alpha:0},500)},t}(CWTFrameWork.NoticeLayerBase);__reflect(SNoticeLayer.prototype,"SNoticeLayer");var NoticeTextUtil=function(){function e(e){this.noticeTextTypeEnum=e}return e}();__reflect(NoticeTextUtil.prototype,"NoticeTextUtil");var SGameStage=function(e){function t(){var t=e.call(this)||this;return t.openLayerCommponents(new SGameStageAWindow),t.openLayerCommponents(new SGameStageBWindow),t.openLayerCommponents(new SGameStageCWindow),t.openLayerCommponents(new SGameStageDWindow),t.openLayerCommponents(new SGameStageUI),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);var t=ClientEventManager.ins.createClientEventType(ClientEventEnum.START_PLAY_CARD);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,t,this.onStartPlayCardHandler,this);var n=ClientEventManager.ins.createClientEventType(ClientEventEnum.START_SHOW_CARD);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,n,this.onStartShowCardHandler,this);var r=ClientEventManager.ins.createClientEventType(ClientEventEnum.GAME_CONTINUE);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,r,this.onGameContinueHandler,this);var a=ClientEventManager.ins.createClientEventType(ClientEventEnum.BACK_HOME);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,a,this.onBackHomeHandler,this);var o=ClientEventManager.ins.createClientEventType(ClientEventEnum.OTHER_PLAYER_DISMISS_ROOM);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,o,this.onOtherPlayerDismissRoomHandler,this);var i=ClientEventManager.ins.createClientEventType(ClientEventEnum.DISMISS_ROOM_SUCCESS);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,i,this.onDisMissRoomSuccessHandler,this),this.eventListenerManager.addClientEventListener(this,egret.TouchEvent.TOUCH_TAP,this.onTouchedHandler,this)},t.prototype.onTouchedHandler=function(e){egret.getQualifiedClassName(e.target)!=egret.getQualifiedClassName(SOptionBoxButton)&&(Comman.stageBase.closeLayerCommponentsByName(egret.getQualifiedClassName(SOptionBox)),ClientEventManager.ins.createAndSendEvent(ClientEventEnum.OPTIONBOX_CLOSE))},t.prototype.onStartPlayCardHandler=function(e){var t=BLLComman.gameDataController.roomUtil.seatPlayerList,n=new Array;t.forEach(function(e,t){var r=BLLComman.getUserPositionEnum(e.seat);n.push(r)}),this.openLayerCommponents(new SGameStageEWindow(n))},t.prototype.onStartShowCardHandler=function(e){Comman.stageBase.openLayerCommponents(new SGameStageFWindow),Comman.stageBase.closeLayerCommponentsByName(egret.getQualifiedClassName(SGameStageEWindow)),Comman.stageBase.openLayerCommponents(new SGameStageGWindow(BLLComman.gameDataController.animationList))},t.prototype.onGameContinueHandler=function(e){(BLLComman.gameDataController.roomUtil.roomStatusEnum==SRoomStatusEnum.SHOW_CARD_COMPLETE||BLLComman.gameDataController.roomUtil.roomStatusEnum==SRoomStatusEnum.START_READY)&&(Comman.stageBase.closeLayerCommponentsByName(egret.getQualifiedClassName(SGameStageFWindow)),Comman.stageBase.closeLayerCommponentsByName(egret.getQualifiedClassName(SGameStageGWindow)),BLLComman.gameDataController.reset(),BLLComman.TSDATA=null)},t.prototype.onBackHomeHandler=function(e){BLLComman.hallManager.game_close_send()},t.prototype.onOtherPlayerDismissRoomHandler=function(e){var t=e.msg;this.openLayerCommponents(new SNoticeCBox(t))},t.prototype.onDisMissRoomSuccessHandler=function(e){BLLComman.hallManager.game_close_send()},t}(StageBase);__reflect(SGameStage.prototype,"SGameStage");var SGameStageUI=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(UILayerBase);__reflect(SGameStageUI.prototype,"SGameStageUI");var SGameStageAWindow=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(WindowLayerBase);__reflect(SGameStageAWindow.prototype,"SGameStageAWindow");var SGameStageBWindow=function(e){function t(){var t=e.call(this)||this;return t.beforeChangeSeat=0,t.locationLayerName="B_LAYER",t.touchEnabled=!1,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.beforeChangeSeat=BLLComman.gameDataController.roomUtil.ownSeat},t.prototype.onSitDownSuccessHandler=function(e){},t.prototype.get_position=function(e){for(var t=0;t<this.playerInformationBaseGroup.numChildren;t++){var n=this.playerInformationBaseGroup.getChildAt(t);if(parseInt(n.positionEnumString)==e)return new egret.Point(n.x,n.y)}},t}(WindowLayerBase);__reflect(SGameStageBWindow.prototype,"SGameStageBWindow");var SGameStageCWindow=function(e){function t(){var t=e.call(this)||this;return t.isAnimation=!1,t.currentSitDownTimeStamp=null,t.locationLayerName="C_LAYER",t.touchEnabled=!1,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);var t=ClientEventManager.ins.createClientEventType(ClientEventEnum.PLAYER_ANIMATION_START);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,t,this.onPlayerAnimationStartHandler,this);var n=ClientEventManager.ins.createClientEventType(ClientEventEnum.PLAYER_ANIMATION_COMPLETE);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,n,this.onPlayerAnimationCompleteHandler,this);var r=ClientEventManager.ins.createClientEventTypeByPositionEnum(ClientEventEnum.STAND_UP_SUCCESS,PositionEnum.BOTTOM);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,r,this.onStandUpSuccessHandler,this);var a=ClientEventManager.ins.createClientEventType(ClientEventEnum.RECONNECT_SIT_DOWN_SUCCESS);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,a,this.onReconnectSitDownSuccessHandler,this);var o=ClientEventManager.ins.createClientEventType(ClientEventEnum.RECONNECT_STAND_UP_SUCCESS);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,o,this.onReconnectStandUpSuccessHandler,this);var i=ClientEventManager.ins.createClientEventTypeByPositionEnum(ClientEventEnum.SIT_DOWN_SUCCESS,PositionEnum.BOTTOM);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,i,this.onSitDownSuccessHandler,this);var s=ClientEventManager.ins.createClientEventType(ClientEventEnum.PLAY_TS);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,s,this.onTs,this);var l=ClientEventManager.ins.createClientEventType(ClientEventEnum.START_PLAY_CARD);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,l,this.onPlayCardRecieveDataSuccessHandler,this);
var c=ClientEventManager.ins.createClientEventType(ClientEventEnum.GAME_START);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,c,this.onGameStartHandler,this);var u=ClientEventManager.ins.createClientEventType(ClientEventEnum.GAME_CONTINUE);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,u,this.onGameContinueHandler,this),this.eventListenerManager.addClientEventListener(this.randomSitDownButton,egret.TouchEvent.TOUCH_TAP,this.onSitDownButtonTouchedHandler,this);var m=ClientEventManager.ins.createClientEventType(ClientEventEnum.WATCH_PLAYERLIST_CHANGE);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,m,this.onWatchPlayerChangeHandler,this);var d=ClientEventManager.ins.createClientEventType(ClientEventEnum.OWN_CHANGE);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,d,this.onCurrentOwnRoleIdChangeHandler,this)},t.prototype.onCurrentOwnRoleIdChangeHandler=function(e){var t=e.msg;BLLComman.gameDataController.roomUtil.currentOwnerID=t,BLLComman.gameDataController.playerUtil.systemID==BLLComman.gameDataController.roomUtil.currentOwnerID&&(this.buttonGroup.visible=!1,this.button2Group.visible=!0,this.sitDownButtonGroup.visible=!1)},t.prototype.onReconnectStandUpSuccessHandler=function(e){4==BLLComman.gameDataController.roomUtil.seatPlayerList.size&&(this.sitDownButtonGroup.visible=!1)},t.prototype.onWatchPlayerChangeHandler=function(e){var t=e.msg;null!=t&&(4==t&&(this.sitDownButtonGroup.visible=!1),4>t&&0==this.buttonGroup.visible&&1==this.isAnimation&&(this.sitDownButtonGroup.visible=!0))},t.prototype.onPlayerAnimationStartHandler=function(e){},t.prototype.onGameStartHandler=function(e){this.visible=!1},t.prototype.onPlayerAnimationCompleteHandler=function(e){this.buttonGroup.visible=!0,this.isAnimation=!0},t.prototype.onSitDownButtonTouchedHandler=function(e){return null==this.currentSitDownTimeStamp?(this.currentSitDownTimeStamp=Date.parse((new Date).toString()),void SitDownLogic.ins.send_sitDown_data(-1)):Date.parse((new Date).toString())-this.currentSitDownTimeStamp>1e3?(SitDownLogic.ins.send_sitDown_data(-1),void(this.currentSitDownTimeStamp=Date.parse((new Date).toString()))):void ClientEventManager.ins.createAndSendEvent(ClientEventEnum.NOTICE_TEXT,new NoticeTextUtil(SNoticeTextTypeEnum.TEXT_F_STATE))},t.prototype.onReconnectSitDownSuccessHandler=function(e){this.buttonGroup.visible=!0,this.sitDownButtonGroup.visible=!1},t.prototype.onSitDownSuccessHandler=function(e){BLLComman.gameDataController.isInSeat()!=SSeatTypeEnum.WATCH&&(this.sitDownButtonGroup.visible=!1,this.buttonGroup.visible=!0,this.isAnimation=!0,BLLComman.gameDataController.playerUtil.systemID==BLLComman.gameDataController.roomUtil.currentOwnerID&&(this.buttonGroup.visible=!1,this.button2Group.visible=!0))},t.prototype.onStandUpSuccessHandler=function(e){this.buttonGroup.visible=!1,this.sitDownButtonGroup.visible=!0,this.button2Group.visible=!1,this.isAnimation=!1},t.prototype.onTs=function(e){this.tsData=e.msg,BLLComman.TSDATA=e.msg,console.log(e.msg,"cwondow")},t.prototype.onPlayCardRecieveDataSuccessHandler=function(e){this.visible=!1},t.prototype.onGameContinueHandler=function(e){this.visible=!0},t.prototype.isRoomOwner=function(){var e=BLLComman.gameDataController.playerUtil.systemID,t=BLLComman.gameDataController.playerUtil.systemID;return t==e?!0:!1},t}(WindowLayerBase);__reflect(SGameStageCWindow.prototype,"SGameStageCWindow");var SGameStageDWindow=function(e){function t(){var t=e.call(this)||this;return t.locationLayerName="D_LAYER",t.touchEnabled=!1,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(WindowLayerBase);__reflect(SGameStageDWindow.prototype,"SGameStageDWindow");var SGameStageEWindow=function(e){function t(t){var n=e.call(this)||this;n.deal_card_cardList=new Map,n.isAnimation=!1,n.playCardCompleteList=new Array,n.locationLayerName="E_LAYER",n.currentPlayerPositionEnumList=t;var r=new JumpTextCommponents("请等待其他玩家...","jumpText1Font_fnt",TextTypeEnum.BITMAP_LABEL);return n.addChild(r),r.x=170,r.y=300,n.playCardCompleteList=BLLComman.gameDataController.playCardCompleteList,n}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.config=BLLComman.gameConfig,this.deal_card(this.currentPlayerPositionEnumList);var t=ClientEventManager.ins.createClientEventType(ClientEventEnum.PLAY_CARD_COMPLETE);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,t,this.onPlayCardCompleteHandler,this)},t.prototype.deal_card=function(e){SoundManager.ins.playEffectSound("dealCard");for(var t=this.config.dealCardAnimationList,n=0;n<e.length;n++)for(var r=t[e[n]],a=0;a<this.config.playerHandCardCount;a++){var o=e[n],i=new BottomBackCard;this.addChild(i),i.x=r.startX,i.y=r.startY;var s=this.get_bottomCard_position(r,a);i.scaleX=r.scaleX,i.scaleY=r.scaleY,this.deal_card_animation(i,s,r.animationTime,o,a);var l=this.deal_card_cardList.get(o);null==l&&(l=new Array,this.deal_card_cardList.set(o,l)),l.push(i)}},t.prototype.deal_card_animation=function(e,t,n,r,a){egret.Tween.removeTweens(e),egret.Tween.get(e,{loop:!1}).to({x:t.x,y:t.y},n).call(this.deal_card_animation_complete,this,[r,a])},t.prototype.deal_card_animation_complete=function(e,t){this.tsData;if(console.log(this.tsData),this.isAnimation=!1,e==PositionEnum.BOTTOM&&0==t){null!=BLLComman.gameDataController.playCardList&&egret.Tween.get(this,{loop:!1}).to({},200).call(function(){BLLComman.gameDataController.roomUtil.gamePlayModeEnum==SGamePlayModeEnum.AUTO?Comman.stageBase.openLayerCommponents(new SAutoCardBox(BLLComman.gameDataController.playCardList)):Comman.stageBase.openLayerCommponents(new SCardBox(BLLComman.gameDataController.playCardList,BLLComman.TSDATA))},this);for(var n=0;n<this.playCardCompleteList.length;n++)console.log(" positionEnum: "),console.log(this.playCardCompleteList),this.deal_card_complete_animation(this.playCardCompleteList[n])}},t.prototype.get_bottomCard_position=function(e,t){var n=e.startX+t*e.spaceH,r=e.startY+t*e.spaceV;return new egret.Point(n,r)},t.prototype.onPlayCardCompleteHandler=function(e){var t=e.msg;1==this.isAnimation?this.playCardCompleteList.push(t):this.deal_card_complete_animation(t)},t.prototype.deal_card_complete_animation=function(e){for(var t=this.deal_card_cardList.get(e),n=0;n<t.length;n++)this.removeChild(t[n]);var r=this.config.playCardCompletePositionList[e],a=new CardListCommponents;this.addChild(a),e==PositionEnum.BOTTOM&&(a.touched=!0),a.scaleX=r.scaleX,a.scaleY=r.scaleY,a.x=r.startX,a.y=r.startY},t}(WindowLayerBase);__reflect(SGameStageEWindow.prototype,"SGameStageEWindow");var BottomBackCardPositionUtil=function(){function e(e,t,n,r,a,o,i){this.startX=e,this.startY=t,this.rotation=n,this.spaceH=r,this.spaceV=a,this.endScaleX=o,this.endScaleY=i}return e}();__reflect(BottomBackCardPositionUtil.prototype,"BottomBackCardPositionUtil");var CardAnimationUtil=function(){function e(e,t,n,r,a,o,i,s){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===a&&(a=0),void 0===o&&(o=1),void 0===i&&(i=1),void 0===s&&(s=0),this.startX=e,this.startY=t,this.spaceH=n,this.spaceV=r,this.animationTime=a,this.scaleX=o,this.scaleY=i,this.rotation=s}return e}();__reflect(CardAnimationUtil.prototype,"CardAnimationUtil");var SGameStageFWindow=function(e){function t(){var t=e.call(this)||this;return t.intervalName=0,t.locationLayerName="F_LAYER",t.touchEnabled=!1,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);var t=BLLComman.gameDataController.roomUtil.seatPlayerList,n=new Array,r=this;t.forEach(function(e,t){for(var a=BLLComman.getUserPositionEnum(e.seat),o=0;o<r.numChildren;o++){var i=r.getChildAt(o);if(i.positionEnumString==a.toString()){i.visible=!0;break}}n.push(a)})},t.prototype.test_create_showCardList=function(){for(var e=0;4>e;e++){for(var t=new ShowCardUtil,n=0;3>n;n++)t.cardUtilList.push(this.test_createCardUtil());t.cardTypeEnum=1e5,t.scoreNumbers=5,t.yChildNumber=0,t.seat=e+1,BLLComman.gameDataController.showCardListUtil.push(t)}for(var e=0;4>e;e++){for(var t=new ShowCardUtil,r=0;5>r;r++)t.cardUtilList.push(this.test_createCardUtil());t.cardTypeEnum=2e5,t.scoreNumbers=10,t.yChildNumber=1,t.seat=e+1,BLLComman.gameDataController.showCardListUtil.push(t)}for(var e=0;4>e;e++){for(var t=new ShowCardUtil,a=0;5>a;a++)t.cardUtilList.push(this.test_createCardUtil());t.cardTypeEnum=3e5,t.scoreNumbers=15,t.yChildNumber=2,t.seat=e+1,BLLComman.gameDataController.showCardListUtil.push(t)}},t.prototype.test_createCardUtil=function(){var e=new CardUtil;return e.cardValue=Math.floor(13*Math.random())+2,e.cardColor=Math.floor(4*Math.random())+1,e},t}(WindowLayerBase);__reflect(SGameStageFWindow.prototype,"SGameStageFWindow");var SGameStageGWindow=function(e){function t(t){var n=e.call(this)||this;return n.currentGunsCountList=[0,0,0,0],n.gunsUtilList=new Map,n.gameStart_ske_json_name="gameStart_ske_json",n.gameStart_tex_json_name="gameStart_tex_json",n.gameStart_tex_png_name="gameStart_tex_png",n.hongBoLang_ske_json_name="hongbolang_ske_json",n.hongBoLang_json_name="hongbolang_tex_json",n.hongBoLang_png_name="hongbolang_tex_png",n.hongBoLang_animation_ar_name="MovieClip",n.hongBoLang_animation_name="newAnimation",n.gameStart_animation_ar_name="MovieClip",n.gameStart_animation_name="newAnimation",n.guns_image_name_format="guns",n.shotHole_group_name_format="shotHoleGroup",n.intervalName=0,n.send_data_space_time=1e3,n.currentGunsNumbers=0,n.guns_maxCount=4,n.shotHoleGroup_maxCount=4,n.locationLayerName="G_LAYER",n.touchEnabled=!1,n.initialize_gunsUtilList(),n.animationDataUtilList=t,n}return __extends(t,e),t.prototype.initialize_gunsUtilList=function(){var e=new GunsUtil,t=new SingleGunsUtil(1,1,-20,0,0,3),n=new SingleGunsUtil(1,1,-60,-40,0,3),r=new SingleGunsUtil(-1,1,30,50,0,3);e.singleGunsUtilList.set(1,t),e.singleGunsUtilList.set(2,n),e.singleGunsUtilList.set(3,r),this.gunsUtilList.set(0,e);var a=new GunsUtil,o=new SingleGunsUtil(-1,1,-70,-40,-70,3),i=new SingleGunsUtil(-1,1,20,40,20,3),s=new SingleGunsUtil(-1,1,0,20,0,3);a.singleGunsUtilList.set(0,o),a.singleGunsUtilList.set(2,i),a.singleGunsUtilList.set(3,s),this.gunsUtilList.set(1,a);var l=new GunsUtil,c=new SingleGunsUtil(1,1,110,130,110,3),u=new SingleGunsUtil(1,1,30,60,30,3),m=new SingleGunsUtil(-1,1,-30,-60,-30,3);l.singleGunsUtilList.set(0,c),l.singleGunsUtilList.set(1,u),l.singleGunsUtilList.set(3,m),this.gunsUtilList.set(2,l);var d=new GunsUtil,h=new SingleGunsUtil(1,1,110,130,110,3),p=new SingleGunsUtil(1,1,0,20,0,3),C=new SingleGunsUtil(1,1,-30,-60,-30,3);d.singleGunsUtilList.set(0,h),d.singleGunsUtilList.set(1,p),d.singleGunsUtilList.set(2,C),this.gunsUtilList.set(3,d)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.deserialize_animationUtilList(this.animationDataUtilList)},t.prototype.deserialize_animationUtilList=function(e){if(this.animationDataUtilList=e,null!=e&&0!=e.length)switch(e[0].animationTypeEnum){case AnimationTypeEnum.GAME_START:this.create_gameStart_animation();break;case AnimationTypeEnum.HONG_BO_LANG:this.create_hongBoLang_animation();break;case AnimationTypeEnum.GUNS:this.deSerialize_gunsList(e[0].animationDataList);break;case AnimationTypeEnum.SPECIAL_CARDTYPE:this.deSerialize_specialCardType(e[0])}else var t=setTimeout(function(){clearTimeout(t),Comman.stageBase.openLayerCommponents(new SScoreBox(BLLComman.gameDataController.scoreBoxUtil))},1e3)},t.prototype.create_gameStart_animation=function(){var e=new dragonBones.EgretFactory;if(null!=RES.getRes(this.gameStart_ske_json_name)){e.parseDragonBonesData(RES.getRes(this.gameStart_ske_json_name)),e.parseTextureAtlasData(RES.getRes(this.gameStart_tex_json_name),RES.getRes(this.gameStart_tex_png_name));var t=e.buildArmatureDisplay(this.gameStart_animation_ar_name);this.addChild(t),t.x=(CWTFrameWork.Comman.startStageWidth-t.width)/2,t.y=(CWTFrameWork.Comman.startStageHeight-t.height)/2,t.animation.play(this.gameStart_animation_name,1),this.eventListenerManager.addClientEventListener(t,dragonBones.Event.COMPLETE,this.onGameStartCompleteHandler,this)}},t.prototype.onGameStartCompleteHandler=function(e){var t=ClientEventManager.ins.createClientEventType(ClientEventEnum.GAME_START);this.eventListenerManager.removeClientEventListener(ClientEventManager.ins,t,this.onGameStartCompleteHandler,this),egret.Tween.get(this,{loop:!1}).to({},600).call(function(){this.create_showCard_logic()},this)},t.prototype.create_showCard_logic=function(){var e=this,t=(BLLComman.gameDataController.showCardListUtil,BLLComman.gameDataController.showCardListUtil);if(0==t.length)return void this.deserialize_animationUtilList(BLLComman.gameDataController.animation2List);var n=BLLComman.getUserPositionEnum(t[0].seat);ClientEventManager.ins.createAndSendEventByPositionEnum(ClientEventEnum.SHOW_CARD,n,t[0]),t.shift(),this.intervalName=setInterval(function(){if(0==t.length)return void clearInterval(e.intervalName);var n=BLLComman.getUserPositionEnum(t[0].seat);ClientEventManager.ins.createAndSendEventByPositionEnum(ClientEventEnum.SHOW_CARD,n,t[0]),t.shift()},e.send_data_space_time);var r=setTimeout(function(){e.deserialize_animationUtilList(BLLComman.gameDataController.animation2List),BLLComman.gameDataController.roomUtil.roomStatusEnum=SRoomStatusEnum.SHOW_CARD_COMPLETE,clearTimeout(r)},t.length*e.send_data_space_time+500)},t.prototype.create_hongBoLang_animation=function(){var e=new dragonBones.EgretFactory;if(null!=RES.getRes(this.hongBoLang_ske_json_name)){e.parseDragonBonesData(RES.getRes(this.hongBoLang_ske_json_name)),e.parseTextureAtlasData(RES.getRes(this.hongBoLang_json_name),RES.getRes(this.hongBoLang_png_name));var t=e.buildArmatureDisplay(this.hongBoLang_animation_ar_name);this.addChild(t),t.x=(CWTFrameWork.Comman.startStageWidth-t.width)/2,t.y=(CWTFrameWork.Comman.startStageHeight-t.height)/2,t.animation.play(this.hongBoLang_animation_name,1),this.eventListenerManager.addClientEventListener(t,dragonBones.Event.COMPLETE,this.onHongBoLangCompleteHandler,this)}},t.prototype.onHongBoLangCompleteHandler=function(e){var t=ClientEventManager.ins.createClientEventType(ClientEventEnum.QUAN_LEI_DA_COMPLETE);this.eventListenerManager.removeClientEventListener(ClientEventManager.ins,t,this.onHongBoLangCompleteHandler,this),this.animationDataUtilList.shift(),this.deserialize_animationUtilList(this.animationDataUtilList)},t.prototype.deSerialize_gunsList=function(e){var t=e.get(this.currentGunsNumbers);return null==t?(this.animationDataUtilList.shift(),void this.deserialize_animationUtilList(this.animationDataUtilList)):0==t.length?(this.currentGunsNumbers++,this.clear_all_guns_shotHole(),void this.deSerialize_gunsList(e)):(SoundManager.ins.playEffectSound(BLLComman.gameDataController.get_gender_string()+"_daqiang"),egret.Tween.get(this,{loop:!1}).to({},500).call(this.create_guns_animation,this,[t[0]]),void t.shift())},t.prototype.clear_all_guns_shotHole=function(){for(var e=0;e<this.guns_maxCount;e++){var t=this.getChildByName(this.guns_image_name_format+e);t.visible=!1;for(var n=this.getChildByName(this.shotHole_group_name_format+e),r=0;r<n.numChildren;r++){var a=n.getChildAt(r);a.visible=!1}}},t.prototype.create_guns_animation=function(e){var t=e.x,n=e.y,r=BLLComman.getUserPositionEnum(t),a=BLLComman.getUserPositionEnum(n),o=this.gunsUtilList.get(r),i=o.singleGunsUtilList.get(a);this.start_guns_animation(r,a,i)},t.prototype.start_guns_animation=function(e,t,n){if(0==n.maxGunsCount)return n.maxGunsCount=3,void egret.Tween.get(this,{loop:!1}).to({},300).call(this.guns_animation_complete,this,[e,t]);var r=this.getChildByName(this.guns_image_name_format+e);r.scaleX=n.endScaleX,r.scaleY=n.endScaleY,r.rotation=n.currentRotation,r.visible=!0,SoundManager.ins.playEffectSound("shot"),egret.Tween.get(r,{loop:!1}).to({rotation:n.endRotation},100).call(this.guns_first_animation_complete,this,[e,t,n]).to({rotation:n.startRotation},100).call(this.guns_second_animation_complete,this,[e,t,n])},t.prototype.guns_first_animation_complete=function(e,t,n){var r=this.getChildByName(this.shotHole_group_name_format+t),a=r.getChildAt(n.maxGunsCount-1);a.visible=!0},t.prototype.guns_second_animation_complete=function(e,t,n){n.maxGunsCount--,this.start_guns_animation(e,t,n),this.currentGunsCountList[t]++},t.prototype.guns_animation_complete=function(e,t){this.deSerialize_gunsList(this.animationDataUtilList[0].animationDataList)},t.prototype.deSerialize_specialCardType=function(e){var t=new SSpecialCardTypeCommponents(e.specialCardTypeEnum);this.addChild(t);var n=BLLComman.getUserPositionEnum(e.seat);ClientEventManager.ins.createAndSendEventByPositionEnum(ClientEventEnum.SHOW_SPECIAL_CARD,n,e.specialCardUtilList),t.x=(CWTFrameWork.Comman.startStageWidth-t.width)/2,t.y=(CWTFrameWork.Comman.startStageHeight-t.height)/2,this.animationDataUtilList.shift(),SoundManager.ins.playEffectSound(BLLComman.gameDataController.get_gender_string()+"_"+e.specialCardTypeEnum/1e5);var r=ClientEventManager.ins.createClientEventType(ClientEventEnum.SPECIAL_CARDTYPE_COMPLETE);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,r,this.onSpecialCardTypeCompleteHandler,this)},t.prototype.onSpecialCardTypeCompleteHandler=function(e){var t=ClientEventManager.ins.createClientEventType(ClientEventEnum.SPECIAL_CARDTYPE_COMPLETE);this.eventListenerManager.removeClientEventListener(ClientEventManager.ins,t,this.onSpecialCardTypeCompleteHandler,this);var n=e.target;n.parent&&n.parent.removeChild(n),egret.Tween.get(this,{loop:!1}).to({},500).call(function(){this.deserialize_animationUtilList(this.animationDataUtilList)},this)},t}(WindowLayerBase);__reflect(SGameStageGWindow.prototype,"SGameStageGWindow");var AnimationTypeEnum;!function(e){e[e.HONG_BO_LANG=1]="HONG_BO_LANG",e[e.GAME_START=2]="GAME_START",e[e.GUNS=3]="GUNS",e[e.SPECIAL_CARDTYPE=4]="SPECIAL_CARDTYPE"}(AnimationTypeEnum||(AnimationTypeEnum={}));var AnimationDataUtil=function(){function e(e,t){this.animationDataList=new Map,this.specialCardUtilList=new Array,this.animationTypeEnum=e,this.animationDataList=t}return e}();__reflect(AnimationDataUtil.prototype,"AnimationDataUtil");var GunsUtil=function(){function e(){this.singleGunsUtilList=new Map}return e}();__reflect(GunsUtil.prototype,"GunsUtil");var SingleGunsUtil=function(){function e(e,t,n,r,a,o){this.maxGunsCount=3,this.endScaleX=e,this.endScaleY=t,this.startRotation=n,this.endRotation=r,this.currentRotation=a,this.maxGunsCount=o}return e}();__reflect(SingleGunsUtil.prototype,"SingleGunsUtil");var LoginStage=function(e){function t(){var t=e.call(this)||this;return t.openLayerCommponents(new LoginStageAWindow),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);var t=ClientEventManager.ins.createClientEventType(ClientEventEnum.START_SHOW_CARD);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,t,this.onStartShowCardHandler,this);var n=ClientEventManager.ins.createClientEventType(ClientEventEnum.LOGIN_SUCCESS);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,n,this.onLoginSuccessHandler,this);var r=ClientEventManager.ins.createClientEventType(ClientEventEnum.CREATE_ROOM_SUCCESS);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,r,this.onCreateRoomSuccessHandler,this);var a=ClientEventManager.ins.createClientEventType(ClientEventEnum.JOIN_ROOM_SUCCESS);this.eventListenerManager.addClientEventListener(ClientEventManager.ins,a,this.onJoinRoomSuccessHandler,this)},t.prototype.onStartShowCardHandler=function(e){Comman.stageBase.openLayerCommponents(new SGameStageFWindow),Comman.stageBase.closeLayerCommponentsByName(egret.getQualifiedClassName(SGameStageEWindow)),Comman.stageBase.openLayerCommponents(new SGameStageGWindow(BLLComman.gameDataController.animationList))},t.prototype.onLoginSuccessHandler=function(e){null!=BLLComman.gameDataController.playerUtil.roomID&&JoinRoomLogic.ins.send_joinRoom_data(BLLComman.gameDataController.playerUtil.roomID)},t.prototype.onCreateRoomSuccessHandler=function(e){var t=BLLComman.gameDataController.playerUtil.roomID;JoinRoomLogic.ins.send_joinRoom_data(t)},t.prototype.onJoinRoomSuccessHandler=function(e){Comman.stageManager.openStage(new SGameStage)},t}(StageBase);__reflect(LoginStage.prototype,"LoginStage");var LoginStageAWindow=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.eventListenerManager.addClientEventListener(this.roomIDEditableText,eui.UIEvent.CHANGE,this.onRoomIDEditableTextChangeHandler,this)},t.prototype.onRoomIDEditableTextChangeHandler=function(e){if(6==this.roomIDEditableText.text.length){var t=parseInt(this.roomIDEditableText.text);JoinRoomLogic.ins.send_joinRoom_data(t)}},t}(WindowLayerBase);__reflect(LoginStageAWindow.prototype,"LoginStageAWindow");